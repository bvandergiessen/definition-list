'use strict';

var obsidian = require('obsidian');
var view = require('@codemirror/view');

/******************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/* global Reflect, Promise, SuppressedError, Symbol, Iterator */

var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
    return extendStatics(d, b);
};

function __extends(d, b) {
    if (typeof b !== "function" && b !== null)
        throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
    extendStatics(d, b);
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
}

function __awaiter(thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
}

function __generator(thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === "function" ? Iterator : Object).prototype);
    return g.next = verb(0), g["throw"] = verb(1), g["return"] = verb(2), typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (g && (g = 0, op[0] && (_ = 0)), _) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
}

typeof SuppressedError === "function" ? SuppressedError : function (error, suppressed, message) {
    var e = new Error(message);
    return e.name = "SuppressedError", e.error = error, e.suppressed = suppressed, e;
};

var defaultSettings = {
    dtcolor: '#555577',
    ddindentation: 30
};
var definitionMarker = /^\n?: {3}/;
/* 1. The main class, instantiated by Obsidian when the plugin loads */
var DefinitionListPlugin = /** @class */ (function (_super) {
    __extends(DefinitionListPlugin, _super);
    function DefinitionListPlugin() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.cssElement = document.createElement('style');
        return _this;
    }
    DefinitionListPlugin.prototype.onload = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _a, _b, _c, _d;
            return __generator(this, function (_e) {
                switch (_e.label) {
                    case 0:
                        console.log("Loading plugin ".concat(this.manifest.name, " v").concat(this.manifest.version));
                        _a = this;
                        _c = (_b = Object).assign;
                        _d = [{}, defaultSettings];
                        return [4 /*yield*/, this.loadData()];
                    case 1:
                        _a.settings = _c.apply(_b, _d.concat([_e.sent()]));
                        // this.cssElement = document.createElement('style');
                        this.cssElement.textContent = ":root {\n\t\t\t--dtcolor: ".concat(this.settings.dtcolor, ";\n\t\t\t--ddindentation: ").concat(this.settings.ddindentation, "px;\t\n\t\t}");
                        document.head.appendChild(this.cssElement);
                        this.registerEditorExtension(liveUpdateDefinitionLists);
                        this.registerMarkdownPostProcessor(postProcessDefinitionLists, 99);
                        this.addSettingTab(new DefinitionListSettingTab(this.app, this));
                        return [2 /*return*/];
                }
            });
        });
    };
    DefinitionListPlugin.prototype.onunload = function () {
        console.log("Unloading plugin ".concat(this.manifest.name));
        if (this.cssElement)
            this.cssElement.remove();
    };
    return DefinitionListPlugin;
}(obsidian.Plugin));
/* 2. The ViewPlugin that works in Edit Mode. */
var liveUpdateDefinitionLists = view.ViewPlugin.fromClass(/** @class */ (function () {
    function class_1(view$1) {
        this.MARKER = ':   ';
        this.TERM_CLASS = 'view-dt';
        this.DEF_CLASS = 'view-dd';
        this.MARKER_CLASS = 'view-dd-marker';
        this.TERM_DEC = view.Decoration.line({ class: this.TERM_CLASS });
        this.DEF_DEC = view.Decoration.line({ class: this.DEF_CLASS });
        this.MARKER_DEC = view.Decoration.mark({ class: this.MARKER_CLASS });
        this.decorations = view.Decoration.none;
    }
    /* this.decorations should be a cumulative array of all the decorations (i.e.
    * class changes) we have chosen to add to line elements. So we always add to it
    * or modify an existing entry, rather than instantiating it anew.
    * Note that its type, DecorationSet, is a RangeSet of items of the underlying
    * type Decoration. Such a RangeSet object has properties and methods
    * .size (number of elements); .iter() with optional arg from, an offset that
    * lies in or before the first to be iterated; .update(RangeSetUpdate) to add
    * or remove them (returns the new version); .between(from, to, func) run func
    * on every Decoration between the offsets from and to; .map(ChangeDesc). */
    class_1.prototype.update = function (update) {
        var _a;
        if (update.docChanged || update.selectionSet) 
        /* other boolean properties that may be useful:
        *  .viewportChanged: viewport or visible ranges have changed
        *  .geometryChanged: editor size or the document itself changed
        *  .focusChanged: maybe some switch to another document, panel etc.;
        *  change in View between Editing and Rendering view; but
        *  when the document/Editing is activated, .geometryChanged is also true.
        */
        {
            var state = update.view.state;
            var cursorPos = state.selection.main.head;
            // the Line object that represents the current line of the document
            // note that state.doc is an object of class Text
            var currentLine = state.doc.lineAt(cursorPos);
            // the text of the following line
            var nextLineText = (state.doc.lines === currentLine.number) ? '' :
                state.doc.line(currentLine.number + 1).text;
            if (!currentLine.text.startsWith(this.MARKER) &&
                !nextLineText.startsWith(this.MARKER))
                return;
            // TODO: two terms before one definition
            // TODO: parse all definition lists when first opening Edit View, or at
            //  least those inside the viewport (+ update if update.viewportChanged)
            // TODO: implement removal of class when it's not a DL anymore after an edit
            // FIXME: empty <dt> keeps getting additional decorations
            // Perform a few checks before adding any decorations
            var lineClasses = ((_a = update.view
                .domAtPos(cursorPos).node.parentElement.closest('.cm-line')) === null || _a === void 0 ? void 0 : _a.classList)
                || { contains: function (s) { return false; } };
            // - No definition lists inside a code block
            if (lineClasses.contains('HyperMD-codeblock'))
                return;
            // - Don't add a class when it's already been done
            if (lineClasses.contains(this.DEF_CLASS) ||
                lineClasses.contains(this.TERM_CLASS))
                return;
            // Finally, as all criteria have been met, we get to work
            var newDecorations = currentLine.text.startsWith(this.MARKER)
                ? [
                    this.DEF_DEC.range(currentLine.from),
                    this.MARKER_DEC.range(currentLine.from, currentLine.from + 4)
                ] : [
                this.TERM_DEC.range(currentLine.from)
            ];
            this.decorations = this.decorations.update({ add: newDecorations });
            console.debug(this.decorations.size, 'decorations');
            /* the argument for .update is of class RangeSetUpdate<Decoration>,
            * and RangeSetUpdate is a typedef of an Object with optional
            * property .add of class readonly Range<Decoration>; that in turn has
            * instance properties from, to, and the Decoration.
            * You can create a Range<Decoration> by creating a Decoration and
            * applying its .range method (inherited from its superclass RangeValue).
            * Note that .update doesn't modify the instance but returns it. */
        }
        // else if (update.viewportChanged) console.log('viewport changed');
        // else if (update.geometryChanged) console.log('geometry changed');
    };
    return class_1;
}()), {
    decorations: function (v) { return v.decorations; },
});
/* 3. The MarkdownPostProcessor that prepares Reading View and PDF export. */
var postProcessDefinitionLists = function (element, context) {
    /* This post-processor is called
     *  - when the document first enters Reading view: on every child-div of page div
     *  - when switching to Reading view: once per div that has changed
     *  - when exporting to PDF: on the whole page div
     */
    /* In direct descendants of type paragraph, look for definition lists.
     * Return as soon as possible.  */
    var paragraphs = element.findAll(':scope > p, :scope > div > p');
    var nothingToDo = true;
    for (var _i = 0, paragraphs_1 = paragraphs; _i < paragraphs_1.length; _i++) {
        var par = paragraphs_1[_i];
        if (par.innerHTML.includes('<br>\n:   ')) {
            nothingToDo = false;
            break;
        }
    }
    if (nothingToDo)
        return;
    return new Promise(function (resultCallback, errorCallback) {
        // TODO: some error checking
        paragraphs.forEach(function (par) {
            if (!par.innerHTML.includes('<br>\n:   '))
                return;
            // create the <dl> element that is to replace the paragraph element
            var defList = document.createElement('dl');
            var startOfLine = true;
            var itemElement;
            // fill the new <dl> with clones of the nodes in the original <p>
            par.childNodes.forEach(function (node) {
                if ('tagName' in node && node.tagName === "BR") {
                    startOfLine = true;
                    return;
                }
                var clone = node.cloneNode(true);
                if (startOfLine) {
                    var matchDef = node.textContent.match(definitionMarker);
                    if (matchDef) {
                        itemElement = defList.createEl('dd');
                        clone.textContent = node.textContent.slice(matchDef[0].length);
                    }
                    else {
                        itemElement = defList.createEl('dt');
                    }
                    startOfLine = false;
                }
                itemElement.append(clone);
            });
            // put the <dl> in place of the <p>
            par.replaceWith(defList);
        });
        resultCallback(null);
    });
};
/* 4. The PluginSettingTab for this plugin's settings. */
var DefinitionListSettingTab = /** @class */ (function (_super) {
    __extends(DefinitionListSettingTab, _super);
    function DefinitionListSettingTab(app, plugin) {
        var _this = _super.call(this, app, plugin) || this;
        _this.name = plugin.manifest.name;
        _this.settings = plugin.settings;
        _this.cssElement = plugin.cssElement;
        _this.saveChanges = plugin.saveData.bind(plugin);
        return _this;
    }
    DefinitionListSettingTab.prototype.display = function () {
        var _this = this;
        var containerEl = this.containerEl;
        containerEl.empty();
        containerEl.createEl('style', { text: "\n\t\t\t.example {\n\t\t\t\tmargin-top: 10px;\n\t\t\t\theight: auto;\n\t\t\t\tpadding: 4px;\n\t\t\t\tbackground-color: rgba(150, 150, 150, 0.1);\n\t\t\t}\n\t\t\t.example > dl {\n\t\t\t\tmargin-block: 0;\n\t\t\t}\n\t\t" });
        containerEl.createEl('h2', { text: this.name });
        // The Settings items
        var colorSett;
        new obsidian.Setting(containerEl)
            .setName('Color of Terms')
            .setDesc('Terms in a definition list are displayed bold, in this color')
            .addColorPicker(function (cp) {
            cp.setValue(_this.settings.dtcolor)
                .onChange(function (newColor) {
                console.debug('color set to', newColor);
                _this.settings.dtcolor = newColor;
                _this.cssElement.sheet.insertRule(":root {\n\t\t\t\t\t\t\t--dtcolor: ".concat(newColor, ";\n\t\t\t\t\t\t}"), _this.cssElement.sheet.cssRules.length);
                _this.saveChanges(_this.settings);
            });
            colorSett = cp;
        });
        var indentSett;
        new obsidian.Setting(containerEl)
            .setName('Indentation of Definitions')
            .setDesc('Definitions in a definition list are indented by this number of pixels')
            .addSlider(function (sl) {
            sl.setLimits(0, 50, 1)
                .setValue(_this.settings.ddindentation)
                .setDynamicTooltip()
                .onChange(function (value) {
                console.debug('indentation set to', value, 'px');
                _this.settings.ddindentation = value;
                _this.cssElement.sheet.insertRule(":root {\n\t\t\t\t\t\t\t--ddindentation: ".concat(value, "px;\n\t\t\t\t\t\t}"), _this.cssElement.sheet.cssRules.length);
                _this.saveChanges(_this.settings).then(console.debug);
            });
            indentSett = sl;
        });
        new obsidian.Setting(containerEl)
            .addButton(function (bt) { return bt.setButtonText('Reset')
            .setTooltip('Color: dark blue, #555577\nIndentation: 30 pixels')
            .onClick(function (evt) {
            colorSett.setValue(defaultSettings.dtcolor);
            indentSett.setValue(defaultSettings.ddindentation);
        }); });
        // The preview that shows how the settings work out
        containerEl.createEl('div', { cls: 'setting-item-name', text: 'Preview' });
        containerEl.createEl('div', { cls: 'example markdown-preview-view' })
            .innerHTML = "\n\t\t\t<dl>\n\t\t\t<dt>definition list</dt>\n\t\t\t<dd>a list of pairs <i>(term, definition)</i> where each\n\t\t\tterm is on its own line and its definition is on the line(s) below.\n\t\t\tThe definition is usually indented to set it apart from the term</dd>\n\t\t\t<dt>indentation</dt>\n\t\t\t<dd>when a line or paragraph starts at a distance from the left margin</dd>\n\t\t\t</dl>\n\t\t";
    };
    return DefinitionListSettingTab;
}(obsidian.PluginSettingTab));

module.exports = DefinitionListPlugin;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsibm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsIm1haW4udHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cclxuXHJcblBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueVxyXG5wdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuXHJcblxyXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIXHJcblJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWVxyXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXHJcbklORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTVxyXG5MT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUlxyXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXHJcblBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlLCBTdXBwcmVzc2VkRXJyb3IsIFN5bWJvbCwgSXRlcmF0b3IgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcclxuICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXHJcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xyXG4gICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fYXNzaWduID0gZnVuY3Rpb24oKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH1cclxuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZXN0KHMsIGUpIHtcclxuICAgIHZhciB0ID0ge307XHJcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICB0W3BdID0gc1twXTtcclxuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmluZGV4T2YocFtpXSkgPCAwICYmIE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzLCBwW2ldKSlcclxuICAgICAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgICAgIH1cclxuICAgIHJldHVybiB0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcGFyYW0ocGFyYW1JbmRleCwgZGVjb3JhdG9yKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXNEZWNvcmF0ZShjdG9yLCBkZXNjcmlwdG9ySW4sIGRlY29yYXRvcnMsIGNvbnRleHRJbiwgaW5pdGlhbGl6ZXJzLCBleHRyYUluaXRpYWxpemVycykge1xyXG4gICAgZnVuY3Rpb24gYWNjZXB0KGYpIHsgaWYgKGYgIT09IHZvaWQgMCAmJiB0eXBlb2YgZiAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRnVuY3Rpb24gZXhwZWN0ZWRcIik7IHJldHVybiBmOyB9XHJcbiAgICB2YXIga2luZCA9IGNvbnRleHRJbi5raW5kLCBrZXkgPSBraW5kID09PSBcImdldHRlclwiID8gXCJnZXRcIiA6IGtpbmQgPT09IFwic2V0dGVyXCIgPyBcInNldFwiIDogXCJ2YWx1ZVwiO1xyXG4gICAgdmFyIHRhcmdldCA9ICFkZXNjcmlwdG9ySW4gJiYgY3RvciA/IGNvbnRleHRJbltcInN0YXRpY1wiXSA/IGN0b3IgOiBjdG9yLnByb3RvdHlwZSA6IG51bGw7XHJcbiAgICB2YXIgZGVzY3JpcHRvciA9IGRlc2NyaXB0b3JJbiB8fCAodGFyZ2V0ID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGNvbnRleHRJbi5uYW1lKSA6IHt9KTtcclxuICAgIHZhciBfLCBkb25lID0gZmFsc2U7XHJcbiAgICBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG4gICAgICAgIHZhciBjb250ZXh0ID0ge307XHJcbiAgICAgICAgZm9yICh2YXIgcCBpbiBjb250ZXh0SW4pIGNvbnRleHRbcF0gPSBwID09PSBcImFjY2Vzc1wiID8ge30gOiBjb250ZXh0SW5bcF07XHJcbiAgICAgICAgZm9yICh2YXIgcCBpbiBjb250ZXh0SW4uYWNjZXNzKSBjb250ZXh0LmFjY2Vzc1twXSA9IGNvbnRleHRJbi5hY2Nlc3NbcF07XHJcbiAgICAgICAgY29udGV4dC5hZGRJbml0aWFsaXplciA9IGZ1bmN0aW9uIChmKSB7IGlmIChkb25lKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGFkZCBpbml0aWFsaXplcnMgYWZ0ZXIgZGVjb3JhdGlvbiBoYXMgY29tcGxldGVkXCIpOyBleHRyYUluaXRpYWxpemVycy5wdXNoKGFjY2VwdChmIHx8IG51bGwpKTsgfTtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gKDAsIGRlY29yYXRvcnNbaV0pKGtpbmQgPT09IFwiYWNjZXNzb3JcIiA/IHsgZ2V0OiBkZXNjcmlwdG9yLmdldCwgc2V0OiBkZXNjcmlwdG9yLnNldCB9IDogZGVzY3JpcHRvcltrZXldLCBjb250ZXh0KTtcclxuICAgICAgICBpZiAoa2luZCA9PT0gXCJhY2Nlc3NvclwiKSB7XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IHZvaWQgMCkgY29udGludWU7XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IG51bGwgfHwgdHlwZW9mIHJlc3VsdCAhPT0gXCJvYmplY3RcIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIk9iamVjdCBleHBlY3RlZFwiKTtcclxuICAgICAgICAgICAgaWYgKF8gPSBhY2NlcHQocmVzdWx0LmdldCkpIGRlc2NyaXB0b3IuZ2V0ID0gXztcclxuICAgICAgICAgICAgaWYgKF8gPSBhY2NlcHQocmVzdWx0LnNldCkpIGRlc2NyaXB0b3Iuc2V0ID0gXztcclxuICAgICAgICAgICAgaWYgKF8gPSBhY2NlcHQocmVzdWx0LmluaXQpKSBpbml0aWFsaXplcnMudW5zaGlmdChfKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoXyA9IGFjY2VwdChyZXN1bHQpKSB7XHJcbiAgICAgICAgICAgIGlmIChraW5kID09PSBcImZpZWxkXCIpIGluaXRpYWxpemVycy51bnNoaWZ0KF8pO1xyXG4gICAgICAgICAgICBlbHNlIGRlc2NyaXB0b3Jba2V5XSA9IF87XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHRhcmdldCkgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgY29udGV4dEluLm5hbWUsIGRlc2NyaXB0b3IpO1xyXG4gICAgZG9uZSA9IHRydWU7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19ydW5Jbml0aWFsaXplcnModGhpc0FyZywgaW5pdGlhbGl6ZXJzLCB2YWx1ZSkge1xyXG4gICAgdmFyIHVzZVZhbHVlID0gYXJndW1lbnRzLmxlbmd0aCA+IDI7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGluaXRpYWxpemVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHZhbHVlID0gdXNlVmFsdWUgPyBpbml0aWFsaXplcnNbaV0uY2FsbCh0aGlzQXJnLCB2YWx1ZSkgOiBpbml0aWFsaXplcnNbaV0uY2FsbCh0aGlzQXJnKTtcclxuICAgIH1cclxuICAgIHJldHVybiB1c2VWYWx1ZSA/IHZhbHVlIDogdm9pZCAwO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcHJvcEtleSh4KSB7XHJcbiAgICByZXR1cm4gdHlwZW9mIHggPT09IFwic3ltYm9sXCIgPyB4IDogXCJcIi5jb25jYXQoeCk7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19zZXRGdW5jdGlvbk5hbWUoZiwgbmFtZSwgcHJlZml4KSB7XHJcbiAgICBpZiAodHlwZW9mIG5hbWUgPT09IFwic3ltYm9sXCIpIG5hbWUgPSBuYW1lLmRlc2NyaXB0aW9uID8gXCJbXCIuY29uY2F0KG5hbWUuZGVzY3JpcHRpb24sIFwiXVwiKSA6IFwiXCI7XHJcbiAgICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KGYsIFwibmFtZVwiLCB7IGNvbmZpZ3VyYWJsZTogdHJ1ZSwgdmFsdWU6IHByZWZpeCA/IFwiXCIuY29uY2F0KHByZWZpeCwgXCIgXCIsIG5hbWUpIDogbmFtZSB9KTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZ2VuZXJhdG9yKHRoaXNBcmcsIGJvZHkpIHtcclxuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGcgPSBPYmplY3QuY3JlYXRlKCh0eXBlb2YgSXRlcmF0b3IgPT09IFwiZnVuY3Rpb25cIiA/IEl0ZXJhdG9yIDogT2JqZWN0KS5wcm90b3R5cGUpO1xyXG4gICAgcmV0dXJuIGcubmV4dCA9IHZlcmIoMCksIGdbXCJ0aHJvd1wiXSA9IHZlcmIoMSksIGdbXCJyZXR1cm5cIl0gPSB2ZXJiKDIpLCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcclxuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XHJcbiAgICAgICAgd2hpbGUgKGcgJiYgKGcgPSAwLCBvcFswXSAmJiAoXyA9IDApKSwgXykgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xyXG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XHJcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxyXG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fY3JlYXRlQmluZGluZyA9IE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobSwgayk7XHJcbiAgICBpZiAoIWRlc2MgfHwgKFwiZ2V0XCIgaW4gZGVzYyA/ICFtLl9fZXNNb2R1bGUgOiBkZXNjLndyaXRhYmxlIHx8IGRlc2MuY29uZmlndXJhYmxlKSkge1xyXG4gICAgICAgIGRlc2MgPSB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH07XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIGRlc2MpO1xyXG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIG9bazJdID0gbVtrXTtcclxufSk7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHBvcnRTdGFyKG0sIG8pIHtcclxuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKHAgIT09IFwiZGVmYXVsdFwiICYmICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobywgcCkpIF9fY3JlYXRlQmluZGluZyhvLCBtLCBwKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fdmFsdWVzKG8pIHtcclxuICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7XHJcbiAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTtcclxuICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gXCJudW1iZXJcIikgcmV0dXJuIHtcclxuICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gXCJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLlwiIDogXCJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZWFkKG8sIG4pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcclxuICAgIGlmICghbSkgcmV0dXJuIG87XHJcbiAgICB2YXIgaSA9IG0uY2FsbChvKSwgciwgYXIgPSBbXSwgZTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHsgaWYgKGUpIHRocm93IGUuZXJyb3I7IH1cclxuICAgIH1cclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuLyoqIEBkZXByZWNhdGVkICovXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZCgpIHtcclxuICAgIGZvciAodmFyIGFyID0gW10sIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIGFyID0gYXIuY29uY2F0KF9fcmVhZChhcmd1bWVudHNbaV0pKTtcclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuLyoqIEBkZXByZWNhdGVkICovXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZEFycmF5cygpIHtcclxuICAgIGZvciAodmFyIHMgPSAwLCBpID0gMCwgaWwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgaWw7IGkrKykgcyArPSBhcmd1bWVudHNbaV0ubGVuZ3RoO1xyXG4gICAgZm9yICh2YXIgciA9IEFycmF5KHMpLCBrID0gMCwgaSA9IDA7IGkgPCBpbDsgaSsrKVxyXG4gICAgICAgIGZvciAodmFyIGEgPSBhcmd1bWVudHNbaV0sIGogPSAwLCBqbCA9IGEubGVuZ3RoOyBqIDwgamw7IGorKywgaysrKVxyXG4gICAgICAgICAgICByW2tdID0gYVtqXTtcclxuICAgIHJldHVybiByO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWRBcnJheSh0bywgZnJvbSwgcGFjaykge1xyXG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICBpZiAoYXIgfHwgIShpIGluIGZyb20pKSB7XHJcbiAgICAgICAgICAgIGlmICghYXIpIGFyID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSwgMCwgaSk7XHJcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXQodikge1xyXG4gICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBfX2F3YWl0ID8gKHRoaXMudiA9IHYsIHRoaXMpIDogbmV3IF9fYXdhaXQodik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jR2VuZXJhdG9yKHRoaXNBcmcsIF9hcmd1bWVudHMsIGdlbmVyYXRvcikge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBnID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pLCBpLCBxID0gW107XHJcbiAgICByZXR1cm4gaSA9IE9iamVjdC5jcmVhdGUoKHR5cGVvZiBBc3luY0l0ZXJhdG9yID09PSBcImZ1bmN0aW9uXCIgPyBBc3luY0l0ZXJhdG9yIDogT2JqZWN0KS5wcm90b3R5cGUpLCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIsIGF3YWl0UmV0dXJuKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gYXdhaXRSZXR1cm4oZikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh2KS50aGVuKGYsIHJlamVjdCk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpZiAoZ1tuXSkgeyBpW25dID0gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChhLCBiKSB7IHEucHVzaChbbiwgdiwgYSwgYl0pID4gMSB8fCByZXN1bWUobiwgdik7IH0pOyB9OyBpZiAoZikgaVtuXSA9IGYoaVtuXSk7IH0gfVxyXG4gICAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxyXG4gICAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyB9XHJcbiAgICBmdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7IHJlc3VtZShcIm5leHRcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jRGVsZWdhdG9yKG8pIHtcclxuICAgIHZhciBpLCBwO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiLCBmdW5jdGlvbiAoZSkgeyB0aHJvdyBlOyB9KSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpW25dID0gb1tuXSA/IGZ1bmN0aW9uICh2KSB7IHJldHVybiAocCA9ICFwKSA/IHsgdmFsdWU6IF9fYXdhaXQob1tuXSh2KSksIGRvbmU6IGZhbHNlIH0gOiBmID8gZih2KSA6IHY7IH0gOiBmOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jVmFsdWVzKG8pIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgbSA9IG9bU3ltYm9sLmFzeW5jSXRlcmF0b3JdLCBpO1xyXG4gICAgcmV0dXJuIG0gPyBtLmNhbGwobykgOiAobyA9IHR5cGVvZiBfX3ZhbHVlcyA9PT0gXCJmdW5jdGlvblwiID8gX192YWx1ZXMobykgOiBvW1N5bWJvbC5pdGVyYXRvcl0oKSwgaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGkpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlbbl0gPSBvW25dICYmIGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHYgPSBvW25dKHYpLCBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCB2LmRvbmUsIHYudmFsdWUpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgZCwgdikgeyBQcm9taXNlLnJlc29sdmUodikudGhlbihmdW5jdGlvbih2KSB7IHJlc29sdmUoeyB2YWx1ZTogdiwgZG9uZTogZCB9KTsgfSwgcmVqZWN0KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tYWtlVGVtcGxhdGVPYmplY3QoY29va2VkLCByYXcpIHtcclxuICAgIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvb2tlZCwgXCJyYXdcIiwgeyB2YWx1ZTogcmF3IH0pOyB9IGVsc2UgeyBjb29rZWQucmF3ID0gcmF3OyB9XHJcbiAgICByZXR1cm4gY29va2VkO1xyXG59O1xyXG5cclxudmFyIF9fc2V0TW9kdWxlRGVmYXVsdCA9IE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgdikge1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiZGVmYXVsdFwiLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2IH0pO1xyXG59KSA6IGZ1bmN0aW9uKG8sIHYpIHtcclxuICAgIG9bXCJkZWZhdWx0XCJdID0gdjtcclxufTtcclxuXHJcbnZhciBvd25LZXlzID0gZnVuY3Rpb24obykge1xyXG4gICAgb3duS2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzIHx8IGZ1bmN0aW9uIChvKSB7XHJcbiAgICAgICAgdmFyIGFyID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgayBpbiBvKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG8sIGspKSBhclthci5sZW5ndGhdID0gaztcclxuICAgICAgICByZXR1cm4gYXI7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIG93bktleXMobyk7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnRTdGFyKG1vZCkge1xyXG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcclxuICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayA9IG93bktleXMobW9kKSwgaSA9IDA7IGkgPCBrLmxlbmd0aDsgaSsrKSBpZiAoa1tpXSAhPT0gXCJkZWZhdWx0XCIpIF9fY3JlYXRlQmluZGluZyhyZXN1bHQsIG1vZCwga1tpXSk7XHJcbiAgICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0RGVmYXVsdChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgZGVmYXVsdDogbW9kIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHJlY2VpdmVyLCBzdGF0ZSwga2luZCwgZikge1xyXG4gICAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgZ2V0dGVyXCIpO1xyXG4gICAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgcmVhZCBwcml2YXRlIG1lbWJlciBmcm9tIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7XHJcbiAgICByZXR1cm4ga2luZCA9PT0gXCJtXCIgPyBmIDoga2luZCA9PT0gXCJhXCIgPyBmLmNhbGwocmVjZWl2ZXIpIDogZiA/IGYudmFsdWUgOiBzdGF0ZS5nZXQocmVjZWl2ZXIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZFNldChyZWNlaXZlciwgc3RhdGUsIHZhbHVlLCBraW5kLCBmKSB7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJtXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIG1ldGhvZCBpcyBub3Qgd3JpdGFibGVcIik7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJhXCIgJiYgIWYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBzZXR0ZXJcIik7XHJcbiAgICBpZiAodHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciAhPT0gc3RhdGUgfHwgIWYgOiAhc3RhdGUuaGFzKHJlY2VpdmVyKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCB3cml0ZSBwcml2YXRlIG1lbWJlciB0byBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO1xyXG4gICAgcmV0dXJuIChraW5kID09PSBcImFcIiA/IGYuY2FsbChyZWNlaXZlciwgdmFsdWUpIDogZiA/IGYudmFsdWUgPSB2YWx1ZSA6IHN0YXRlLnNldChyZWNlaXZlciwgdmFsdWUpKSwgdmFsdWU7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkSW4oc3RhdGUsIHJlY2VpdmVyKSB7XHJcbiAgICBpZiAocmVjZWl2ZXIgPT09IG51bGwgfHwgKHR5cGVvZiByZWNlaXZlciAhPT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgcmVjZWl2ZXIgIT09IFwiZnVuY3Rpb25cIikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgdXNlICdpbicgb3BlcmF0b3Igb24gbm9uLW9iamVjdFwiKTtcclxuICAgIHJldHVybiB0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyID09PSBzdGF0ZSA6IHN0YXRlLmhhcyhyZWNlaXZlcik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FkZERpc3Bvc2FibGVSZXNvdXJjZShlbnYsIHZhbHVlLCBhc3luYykge1xyXG4gICAgaWYgKHZhbHVlICE9PSBudWxsICYmIHZhbHVlICE9PSB2b2lkIDApIHtcclxuICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSBcIm9iamVjdFwiICYmIHR5cGVvZiB2YWx1ZSAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiT2JqZWN0IGV4cGVjdGVkLlwiKTtcclxuICAgICAgICB2YXIgZGlzcG9zZSwgaW5uZXI7XHJcbiAgICAgICAgaWYgKGFzeW5jKSB7XHJcbiAgICAgICAgICAgIGlmICghU3ltYm9sLmFzeW5jRGlzcG9zZSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0Rpc3Bvc2UgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgICAgICAgICBkaXNwb3NlID0gdmFsdWVbU3ltYm9sLmFzeW5jRGlzcG9zZV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChkaXNwb3NlID09PSB2b2lkIDApIHtcclxuICAgICAgICAgICAgaWYgKCFTeW1ib2wuZGlzcG9zZSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5kaXNwb3NlIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgICAgICAgICAgZGlzcG9zZSA9IHZhbHVlW1N5bWJvbC5kaXNwb3NlXTtcclxuICAgICAgICAgICAgaWYgKGFzeW5jKSBpbm5lciA9IGRpc3Bvc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlb2YgZGlzcG9zZSAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiT2JqZWN0IG5vdCBkaXNwb3NhYmxlLlwiKTtcclxuICAgICAgICBpZiAoaW5uZXIpIGRpc3Bvc2UgPSBmdW5jdGlvbigpIHsgdHJ5IHsgaW5uZXIuY2FsbCh0aGlzKTsgfSBjYXRjaCAoZSkgeyByZXR1cm4gUHJvbWlzZS5yZWplY3QoZSk7IH0gfTtcclxuICAgICAgICBlbnYuc3RhY2sucHVzaCh7IHZhbHVlOiB2YWx1ZSwgZGlzcG9zZTogZGlzcG9zZSwgYXN5bmM6IGFzeW5jIH0pO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoYXN5bmMpIHtcclxuICAgICAgICBlbnYuc3RhY2sucHVzaCh7IGFzeW5jOiB0cnVlIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHZhbHVlO1xyXG5cclxufVxyXG5cclxudmFyIF9TdXBwcmVzc2VkRXJyb3IgPSB0eXBlb2YgU3VwcHJlc3NlZEVycm9yID09PSBcImZ1bmN0aW9uXCIgPyBTdXBwcmVzc2VkRXJyb3IgOiBmdW5jdGlvbiAoZXJyb3IsIHN1cHByZXNzZWQsIG1lc3NhZ2UpIHtcclxuICAgIHZhciBlID0gbmV3IEVycm9yKG1lc3NhZ2UpO1xyXG4gICAgcmV0dXJuIGUubmFtZSA9IFwiU3VwcHJlc3NlZEVycm9yXCIsIGUuZXJyb3IgPSBlcnJvciwgZS5zdXBwcmVzc2VkID0gc3VwcHJlc3NlZCwgZTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2Rpc3Bvc2VSZXNvdXJjZXMoZW52KSB7XHJcbiAgICBmdW5jdGlvbiBmYWlsKGUpIHtcclxuICAgICAgICBlbnYuZXJyb3IgPSBlbnYuaGFzRXJyb3IgPyBuZXcgX1N1cHByZXNzZWRFcnJvcihlLCBlbnYuZXJyb3IsIFwiQW4gZXJyb3Igd2FzIHN1cHByZXNzZWQgZHVyaW5nIGRpc3Bvc2FsLlwiKSA6IGU7XHJcbiAgICAgICAgZW52Lmhhc0Vycm9yID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIHZhciByLCBzID0gMDtcclxuICAgIGZ1bmN0aW9uIG5leHQoKSB7XHJcbiAgICAgICAgd2hpbGUgKHIgPSBlbnYuc3RhY2sucG9wKCkpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGlmICghci5hc3luYyAmJiBzID09PSAxKSByZXR1cm4gcyA9IDAsIGVudi5zdGFjay5wdXNoKHIpLCBQcm9taXNlLnJlc29sdmUoKS50aGVuKG5leHQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHIuZGlzcG9zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSByLmRpc3Bvc2UuY2FsbChyLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoci5hc3luYykgcmV0dXJuIHMgfD0gMiwgUHJvbWlzZS5yZXNvbHZlKHJlc3VsdCkudGhlbihuZXh0LCBmdW5jdGlvbihlKSB7IGZhaWwoZSk7IHJldHVybiBuZXh0KCk7IH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBzIHw9IDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIGZhaWwoZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHMgPT09IDEpIHJldHVybiBlbnYuaGFzRXJyb3IgPyBQcm9taXNlLnJlamVjdChlbnYuZXJyb3IpIDogUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgaWYgKGVudi5oYXNFcnJvcikgdGhyb3cgZW52LmVycm9yO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5leHQoKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmV3cml0ZVJlbGF0aXZlSW1wb3J0RXh0ZW5zaW9uKHBhdGgsIHByZXNlcnZlSnN4KSB7XHJcbiAgICBpZiAodHlwZW9mIHBhdGggPT09IFwic3RyaW5nXCIgJiYgL15cXC5cXC4/XFwvLy50ZXN0KHBhdGgpKSB7XHJcbiAgICAgICAgcmV0dXJuIHBhdGgucmVwbGFjZSgvXFwuKHRzeCkkfCgoPzpcXC5kKT8pKCg/OlxcLlteLi9dKz8pPylcXC4oW2NtXT8pdHMkL2ksIGZ1bmN0aW9uIChtLCB0c3gsIGQsIGV4dCwgY20pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRzeCA/IHByZXNlcnZlSnN4ID8gXCIuanN4XCIgOiBcIi5qc1wiIDogZCAmJiAoIWV4dCB8fCAhY20pID8gbSA6IChkICsgZXh0ICsgXCIuXCIgKyBjbS50b0xvd2VyQ2FzZSgpICsgXCJqc1wiKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBwYXRoO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCB7XHJcbiAgICBfX2V4dGVuZHM6IF9fZXh0ZW5kcyxcclxuICAgIF9fYXNzaWduOiBfX2Fzc2lnbixcclxuICAgIF9fcmVzdDogX19yZXN0LFxyXG4gICAgX19kZWNvcmF0ZTogX19kZWNvcmF0ZSxcclxuICAgIF9fcGFyYW06IF9fcGFyYW0sXHJcbiAgICBfX2VzRGVjb3JhdGU6IF9fZXNEZWNvcmF0ZSxcclxuICAgIF9fcnVuSW5pdGlhbGl6ZXJzOiBfX3J1bkluaXRpYWxpemVycyxcclxuICAgIF9fcHJvcEtleTogX19wcm9wS2V5LFxyXG4gICAgX19zZXRGdW5jdGlvbk5hbWU6IF9fc2V0RnVuY3Rpb25OYW1lLFxyXG4gICAgX19tZXRhZGF0YTogX19tZXRhZGF0YSxcclxuICAgIF9fYXdhaXRlcjogX19hd2FpdGVyLFxyXG4gICAgX19nZW5lcmF0b3I6IF9fZ2VuZXJhdG9yLFxyXG4gICAgX19jcmVhdGVCaW5kaW5nOiBfX2NyZWF0ZUJpbmRpbmcsXHJcbiAgICBfX2V4cG9ydFN0YXI6IF9fZXhwb3J0U3RhcixcclxuICAgIF9fdmFsdWVzOiBfX3ZhbHVlcyxcclxuICAgIF9fcmVhZDogX19yZWFkLFxyXG4gICAgX19zcHJlYWQ6IF9fc3ByZWFkLFxyXG4gICAgX19zcHJlYWRBcnJheXM6IF9fc3ByZWFkQXJyYXlzLFxyXG4gICAgX19zcHJlYWRBcnJheTogX19zcHJlYWRBcnJheSxcclxuICAgIF9fYXdhaXQ6IF9fYXdhaXQsXHJcbiAgICBfX2FzeW5jR2VuZXJhdG9yOiBfX2FzeW5jR2VuZXJhdG9yLFxyXG4gICAgX19hc3luY0RlbGVnYXRvcjogX19hc3luY0RlbGVnYXRvcixcclxuICAgIF9fYXN5bmNWYWx1ZXM6IF9fYXN5bmNWYWx1ZXMsXHJcbiAgICBfX21ha2VUZW1wbGF0ZU9iamVjdDogX19tYWtlVGVtcGxhdGVPYmplY3QsXHJcbiAgICBfX2ltcG9ydFN0YXI6IF9faW1wb3J0U3RhcixcclxuICAgIF9faW1wb3J0RGVmYXVsdDogX19pbXBvcnREZWZhdWx0LFxyXG4gICAgX19jbGFzc1ByaXZhdGVGaWVsZEdldDogX19jbGFzc1ByaXZhdGVGaWVsZEdldCxcclxuICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQ6IF9fY2xhc3NQcml2YXRlRmllbGRTZXQsXHJcbiAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkSW46IF9fY2xhc3NQcml2YXRlRmllbGRJbixcclxuICAgIF9fYWRkRGlzcG9zYWJsZVJlc291cmNlOiBfX2FkZERpc3Bvc2FibGVSZXNvdXJjZSxcclxuICAgIF9fZGlzcG9zZVJlc291cmNlczogX19kaXNwb3NlUmVzb3VyY2VzLFxyXG4gICAgX19yZXdyaXRlUmVsYXRpdmVJbXBvcnRFeHRlbnNpb246IF9fcmV3cml0ZVJlbGF0aXZlSW1wb3J0RXh0ZW5zaW9uLFxyXG59O1xyXG4iLCJpbXBvcnQge0FwcCwgUGx1Z2luLCBNYXJrZG93blBvc3RQcm9jZXNzb3IsIE1hcmtkb3duU2VjdGlvbkluZm9ybWF0aW9uLFxyXG5cdFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsIE1hcmtkb3duVmlldywgQ29sb3JDb21wb25lbnQsIFNsaWRlckNvbXBvbmVudCxcclxuXHRQbHVnaW5NYW5pZmVzdH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQge1ZpZXdQbHVnaW4sIFZpZXdVcGRhdGUsIEVkaXRvclZpZXcsIERlY29yYXRpb25TZXQsIERlY29yYXRpb259IGZyb20gJ0Bjb2RlbWlycm9yL3ZpZXcnO1xyXG5cclxuLyogRGVmaW5pdGlvbiBMaXN0IHBsdWdpbiBmb3IgT2JzaWRpYW5cclxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICogVGhlIHBsdWdpbiBoYXMgZm91ciBtYWluIGNvbXBvbmVudHM6XHJcbiAqICAxLiB0aGUgZGVmYXVsdCBleHBvcnQsIHRoZSBjbGFzcyBEZWZpbml0aW9uTGlzdFBsdWdpblxyXG4gKiAgICAgdGhhdCBpcyBpbnN0YW50aWF0ZWQgb25jZSwgd2hlbiB0aGUgcGx1Z2luIGxvYWRzLiBJdFxyXG4gKiAgICAgcmVnaXN0ZXJzIGl0ZW1zIDIsIDMgYW5kIDQgc28gT2JzaWRpYW4gY2FuIHVzZSB0aGVtLlxyXG4gKiAgMi4gdGhlIGNvbnN0YW50IGxpdmVVcGRhdGVEZWZpbml0aW9uTGlzdHMsIGFuIGluc3RhbmNlXHJcbiAqICAgICBvZiB0aGUgVmlld1BsdWdpbiBjbGFzcy4gSW5zaWRlIGl0LCBhbiBhbm9ueW1vdXMgY2xhc3NcclxuICogICAgIGlzIGVtYmVkZGVkIHRoYXQgaXMgaW5zdGFudGlhdGVkIHdoZW4gYSBkb2N1bWVudCBpc1xyXG4gKiAgICAgb3BlbmVkIChvciB0aGUgZmlyc3QgdGltZSB0aGUgdXNlciBzd2l0Y2hlcyB0byBpdCk6IGV2ZXJ5XHJcbiAqICAgICBvcGVuIGRvY3VtZW50IGhhcyBpdHMgb3duIGluc3RhbmNlIG9mIHRoYXQgZW1iZWRkZWQgY2xhc3MuXHJcbiAqICAgICBJdHMgLnVwZGF0ZSBtZXRob2QgaXMgY2FsbGVkIGluIEVkaXQgTW9kZSB3aGVuZXZlciBhbnl0aGluZ1xyXG4gKiAgICAgaGFwcGVucyAtIGVkaXRzLCBzY3JvbGxpbmcsIGN1cnNvciBtb3ZlbWVudCAtIHdpdGggY29udGVudHNcclxuICogICAgIGFuZCBkZXRhaWxzIG9mIHRoZSBkb2N1bWVudCBhbmQgZWRpdG9yIHdpbmRvdyBwYXNzZWQgaW47XHJcbiAqICAgICBpdCB0ZWxscyB0aGUgZWRpdG9yIENvZGVNaXJyb3IgdG8gYWRkICdkZWNvcmF0aW9ucycgKGNsYXNzZXNcclxuICogICAgIGFuZCBzcGFucykgdG8gdGhlIGNvbnRlbnQsIHNvIGl0IHRha2VzIG9uIHRoZSBjb3JyZWN0IGFwcGVhcmFuY2VcclxuICogIDMuIHRoZSBmdW5jdGlvbiBwb3N0UHJvY2Vzc0RlZmluaXRpb25MaXN0cywgd2hpY2ggYWRoZXJlcyB0byB0aGVcclxuICogICAgIE1hcmtkb3duUG9zdFByb2Nlc3NvciBpbnRlcmZhY2UuIFdoZW4gYSBkb2N1bWVudCBlbnRlcnNcclxuICogICAgIFJlYWRpbmcgVmlldywgdGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgb24gZXZlcnkgcGFyYWdyYXBoXHJcbiAqICAgICBjaGFuZ2VkIHNpbmNlIHRoZSBsYXN0IHRpbWUgaW4gUmVhZGluZyBWaWV3LiBJdCdzIGNhbGxlZFxyXG4gKiAgICAgb25jZSB3aGVuIHRoZSBkb2N1bWVudCBpcyBzYXZlZCBhcyBhIFBERi5cclxuICogIDQuIHRoZSBjbGFzcyBEZWZpbml0aW9uTGlzdFNldHRpbmdUYWIsIHRoYXQgaXMgaW5zdGFudGlhdGVkXHJcbiAqICAgICBvbmNlLCB3aGVuIHRoZSBwbHVnaW4gbG9hZHMuIEl0IHNldHMgdXAgdGhlIHNldHRpbmdzIHBhZ2VcclxuICogICAgIGFuZCBzYXZlcyBjaGFuZ2VkIHNldHRpbmdzLlxyXG4gKi9cclxuXHJcbmludGVyZmFjZSBEZWZpbml0aW9uTGlzdFBsdWdpblNldHRpbmdzIHtcclxuXHRkdGNvbG9yOiBzdHJpbmc7XHJcblx0ZGRpbmRlbnRhdGlvbjogbnVtYmVyO1xyXG59XHJcbmNvbnN0IGRlZmF1bHRTZXR0aW5nczogRGVmaW5pdGlvbkxpc3RQbHVnaW5TZXR0aW5ncyA9IHtcclxuXHRkdGNvbG9yOiAnIzU1NTU3NycsXHJcblx0ZGRpbmRlbnRhdGlvbjogMzBcclxufVxyXG5jb25zdCBkZWZpbml0aW9uTWFya2VyOiBSZWdFeHAgPSAvXlxcbj86IHszfS87XHJcblxyXG4vKiAxLiBUaGUgbWFpbiBjbGFzcywgaW5zdGFudGlhdGVkIGJ5IE9ic2lkaWFuIHdoZW4gdGhlIHBsdWdpbiBsb2FkcyAqL1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEZWZpbml0aW9uTGlzdFBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XHJcblx0cHVibGljIHNldHRpbmdzOiBEZWZpbml0aW9uTGlzdFBsdWdpblNldHRpbmdzO1xyXG5cdHB1YmxpYyByZWFkb25seSBjc3NFbGVtZW50OiBIVE1MU3R5bGVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcclxuXHJcblx0YXN5bmMgb25sb2FkKCkge1xyXG5cdFx0Y29uc29sZS5sb2coYExvYWRpbmcgcGx1Z2luICR7dGhpcy5tYW5pZmVzdC5uYW1lfSB2JHt0aGlzLm1hbmlmZXN0LnZlcnNpb259YCk7XHJcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdFNldHRpbmdzLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xyXG5cdFx0Ly8gdGhpcy5jc3NFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcclxuXHRcdHRoaXMuY3NzRWxlbWVudC50ZXh0Q29udGVudCA9IGA6cm9vdCB7XHJcblx0XHRcdC0tZHRjb2xvcjogJHt0aGlzLnNldHRpbmdzLmR0Y29sb3J9O1xyXG5cdFx0XHQtLWRkaW5kZW50YXRpb246ICR7dGhpcy5zZXR0aW5ncy5kZGluZGVudGF0aW9ufXB4O1x0XHJcblx0XHR9YDtcclxuXHRcdGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQodGhpcy5jc3NFbGVtZW50KTtcclxuXHRcdHRoaXMucmVnaXN0ZXJFZGl0b3JFeHRlbnNpb24obGl2ZVVwZGF0ZURlZmluaXRpb25MaXN0cyk7XHJcblx0XHR0aGlzLnJlZ2lzdGVyTWFya2Rvd25Qb3N0UHJvY2Vzc29yKHBvc3RQcm9jZXNzRGVmaW5pdGlvbkxpc3RzLCA5OSk7XHJcblx0XHR0aGlzLmFkZFNldHRpbmdUYWIobmV3IERlZmluaXRpb25MaXN0U2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xyXG5cdH1cclxuXHJcblx0b251bmxvYWQoKSB7XHJcblx0XHRjb25zb2xlLmxvZyhgVW5sb2FkaW5nIHBsdWdpbiAke3RoaXMubWFuaWZlc3QubmFtZX1gKTtcclxuXHRcdGlmICh0aGlzLmNzc0VsZW1lbnQpIHRoaXMuY3NzRWxlbWVudC5yZW1vdmUoKTtcclxuXHR9XHJcbn1cclxuXHJcbi8qIDIuIFRoZSBWaWV3UGx1Z2luIHRoYXQgd29ya3MgaW4gRWRpdCBNb2RlLiAqL1xyXG5jb25zdCBsaXZlVXBkYXRlRGVmaW5pdGlvbkxpc3RzID0gVmlld1BsdWdpbi5mcm9tQ2xhc3MoXHJcblx0LyogVGhlIFZpZXdQbHVnaW4gY2xhc3MgaXMgZ2VuZXJpYzogaXQgcmVxdWlyZXMgYW4gdW5kZXJseWluZyB0eXBlLCBhIHN1YmNsYXNzIG9mXHJcbiAgICAgKiB0aGUgUGx1Z2luVmFsdWUgY2xhc3MuIFRoYXQgaXMgdG8gYmUgdGhlIGZpcnN0IGFyZ3VtZW50IHBhc3NlZCBpbnRvIHRoZSBjbGFzcyBtZXRob2RcclxuICAgICAqIC5mcm9tQ2xhc3MoKSB3aGljaCByZXR1cm5zIGEgVmlld1BsdWdpbiBpbnN0YW5jZSB3aXRoIHRoYXQgdW5kZXJseWluZyB0eXBlLlxyXG4gICAgICogVGhlIHNlY29uZCBhcmd1bWVudCBvZiB0aGF0IGNsYXNzIG1ldGhvZCwgdG8gZ2l2ZSBhZGRpdGlvbmFsIGRldGFpbHMsIGlzIGEgUGx1Z2luU3BlY1xyXG4gICAgICogaW5zdGFuY2Ugd2l0aCB0aGUgc2FtZSB1bmRlcmx5aW5nIHR5cGUuIEl0IGhhcyB6ZXJvIG9yIG1vcmUgb2YgdGhlIHByb3BlcnRpZXNcclxuICAgICAqIGV2ZW50SGFuZGxlcnMsIGV2ZW50T2JzZXJ2ZXJzLCBwcm92aWRlLCBhbmQgZGVjb3JhdGlvbnMuIFRoZSBsYXR0ZXIgaXMgYVxyXG4gICAgICogZnVuY3Rpb24gdGhhdCwgd2hlbiBwYXNzZWQgYW4gaW5zdGFuY2Ugb2YgdGhlIHVuZGVybHlpbmcgY2xhc3MsIHJldHVybnMgYVxyXG4gICAgICogRGVjb3JhdGlvblNldCAtIGluIHRoaXMgY2FzZSB0aGUgZnVuY3Rpb24gc2ltcGx5IHJldHVybnMgdGhlIC5kZWNvcmF0aW9uc1xyXG4gICAgICogaW5zdGFuY2UgcHJvcGVydHkuICovXHJcblx0Y2xhc3MgeyAgLy8gdGhlIHBsdWdpbiBlbWJlZHMgYW4gYW5vbnltb3VzIGNsYXNzIHdlIGRlZmluZSBoZXJlXHJcblx0XHRkZWNvcmF0aW9uczogRGVjb3JhdGlvblNldDtcclxuXHRcdHByaXZhdGUgcmVhZG9ubHkgTUFSS0VSOiBzdHJpbmcgPSAnOiAgICc7XHJcblx0XHRwcml2YXRlIHJlYWRvbmx5IFRFUk1fQ0xBU1M6IHN0cmluZyA9ICd2aWV3LWR0JztcclxuXHRcdHByaXZhdGUgcmVhZG9ubHkgREVGX0NMQVNTOiBzdHJpbmcgPSAndmlldy1kZCc7XHJcblx0XHRwcml2YXRlIHJlYWRvbmx5IE1BUktFUl9DTEFTUzogc3RyaW5nID0gJ3ZpZXctZGQtbWFya2VyJztcclxuXHRcdHByaXZhdGUgcmVhZG9ubHkgVEVSTV9ERUM6IERlY29yYXRpb24gPSBEZWNvcmF0aW9uLmxpbmUoe2NsYXNzOiB0aGlzLlRFUk1fQ0xBU1N9KTtcclxuXHRcdHByaXZhdGUgcmVhZG9ubHkgREVGX0RFQzogRGVjb3JhdGlvbiA9IERlY29yYXRpb24ubGluZSh7Y2xhc3M6IHRoaXMuREVGX0NMQVNTfSk7XHJcblx0XHRwcml2YXRlIHJlYWRvbmx5IE1BUktFUl9ERUM6IERlY29yYXRpb24gPSBEZWNvcmF0aW9uLm1hcmsoe2NsYXNzOiB0aGlzLk1BUktFUl9DTEFTU30pO1xyXG5cdFx0Y29uc3RydWN0b3IodmlldzogRWRpdG9yVmlldykge1xyXG5cdFx0XHR0aGlzLmRlY29yYXRpb25zID0gRGVjb3JhdGlvbi5ub25lO1xyXG5cdFx0fVxyXG5cdFx0LyogdGhpcy5kZWNvcmF0aW9ucyBzaG91bGQgYmUgYSBjdW11bGF0aXZlIGFycmF5IG9mIGFsbCB0aGUgZGVjb3JhdGlvbnMgKGkuZS5cclxuXHRcdCogY2xhc3MgY2hhbmdlcykgd2UgaGF2ZSBjaG9zZW4gdG8gYWRkIHRvIGxpbmUgZWxlbWVudHMuIFNvIHdlIGFsd2F5cyBhZGQgdG8gaXRcclxuXHRcdCogb3IgbW9kaWZ5IGFuIGV4aXN0aW5nIGVudHJ5LCByYXRoZXIgdGhhbiBpbnN0YW50aWF0aW5nIGl0IGFuZXcuXHJcblx0XHQqIE5vdGUgdGhhdCBpdHMgdHlwZSwgRGVjb3JhdGlvblNldCwgaXMgYSBSYW5nZVNldCBvZiBpdGVtcyBvZiB0aGUgdW5kZXJseWluZ1xyXG5cdFx0KiB0eXBlIERlY29yYXRpb24uIFN1Y2ggYSBSYW5nZVNldCBvYmplY3QgaGFzIHByb3BlcnRpZXMgYW5kIG1ldGhvZHNcclxuXHRcdCogLnNpemUgKG51bWJlciBvZiBlbGVtZW50cyk7IC5pdGVyKCkgd2l0aCBvcHRpb25hbCBhcmcgZnJvbSwgYW4gb2Zmc2V0IHRoYXRcclxuXHRcdCogbGllcyBpbiBvciBiZWZvcmUgdGhlIGZpcnN0IHRvIGJlIGl0ZXJhdGVkOyAudXBkYXRlKFJhbmdlU2V0VXBkYXRlKSB0byBhZGRcclxuXHRcdCogb3IgcmVtb3ZlIHRoZW0gKHJldHVybnMgdGhlIG5ldyB2ZXJzaW9uKTsgLmJldHdlZW4oZnJvbSwgdG8sIGZ1bmMpIHJ1biBmdW5jXHJcblx0XHQqIG9uIGV2ZXJ5IERlY29yYXRpb24gYmV0d2VlbiB0aGUgb2Zmc2V0cyBmcm9tIGFuZCB0bzsgLm1hcChDaGFuZ2VEZXNjKS4gKi9cclxuXHJcblx0XHR1cGRhdGUodXBkYXRlOiBWaWV3VXBkYXRlKSB7XHJcblx0XHRcdGlmICh1cGRhdGUuZG9jQ2hhbmdlZCB8fCB1cGRhdGUuc2VsZWN0aW9uU2V0KVxyXG5cdFx0XHRcdC8qIG90aGVyIGJvb2xlYW4gcHJvcGVydGllcyB0aGF0IG1heSBiZSB1c2VmdWw6XHJcbiAgICAgICAgICAgICAgICAqICAudmlld3BvcnRDaGFuZ2VkOiB2aWV3cG9ydCBvciB2aXNpYmxlIHJhbmdlcyBoYXZlIGNoYW5nZWRcclxuICAgICAgICAgICAgICAgICogIC5nZW9tZXRyeUNoYW5nZWQ6IGVkaXRvciBzaXplIG9yIHRoZSBkb2N1bWVudCBpdHNlbGYgY2hhbmdlZFxyXG4gICAgICAgICAgICAgICAgKiAgLmZvY3VzQ2hhbmdlZDogbWF5YmUgc29tZSBzd2l0Y2ggdG8gYW5vdGhlciBkb2N1bWVudCwgcGFuZWwgZXRjLjtcclxuICAgICAgICAgICAgICAgICogIGNoYW5nZSBpbiBWaWV3IGJldHdlZW4gRWRpdGluZyBhbmQgUmVuZGVyaW5nIHZpZXc7IGJ1dFxyXG4gICAgICAgICAgICAgICAgKiAgd2hlbiB0aGUgZG9jdW1lbnQvRWRpdGluZyBpcyBhY3RpdmF0ZWQsIC5nZW9tZXRyeUNoYW5nZWQgaXMgYWxzbyB0cnVlLlxyXG4gICAgICAgICAgICAgICAgKi9cclxuXHRcdFx0e1xyXG5cdFx0XHRcdGNvbnN0IHN0YXRlID0gdXBkYXRlLnZpZXcuc3RhdGU7XHJcblx0XHRcdFx0Y29uc3QgY3Vyc29yUG9zID0gc3RhdGUuc2VsZWN0aW9uLm1haW4uaGVhZDtcclxuXHJcblx0XHRcdFx0Ly8gdGhlIExpbmUgb2JqZWN0IHRoYXQgcmVwcmVzZW50cyB0aGUgY3VycmVudCBsaW5lIG9mIHRoZSBkb2N1bWVudFxyXG5cdFx0XHRcdC8vIG5vdGUgdGhhdCBzdGF0ZS5kb2MgaXMgYW4gb2JqZWN0IG9mIGNsYXNzIFRleHRcclxuXHRcdFx0XHRjb25zdCBjdXJyZW50TGluZSA9IHN0YXRlLmRvYy5saW5lQXQoY3Vyc29yUG9zKTtcclxuXHRcdFx0XHQvLyB0aGUgdGV4dCBvZiB0aGUgZm9sbG93aW5nIGxpbmVcclxuXHRcdFx0XHRjb25zdCBuZXh0TGluZVRleHQ6IHN0cmluZyA9IChzdGF0ZS5kb2MubGluZXMgPT09IGN1cnJlbnRMaW5lLm51bWJlcikgPyAnJyA6XHJcblx0XHRcdFx0XHRzdGF0ZS5kb2MubGluZShjdXJyZW50TGluZS5udW1iZXIgKyAxKS50ZXh0O1xyXG5cdFx0XHRcdGlmICghY3VycmVudExpbmUudGV4dC5zdGFydHNXaXRoKHRoaXMuTUFSS0VSKSAmJlxyXG5cdFx0XHRcdFx0IW5leHRMaW5lVGV4dC5zdGFydHNXaXRoKHRoaXMuTUFSS0VSKSlcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHJcblx0XHRcdFx0Ly8gVE9ETzogdHdvIHRlcm1zIGJlZm9yZSBvbmUgZGVmaW5pdGlvblxyXG5cdFx0XHRcdC8vIFRPRE86IHBhcnNlIGFsbCBkZWZpbml0aW9uIGxpc3RzIHdoZW4gZmlyc3Qgb3BlbmluZyBFZGl0IFZpZXcsIG9yIGF0XHJcblx0XHRcdFx0Ly8gIGxlYXN0IHRob3NlIGluc2lkZSB0aGUgdmlld3BvcnQgKCsgdXBkYXRlIGlmIHVwZGF0ZS52aWV3cG9ydENoYW5nZWQpXHJcblx0XHRcdFx0Ly8gVE9ETzogaW1wbGVtZW50IHJlbW92YWwgb2YgY2xhc3Mgd2hlbiBpdCdzIG5vdCBhIERMIGFueW1vcmUgYWZ0ZXIgYW4gZWRpdFxyXG5cdFx0XHRcdC8vIEZJWE1FOiBlbXB0eSA8ZHQ+IGtlZXBzIGdldHRpbmcgYWRkaXRpb25hbCBkZWNvcmF0aW9uc1xyXG5cclxuXHRcdFx0XHQvLyBQZXJmb3JtIGEgZmV3IGNoZWNrcyBiZWZvcmUgYWRkaW5nIGFueSBkZWNvcmF0aW9uc1xyXG5cdFx0XHRcdGNvbnN0IGxpbmVDbGFzc2VzID0gIHVwZGF0ZS52aWV3XHJcblx0XHRcdFx0XHRcdC5kb21BdFBvcyhjdXJzb3JQb3MpLm5vZGUucGFyZW50RWxlbWVudC5jbG9zZXN0KCcuY20tbGluZScpPy5jbGFzc0xpc3RcclxuXHRcdFx0XHRcdHx8IHtjb250YWluczogKHM6IHN0cmluZykgPT4gZmFsc2V9O1xyXG5cdFx0XHRcdC8vIC0gTm8gZGVmaW5pdGlvbiBsaXN0cyBpbnNpZGUgYSBjb2RlIGJsb2NrXHJcblx0XHRcdFx0aWYgKGxpbmVDbGFzc2VzLmNvbnRhaW5zKCdIeXBlck1ELWNvZGVibG9jaycpKVxyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdC8vIC0gRG9uJ3QgYWRkIGEgY2xhc3Mgd2hlbiBpdCdzIGFscmVhZHkgYmVlbiBkb25lXHJcblx0XHRcdFx0aWYgKGxpbmVDbGFzc2VzLmNvbnRhaW5zKHRoaXMuREVGX0NMQVNTKSB8fFxyXG5cdFx0XHRcdFx0bGluZUNsYXNzZXMuY29udGFpbnModGhpcy5URVJNX0NMQVNTKSlcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHJcblx0XHRcdFx0Ly8gRmluYWxseSwgYXMgYWxsIGNyaXRlcmlhIGhhdmUgYmVlbiBtZXQsIHdlIGdldCB0byB3b3JrXHJcblx0XHRcdFx0Y29uc3QgbmV3RGVjb3JhdGlvbnMgPVxyXG5cdFx0XHRcdFx0Y3VycmVudExpbmUudGV4dC5zdGFydHNXaXRoKHRoaXMuTUFSS0VSKVxyXG5cdFx0XHRcdFx0XHQ/IFtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLkRFRl9ERUMucmFuZ2UoY3VycmVudExpbmUuZnJvbSksIC8vIGxpbmVkZWMgYW5jaG9yZWQgb24gc3RhcnRcclxuXHRcdFx0XHRcdFx0XHR0aGlzLk1BUktFUl9ERUMucmFuZ2UoY3VycmVudExpbmUuZnJvbSwgY3VycmVudExpbmUuZnJvbSs0KVxyXG5cdFx0XHRcdFx0XHRdIDogW1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMuVEVSTV9ERUMucmFuZ2UoY3VycmVudExpbmUuZnJvbSlcclxuXHRcdFx0XHRcdFx0XTtcclxuXHRcdFx0XHR0aGlzLmRlY29yYXRpb25zID0gdGhpcy5kZWNvcmF0aW9ucy51cGRhdGUoe2FkZDogbmV3RGVjb3JhdGlvbnN9KTtcclxuXHRcdFx0XHRjb25zb2xlLmRlYnVnKHRoaXMuZGVjb3JhdGlvbnMuc2l6ZSwgJ2RlY29yYXRpb25zJyk7XHJcblx0XHRcdFx0LyogdGhlIGFyZ3VtZW50IGZvciAudXBkYXRlIGlzIG9mIGNsYXNzIFJhbmdlU2V0VXBkYXRlPERlY29yYXRpb24+LFxyXG5cdFx0XHRcdCogYW5kIFJhbmdlU2V0VXBkYXRlIGlzIGEgdHlwZWRlZiBvZiBhbiBPYmplY3Qgd2l0aCBvcHRpb25hbFxyXG5cdFx0XHRcdCogcHJvcGVydHkgLmFkZCBvZiBjbGFzcyByZWFkb25seSBSYW5nZTxEZWNvcmF0aW9uPjsgdGhhdCBpbiB0dXJuIGhhc1xyXG5cdFx0XHRcdCogaW5zdGFuY2UgcHJvcGVydGllcyBmcm9tLCB0bywgYW5kIHRoZSBEZWNvcmF0aW9uLlxyXG5cdFx0XHRcdCogWW91IGNhbiBjcmVhdGUgYSBSYW5nZTxEZWNvcmF0aW9uPiBieSBjcmVhdGluZyBhIERlY29yYXRpb24gYW5kXHJcblx0XHRcdFx0KiBhcHBseWluZyBpdHMgLnJhbmdlIG1ldGhvZCAoaW5oZXJpdGVkIGZyb20gaXRzIHN1cGVyY2xhc3MgUmFuZ2VWYWx1ZSkuXHJcblx0XHRcdFx0KiBOb3RlIHRoYXQgLnVwZGF0ZSBkb2Vzbid0IG1vZGlmeSB0aGUgaW5zdGFuY2UgYnV0IHJldHVybnMgaXQuICovXHJcblx0XHRcdH1cclxuXHRcdFx0Ly8gZWxzZSBpZiAodXBkYXRlLnZpZXdwb3J0Q2hhbmdlZCkgY29uc29sZS5sb2coJ3ZpZXdwb3J0IGNoYW5nZWQnKTtcclxuXHRcdFx0Ly8gZWxzZSBpZiAodXBkYXRlLmdlb21ldHJ5Q2hhbmdlZCkgY29uc29sZS5sb2coJ2dlb21ldHJ5IGNoYW5nZWQnKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cdHtcclxuXHRcdGRlY29yYXRpb25zOiB2ID0+IHYuZGVjb3JhdGlvbnMsXHJcblx0fVxyXG4pO1xyXG5cclxuLyogMy4gVGhlIE1hcmtkb3duUG9zdFByb2Nlc3NvciB0aGF0IHByZXBhcmVzIFJlYWRpbmcgVmlldyBhbmQgUERGIGV4cG9ydC4gKi9cclxuY29uc3QgcG9zdFByb2Nlc3NEZWZpbml0aW9uTGlzdHM6IE1hcmtkb3duUG9zdFByb2Nlc3NvciA9IGZ1bmN0aW9uKGVsZW1lbnQsIGNvbnRleHQpOiBQcm9taXNlPG51bGw+fHVuZGVmaW5lZCB7XHJcblx0LyogVGhpcyBwb3N0LXByb2Nlc3NvciBpcyBjYWxsZWRcclxuICAgICAqICAtIHdoZW4gdGhlIGRvY3VtZW50IGZpcnN0IGVudGVycyBSZWFkaW5nIHZpZXc6IG9uIGV2ZXJ5IGNoaWxkLWRpdiBvZiBwYWdlIGRpdlxyXG4gICAgICogIC0gd2hlbiBzd2l0Y2hpbmcgdG8gUmVhZGluZyB2aWV3OiBvbmNlIHBlciBkaXYgdGhhdCBoYXMgY2hhbmdlZFxyXG4gICAgICogIC0gd2hlbiBleHBvcnRpbmcgdG8gUERGOiBvbiB0aGUgd2hvbGUgcGFnZSBkaXZcclxuICAgICAqL1xyXG5cdC8qIEluIGRpcmVjdCBkZXNjZW5kYW50cyBvZiB0eXBlIHBhcmFncmFwaCwgbG9vayBmb3IgZGVmaW5pdGlvbiBsaXN0cy5cclxuICAgICAqIFJldHVybiBhcyBzb29uIGFzIHBvc3NpYmxlLiAgKi9cclxuXHRjb25zdCBwYXJhZ3JhcGhzID0gZWxlbWVudC5maW5kQWxsKCc6c2NvcGUgPiBwLCA6c2NvcGUgPiBkaXYgPiBwJyk7XHJcblx0bGV0IG5vdGhpbmdUb0RvID0gdHJ1ZTtcclxuXHRmb3IgKGxldCBwYXIgb2YgcGFyYWdyYXBocylcclxuXHRcdGlmIChwYXIuaW5uZXJIVE1MLmluY2x1ZGVzKCc8YnI+XFxuOiAgICcpKSB7XHJcblx0XHRcdG5vdGhpbmdUb0RvID0gZmFsc2U7XHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0fVxyXG5cdGlmIChub3RoaW5nVG9EbykgcmV0dXJuO1xyXG5cclxuXHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc3VsdENhbGxiYWNrOiAodjogYW55KSA9PiB2b2lkLCBlcnJvckNhbGxiYWNrKSA9PiB7XHJcblx0XHQvLyBUT0RPOiBzb21lIGVycm9yIGNoZWNraW5nXHJcblx0XHRwYXJhZ3JhcGhzLmZvckVhY2gocGFyID0+IHtcclxuXHRcdFx0aWYgKCFwYXIuaW5uZXJIVE1MLmluY2x1ZGVzKCc8YnI+XFxuOiAgICcpKSByZXR1cm47XHJcblxyXG5cdFx0XHQvLyBjcmVhdGUgdGhlIDxkbD4gZWxlbWVudCB0aGF0IGlzIHRvIHJlcGxhY2UgdGhlIHBhcmFncmFwaCBlbGVtZW50XHJcblx0XHRcdGNvbnN0IGRlZkxpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkbCcpO1xyXG5cdFx0XHRsZXQgc3RhcnRPZkxpbmU6IGJvb2xlYW4gPSB0cnVlO1xyXG5cdFx0XHRsZXQgaXRlbUVsZW1lbnQ6IEhUTUxFbGVtZW50O1xyXG5cclxuXHRcdFx0Ly8gZmlsbCB0aGUgbmV3IDxkbD4gd2l0aCBjbG9uZXMgb2YgdGhlIG5vZGVzIGluIHRoZSBvcmlnaW5hbCA8cD5cclxuXHRcdFx0cGFyLmNoaWxkTm9kZXMuZm9yRWFjaChub2RlID0+IHtcclxuXHRcdFx0XHRpZiAoJ3RhZ05hbWUnIGluIG5vZGUgJiYgbm9kZS50YWdOYW1lID09PSBcIkJSXCIpIHtcclxuXHRcdFx0XHRcdHN0YXJ0T2ZMaW5lID0gdHJ1ZTtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Y29uc3QgY2xvbmUgPSBub2RlLmNsb25lTm9kZSh0cnVlKTtcclxuXHRcdFx0XHRpZiAoc3RhcnRPZkxpbmUpIHtcclxuXHRcdFx0XHRcdGNvbnN0IG1hdGNoRGVmID0gbm9kZS50ZXh0Q29udGVudC5tYXRjaChkZWZpbml0aW9uTWFya2VyKTtcclxuXHRcdFx0XHRcdGlmIChtYXRjaERlZikge1xyXG5cdFx0XHRcdFx0XHRpdGVtRWxlbWVudCA9IGRlZkxpc3QuY3JlYXRlRWwoJ2RkJyk7XHJcblx0XHRcdFx0XHRcdGNsb25lLnRleHRDb250ZW50ID0gbm9kZS50ZXh0Q29udGVudC5zbGljZShtYXRjaERlZlswXS5sZW5ndGgpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRcdGl0ZW1FbGVtZW50ID0gZGVmTGlzdC5jcmVhdGVFbCgnZHQnKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHN0YXJ0T2ZMaW5lID0gZmFsc2U7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGl0ZW1FbGVtZW50LmFwcGVuZChjbG9uZSk7XHJcblx0XHRcdH0pXHJcblxyXG5cdFx0XHQvLyBwdXQgdGhlIDxkbD4gaW4gcGxhY2Ugb2YgdGhlIDxwPlxyXG5cdFx0XHRwYXIucmVwbGFjZVdpdGgoZGVmTGlzdCk7XHJcblx0XHR9KVxyXG5cdFx0cmVzdWx0Q2FsbGJhY2sobnVsbCk7XHJcblx0fSlcclxufVxyXG5cclxuLyogNC4gVGhlIFBsdWdpblNldHRpbmdUYWIgZm9yIHRoaXMgcGx1Z2luJ3Mgc2V0dGluZ3MuICovXHJcbmNsYXNzIERlZmluaXRpb25MaXN0U2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xyXG5cdHByaXZhdGUgcmVhZG9ubHkgbmFtZTogc3RyaW5nO1xyXG5cdHByaXZhdGUgcmVhZG9ubHkgc2V0dGluZ3M6IERlZmluaXRpb25MaXN0UGx1Z2luU2V0dGluZ3M7XHJcblx0cHJpdmF0ZSByZWFkb25seSBjc3NFbGVtZW50OiBIVE1MU3R5bGVFbGVtZW50O1xyXG5cdHByaXZhdGUgcmVhZG9ubHkgc2F2ZUNoYW5nZXM6IChkYXRhOiBhbnkpID0+IFByb21pc2U8dm9pZD47XHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogRGVmaW5pdGlvbkxpc3RQbHVnaW4pIHtcclxuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcclxuXHRcdHRoaXMubmFtZSA9IHBsdWdpbi5tYW5pZmVzdC5uYW1lO1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IHBsdWdpbi5zZXR0aW5ncztcclxuXHRcdHRoaXMuY3NzRWxlbWVudCA9IHBsdWdpbi5jc3NFbGVtZW50O1xyXG5cdFx0dGhpcy5zYXZlQ2hhbmdlcyA9IHBsdWdpbi5zYXZlRGF0YS5iaW5kKHBsdWdpbik7XHJcblx0fVxyXG5cclxuXHRkaXNwbGF5KCk6IHZvaWQge1xyXG5cdFx0Y29uc3Qge2NvbnRhaW5lckVsfSA9IHRoaXM7XHJcblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xyXG5cclxuXHRcdGNvbnN0IHByZXZpZXdTdHlsZSA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdzdHlsZScsIHt0ZXh0OiBgXHJcblx0XHRcdC5leGFtcGxlIHtcclxuXHRcdFx0XHRtYXJnaW4tdG9wOiAxMHB4O1xyXG5cdFx0XHRcdGhlaWdodDogYXV0bztcclxuXHRcdFx0XHRwYWRkaW5nOiA0cHg7XHJcblx0XHRcdFx0YmFja2dyb3VuZC1jb2xvcjogcmdiYSgxNTAsIDE1MCwgMTUwLCAwLjEpO1xyXG5cdFx0XHR9XHJcblx0XHRcdC5leGFtcGxlID4gZGwge1xyXG5cdFx0XHRcdG1hcmdpbi1ibG9jazogMDtcclxuXHRcdFx0fVxyXG5cdFx0YH0pXHJcblx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7dGV4dDogdGhpcy5uYW1lfSk7XHJcblxyXG5cdFx0Ly8gVGhlIFNldHRpbmdzIGl0ZW1zXHJcblx0XHRsZXQgY29sb3JTZXR0OiBDb2xvckNvbXBvbmVudDtcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnQ29sb3Igb2YgVGVybXMnKVxyXG5cdFx0XHQuc2V0RGVzYygnVGVybXMgaW4gYSBkZWZpbml0aW9uIGxpc3QgYXJlIGRpc3BsYXllZCBib2xkLCBpbiB0aGlzIGNvbG9yJylcclxuXHRcdFx0LmFkZENvbG9yUGlja2VyKGNwID0+IHtcclxuXHRcdFx0XHRjcC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzLmR0Y29sb3IpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UobmV3Q29sb3IgPT4ge1xyXG5cdFx0XHRcdFx0XHRjb25zb2xlLmRlYnVnKCdjb2xvciBzZXQgdG8nLCBuZXdDb2xvcik7XHJcblx0XHRcdFx0XHRcdHRoaXMuc2V0dGluZ3MuZHRjb2xvciA9IG5ld0NvbG9yO1xyXG5cdFx0XHRcdFx0XHR0aGlzLmNzc0VsZW1lbnQuc2hlZXQuaW5zZXJ0UnVsZShgOnJvb3Qge1xyXG5cdFx0XHRcdFx0XHRcdC0tZHRjb2xvcjogJHtuZXdDb2xvcn07XHJcblx0XHRcdFx0XHRcdH1gLCB0aGlzLmNzc0VsZW1lbnQuc2hlZXQuY3NzUnVsZXMubGVuZ3RoKTtcclxuXHRcdFx0XHRcdFx0dGhpcy5zYXZlQ2hhbmdlcyh0aGlzLnNldHRpbmdzKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdGNvbG9yU2V0dCA9IGNwO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0KTtcclxuXHRcdGxldCBpbmRlbnRTZXR0OiBTbGlkZXJDb21wb25lbnQ7XHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ0luZGVudGF0aW9uIG9mIERlZmluaXRpb25zJylcclxuXHRcdFx0LnNldERlc2MoJ0RlZmluaXRpb25zIGluIGEgZGVmaW5pdGlvbiBsaXN0IGFyZSBpbmRlbnRlZCBieSB0aGlzIG51bWJlciBvZiBwaXhlbHMnKVxyXG5cdFx0XHQuYWRkU2xpZGVyKHNsID0+IHtcclxuXHRcdFx0XHRzbC5zZXRMaW1pdHMoMCwgNTAsIDEpXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5zZXR0aW5ncy5kZGluZGVudGF0aW9uKVxyXG5cdFx0XHRcdFx0LnNldER5bmFtaWNUb29sdGlwKClcclxuXHRcdFx0XHRcdC5vbkNoYW5nZSh2YWx1ZSA9PiB7XHJcblx0XHRcdFx0XHRcdGNvbnNvbGUuZGVidWcoJ2luZGVudGF0aW9uIHNldCB0bycsIHZhbHVlLCAncHgnKTtcclxuXHRcdFx0XHRcdFx0dGhpcy5zZXR0aW5ncy5kZGluZGVudGF0aW9uID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdHRoaXMuY3NzRWxlbWVudC5zaGVldC5pbnNlcnRSdWxlKGA6cm9vdCB7XHJcblx0XHRcdFx0XHRcdFx0LS1kZGluZGVudGF0aW9uOiAke3ZhbHVlfXB4O1xyXG5cdFx0XHRcdFx0XHR9YCwgdGhpcy5jc3NFbGVtZW50LnNoZWV0LmNzc1J1bGVzLmxlbmd0aCk7XHJcblx0XHRcdFx0XHRcdHRoaXMuc2F2ZUNoYW5nZXModGhpcy5zZXR0aW5ncykudGhlbihjb25zb2xlLmRlYnVnKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdGluZGVudFNldHQgPSBzbDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdCk7XHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LmFkZEJ1dHRvbihidCA9PiBidC5zZXRCdXR0b25UZXh0KCdSZXNldCcpXHJcblx0XHRcdFx0LnNldFRvb2x0aXAoJ0NvbG9yOiBkYXJrIGJsdWUsICM1NTU1NzdcXG5JbmRlbnRhdGlvbjogMzAgcGl4ZWxzJylcclxuXHRcdFx0XHQub25DbGljayhldnQgPT4ge1xyXG5cdFx0XHRcdFx0Y29sb3JTZXR0LnNldFZhbHVlKGRlZmF1bHRTZXR0aW5ncy5kdGNvbG9yKTtcclxuXHRcdFx0XHRcdGluZGVudFNldHQuc2V0VmFsdWUoZGVmYXVsdFNldHRpbmdzLmRkaW5kZW50YXRpb24pO1xyXG5cdFx0XHRcdH0pXHJcblx0XHRcdCk7XHJcblxyXG5cdFx0Ly8gVGhlIHByZXZpZXcgdGhhdCBzaG93cyBob3cgdGhlIHNldHRpbmdzIHdvcmsgb3V0XHJcblx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgnZGl2Jywge2NsczogJ3NldHRpbmctaXRlbS1uYW1lJywgdGV4dDogJ1ByZXZpZXcnfSk7XHJcblx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgnZGl2Jywge2NsczogJ2V4YW1wbGUgbWFya2Rvd24tcHJldmlldy12aWV3J30pXHJcblx0XHQuaW5uZXJIVE1MID0gYFxyXG5cdFx0XHQ8ZGw+XHJcblx0XHRcdDxkdD5kZWZpbml0aW9uIGxpc3Q8L2R0PlxyXG5cdFx0XHQ8ZGQ+YSBsaXN0IG9mIHBhaXJzIDxpPih0ZXJtLCBkZWZpbml0aW9uKTwvaT4gd2hlcmUgZWFjaFxyXG5cdFx0XHR0ZXJtIGlzIG9uIGl0cyBvd24gbGluZSBhbmQgaXRzIGRlZmluaXRpb24gaXMgb24gdGhlIGxpbmUocykgYmVsb3cuXHJcblx0XHRcdFRoZSBkZWZpbml0aW9uIGlzIHVzdWFsbHkgaW5kZW50ZWQgdG8gc2V0IGl0IGFwYXJ0IGZyb20gdGhlIHRlcm08L2RkPlxyXG5cdFx0XHQ8ZHQ+aW5kZW50YXRpb248L2R0PlxyXG5cdFx0XHQ8ZGQ+d2hlbiBhIGxpbmUgb3IgcGFyYWdyYXBoIHN0YXJ0cyBhdCBhIGRpc3RhbmNlIGZyb20gdGhlIGxlZnQgbWFyZ2luPC9kZD5cclxuXHRcdFx0PC9kbD5cclxuXHRcdGA7XHJcblx0fVxyXG59XHJcbiJdLCJuYW1lcyI6WyJQbHVnaW4iLCJWaWV3UGx1Z2luIiwidmlldyIsIkRlY29yYXRpb24iLCJTZXR0aW5nIiwiUGx1Z2luU2V0dGluZ1RhYiJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksYUFBYSxHQUFHLFNBQVMsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUNuQyxJQUFJLGFBQWEsR0FBRyxNQUFNLENBQUMsY0FBYztBQUN6QyxTQUFTLEVBQUUsU0FBUyxFQUFFLEVBQUUsRUFBRSxZQUFZLEtBQUssSUFBSSxVQUFVLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsU0FBUyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUM7QUFDcEYsUUFBUSxVQUFVLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxLQUFLLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxJQUFJLE1BQU0sQ0FBQyxTQUFTLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7QUFDMUcsSUFBSSxPQUFPLGFBQWEsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDL0IsQ0FBQyxDQUFDO0FBQ0Y7QUFDTyxTQUFTLFNBQVMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQ2hDLElBQUksSUFBSSxPQUFPLENBQUMsS0FBSyxVQUFVLElBQUksQ0FBQyxLQUFLLElBQUk7QUFDN0MsUUFBUSxNQUFNLElBQUksU0FBUyxDQUFDLHNCQUFzQixHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRywrQkFBK0IsQ0FBQyxDQUFDO0FBQ2xHLElBQUksYUFBYSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUN4QixJQUFJLFNBQVMsRUFBRSxHQUFHLEVBQUUsSUFBSSxDQUFDLFdBQVcsR0FBRyxDQUFDLENBQUMsRUFBRTtBQUMzQyxJQUFJLENBQUMsQ0FBQyxTQUFTLEdBQUcsQ0FBQyxLQUFLLElBQUksR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxTQUFTLEdBQUcsQ0FBQyxDQUFDLFNBQVMsRUFBRSxJQUFJLEVBQUUsRUFBRSxDQUFDLENBQUM7QUFDekYsQ0FBQztBQW9GRDtBQUNPLFNBQVMsU0FBUyxDQUFDLE9BQU8sRUFBRSxVQUFVLEVBQUUsQ0FBQyxFQUFFLFNBQVMsRUFBRTtBQUM3RCxJQUFJLFNBQVMsS0FBSyxDQUFDLEtBQUssRUFBRSxFQUFFLE9BQU8sS0FBSyxZQUFZLENBQUMsR0FBRyxLQUFLLEdBQUcsSUFBSSxDQUFDLENBQUMsVUFBVSxPQUFPLEVBQUUsRUFBRSxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRTtBQUNoSCxJQUFJLE9BQU8sS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLE9BQU8sQ0FBQyxFQUFFLFVBQVUsT0FBTyxFQUFFLE1BQU0sRUFBRTtBQUMvRCxRQUFRLFNBQVMsU0FBUyxDQUFDLEtBQUssRUFBRSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsRUFBRSxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUU7QUFDbkcsUUFBUSxTQUFTLFFBQVEsQ0FBQyxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsRUFBRSxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUU7QUFDdEcsUUFBUSxTQUFTLElBQUksQ0FBQyxNQUFNLEVBQUUsRUFBRSxNQUFNLENBQUMsSUFBSSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLFFBQVEsQ0FBQyxDQUFDLEVBQUU7QUFDdEgsUUFBUSxJQUFJLENBQUMsQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsVUFBVSxJQUFJLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7QUFDOUUsS0FBSyxDQUFDLENBQUM7QUFDUCxDQUFDO0FBQ0Q7QUFDTyxTQUFTLFdBQVcsQ0FBQyxPQUFPLEVBQUUsSUFBSSxFQUFFO0FBQzNDLElBQUksSUFBSSxDQUFDLEdBQUcsRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxXQUFXLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsT0FBTyxRQUFRLEtBQUssVUFBVSxHQUFHLFFBQVEsR0FBRyxNQUFNLEVBQUUsU0FBUyxDQUFDLENBQUM7QUFDck0sSUFBSSxPQUFPLENBQUMsQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxPQUFPLE1BQU0sS0FBSyxVQUFVLEtBQUssQ0FBQyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsR0FBRyxXQUFXLEVBQUUsT0FBTyxJQUFJLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQ2hLLElBQUksU0FBUyxJQUFJLENBQUMsQ0FBQyxFQUFFLEVBQUUsT0FBTyxVQUFVLENBQUMsRUFBRSxFQUFFLE9BQU8sSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFDdEUsSUFBSSxTQUFTLElBQUksQ0FBQyxFQUFFLEVBQUU7QUFDdEIsUUFBUSxJQUFJLENBQUMsRUFBRSxNQUFNLElBQUksU0FBUyxDQUFDLGlDQUFpQyxDQUFDLENBQUM7QUFDdEUsUUFBUSxPQUFPLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsSUFBSTtBQUN0RCxZQUFZLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQ3pLLFlBQVksSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMs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
