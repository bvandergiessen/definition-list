'use strict';

var obsidian = require('obsidian');
var view = require('@codemirror/view');

/******************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */

function __awaiter(thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
}

typeof SuppressedError === "function" ? SuppressedError : function (error, suppressed, message) {
    var e = new Error(message);
    return e.name = "SuppressedError", e.error = error, e.suppressed = suppressed, e;
};

const defaultSettings = {
    dtcolor: '#555577',
    dtbold: true,
    dtitalic: false,
    ddindentation: 30
};
const definitionMarker = /(?:^|\n): {3}/;
const MARKER = ':   ';
/* 1. The main class, instantiated by Obsidian when the plugin loads */
class DefinitionListPlugin extends obsidian.Plugin {
    constructor() {
        super(...arguments);
        this.cssElement = document.createElement('style');
    }
    onload() {
        return __awaiter(this, void 0, void 0, function* () {
            console.log(`Loading plugin ${this.manifest.name} v${this.manifest.version}`);
            this.settings = Object.assign({}, defaultSettings, yield this.loadData());
            this.cssElement.textContent = `:root {
			--dtcolor: ${this.settings.dtcolor};
			--dtweight: ${this.settings.dtbold ? 'bold' : 'inherit'};
			--dtstyle: ${this.settings.dtitalic ? 'italic' : 'inherit'};
			--ddindentation: ${this.settings.ddindentation}px;	
		}`;
            document.head.appendChild(this.cssElement);
            this.registerEditorExtension(liveUpdateDefinitionLists);
            this.registerMarkdownPostProcessor(postProcessDefinitionLists, 99);
            this.addSettingTab(new DefinitionListSettingTab(this.app, this));
        });
    }
    onunload() {
        console.log(`Unloading plugin ${this.manifest.name}`);
        if (this.cssElement)
            this.cssElement.remove();
    }
}
/* 2. The ViewPlugin that works in Edit Mode. */
const liveUpdateDefinitionLists = view.ViewPlugin.fromClass(
/* The ViewPlugin class is generic: it requires an underlying type, a subclass of
 * the PluginValue class. That is to be the first argument passed into the class
 * method .fromClass() which returns a ViewPlugin instance with that underlying
 * type. The second argument of that class method, to give additional details,
 * is a PluginSpec instance with the same underlying type. It has zero or more
 * of the properties eventHandlers, eventObservers, provide, and decorations.
 * The latter is a function that, when passed an instance of the underlying
 * class, returns a DecorationSet - in this case the function simply returns
 * the .decorations instance property. */
class {
    constructor(view$1) {
        this.TERM_CLASS = 'view-dt';
        this.DEF_CLASS = 'view-dd';
        this.MARKER_CLASS = 'view-dd-marker';
        this.TERM_DEC = view.Decoration.line({ class: this.TERM_CLASS });
        this.DEF_DEC = view.Decoration.line({ class: this.DEF_CLASS });
        this.MARKER_DEC = view.Decoration.mark({ class: this.MARKER_CLASS });
        this.never_updated = true;
        this.decorations = view.Decoration.none;
        console.debug(`live updater for ${view$1.state.doc.line(1).text} started`);
    }
    /* this.decorations type, DecorationSet, is a RangeSet of items of the underlying
     * type Decoration. Such a RangeSet object has properties and methods
     * .size (number of elements); .iter() with optional arg from, an offset that
     * lies in or before the first to be iterated; .update(RangeSetUpdate) to add
     * or remove them (returns the new version); .between(from, to, func) run func
     * on every Decoration between the offsets from and to; .map(ChangeDesc). */
    /* the boolean VieuwUpdate properties that may be useful:
     *  .viewportChanged: viewport or visible ranges have changed
     *  .geometryChanged: editor size or the document itself changed
     *  .focusChanged: maybe some switch to another document, panel etc.;
     *  change in View between Editing and Rendering view; but
     *  when the document/Editing is activated, .geometryChanged is also true.
     * One change from Reading to Editing view triggered at one time:
     * viewportChanged, viewportMoved, heightChanged, geometryChanged; then
     * heightChanged, geometryChanged; then focusChanged; then heightChanged
     * and geometryChanged twice. Either we only use focus and viewport or
     * we debounce certain events.
     * Launching Obsidian with a document open: lots and lots; viewportChanged once.
     * Switching to an open doc for the first time after restart: instantiates
     * this class => use the constructor for this
     */
    update(update) {
        var _a;
        console.debug(Date());
        for (let i of ['viewportChanged', 'viewportMoved', 'heightChanged',
            'geometryChanged', 'focusChanged', 'docChanged', 'selectionSet']) {
            if (update[i])
                console.debug(i);
        }
        update.changes.iterChanges(console.debug, true);
        /* viewportChanged means the whole DecorationSet must be completely
         * re-done from scratch, so if that event is part of the update,
         * only do that. Also, the first time Edit View is active. */
        if (update.viewportChanged ||
            (this.never_updated && update.view.contentDOM.isShown())) {
            const docText = update.state.doc;
            const newDecorations = [];
            for (let range of update.view.visibleRanges) {
                // multiple ranges are always in document order, but the border
                // between them may fall within a line
                console.debug(range);
                let previousLine = null;
                for (let lnr = docText.lineAt(range.from).number; lnr <= docText.lineAt(range.to).number; lnr++) {
                    const line = docText.line(lnr);
                    // if the current line is a definition
                    if (line.text.startsWith(MARKER)) {
                        // a line may occur in more than one of the ranges; add it once
                        if (((_a = newDecorations.last()) === null || _a === void 0 ? void 0 : _a.from) == line.from)
                            continue;
                        if ((previousLine === null || previousLine === void 0 ? void 0 : previousLine.length) && !previousLine.text.startsWith(MARKER))
                            newDecorations.push(this.TERM_DEC.range(previousLine.from));
                        // FIXME: if previous line is e.g. a list, this fails
                        newDecorations.push(this.DEF_DEC.range(line.from), // linedec anchored on start
                        this.MARKER_DEC.range(line.from, line.from + 4));
                    }
                    previousLine = line; // preserve the line for the next round
                }
            }
            console.debug(newDecorations);
            this.decorations = view.Decoration.none.update({ add: newDecorations });
            this.never_updated = false;
            return;
        }
        /* docChanged is usually simple: the .map method updates all offsets
         * beyond the insertion or deletion. But it gets complicated when the
         * edit happens inside a marker, or when the line suddenly has one. */
        if (update.docChanged) {
            // Map the existing decorations through the changes
            this.decorations = this.decorations.map(update.changes);
            // TODO: code for when a marker is added or destroyed
        }
        console.debug('---------------');
        // else if (update.geometryChanged) console.log('geometry changed');
    }
}, {
    decorations: v => v.decorations,
});
/* 3. The MarkdownPostProcessor that prepares Reading View and PDF export. */
const postProcessDefinitionLists = function (element, context) {
    /* This post-processor is called
     *  - when the document first enters Reading view: on every child-div of page div
     *  - when switching to Reading view: once per div that has changed
     *  - when exporting to PDF: on the whole page div */
    // console.debug(element.outerHTML);
    /* In Reading View, the element passed in IS a single <div>;
     * in PDF output, it is the PARENT ELEMENT of all the <div>s.
     * First check if the element has class 'el-p' (Reading-view paragraph)
     * or 'markdown-rendered' (PDF-output root element).
     * If neither, return immediately.  */
    if (!element.classList.contains('el-p') &&
        !element.classList.contains('el-ul') &&
        !element.classList.contains('el-ol') &&
        !element.classList.contains('markdown-rendered'))
        return;
    // it's one paragraph (in Reading View), or the whole document (PDF)
    let preChecked = false;
    if (element.classList.contains('el-p')) { // Reading View paragraph
        if (!element.firstElementChild.innerHTML.match(definitionMarker))
            return;
        // console.debug('Now we will create the modified paragraph:');
        // console.debug(element.textContent);
        preChecked = true;
    }
    if (element.classList.contains('el-ul') || element.classList.contains('el-ol')) { // list. Is there a <dd> at the end?
        if (!element.firstElementChild.lastElementChild.innerHTML.contains('\n'))
            return;
        const originalHTML = element.firstElementChild.lastElementChild
            .innerHTML;
        const newlinePos = originalHTML.indexOf('\n');
        element.firstElementChild.lastElementChild.innerHTML =
            originalHTML.slice(0, newlinePos);
        element.appendChild(document.createElement('p')).innerHTML =
            originalHTML.slice(newlinePos + 1);
        preChecked = true;
    }
    /* This Promise gets no content; the only use of its fulfillment
     * is to signal to the receiving process that we're done
     * editing its DOM */
    return new Promise((resultCallback) => {
        let paragraphs;
        if (preChecked)
            paragraphs = [element.lastElementChild];
        else
            paragraphs = element.findAll(':scope > div > p');
        paragraphs.forEach((par) => {
            if (!preChecked && !par.innerHTML.match(definitionMarker))
                return;
            // create the <dl> element that is to replace the paragraph element
            const defList = document.createElement('dl');
            let startOfLine = true;
            let itemElement;
            // fill the new <dl> with clones of the nodes in the original <p>
            par.childNodes.forEach(node => {
                if ('tagName' in node && node.tagName === "BR") {
                    startOfLine = true;
                    return;
                }
                const clone = node.cloneNode(true);
                if (startOfLine) {
                    if (node.textContent.match(definitionMarker)) {
                        itemElement = defList.createEl('dd');
                        clone.textContent = node.textContent.slice(4);
                    }
                    else if (node.textContent.length <= 100) {
                        // a term can't reasonably be longer than 100 chars
                        itemElement = defList.createEl('dt');
                    }
                    else {
                        itemElement = defList.createEl('p');
                    }
                    startOfLine = false;
                }
                itemElement.append(clone);
            });
            // put the <dl> in place of the <p>
            par.replaceWith(defList);
        });
        resultCallback(null);
    });
};
/* 4. The PluginSettingTab for this plugin's settings. */
class DefinitionListSettingTab extends obsidian.PluginSettingTab {
    constructor(app, plugin) {
        super(app, plugin);
        this.name = plugin.manifest.name;
        this.settings = plugin.settings;
        this.cssElement = plugin.cssElement;
        this.saveChanges = plugin.saveData.bind(plugin);
    }
    display() {
        const { containerEl } = this;
        containerEl.empty();
        containerEl.createEl('style', { text: `
			.mod-toggle {
				border-top: none;
			}
			.example {
				margin-top: 10px;
				height: auto;
				padding: 4px;
				background-color: rgba(150, 150, 150, 0.1);
			}
			.example > dl {
				margin-block: 0;
			}
		` });
        containerEl.createEl('h2', { text: this.name });
        // The Settings items
        let colorSett;
        new obsidian.Setting(containerEl)
            .setName('Terms')
            .setDesc('Font color')
            .addColorPicker(cp => {
            cp.setValue(this.settings.dtcolor)
                .onChange(newColor => {
                console.debug('color set to', newColor);
                this.settings.dtcolor = newColor;
                this.cssElement.sheet.insertRule(`:root {
							--dtcolor: ${newColor};
						}`, this.cssElement.sheet.cssRules.length);
                this.saveChanges(this.settings);
            });
            colorSett = cp;
        });
        let weightSett;
        new obsidian.Setting(containerEl)
            .setDesc('Bold font')
            .addToggle(tog => {
            tog.setValue(this.settings.dtbold)
                .onChange(newWeight => {
                console.debug('bold set to', newWeight);
                this.settings.dtbold = newWeight;
                this.cssElement.sheet.insertRule(`:root {
						--dtweight: ${newWeight ? 'bold' : 'inherit'}`, this.cssElement.sheet.cssRules.length);
                this.saveChanges(this.settings);
            });
            weightSett = tog;
        });
        let styleSett;
        new obsidian.Setting(containerEl)
            .setDesc('Italic font')
            .addToggle(tog => {
            tog.setValue(this.settings.dtitalic)
                .onChange(newStyle => {
                console.debug('italic set to', newStyle);
                this.settings.dtitalic = newStyle;
                this.cssElement.sheet.insertRule(`:root {
						--dtstyle: ${newStyle ? 'italic' : 'inherit'}`, this.cssElement.sheet.cssRules.length);
                this.saveChanges(this.settings);
            });
            styleSett = tog;
        });
        let indentSett;
        new obsidian.Setting(containerEl)
            .setName('Definitions')
            .setDesc('Indentation of the definitions')
            .addSlider(sl => {
            sl.setLimits(0, 50, 1)
                .setValue(this.settings.ddindentation)
                .setDynamicTooltip()
                .onChange(value => {
                console.debug('indentation set to', value, 'px');
                this.settings.ddindentation = value;
                this.cssElement.sheet.insertRule(`:root {
							--ddindentation: ${value}px;
						}`, this.cssElement.sheet.cssRules.length);
                this.saveChanges(this.settings);
            });
            indentSett = sl;
        });
        new obsidian.Setting(containerEl)
            .addButton(bt => bt.setButtonText('Reset to defaults')
            .setTooltip('Color: dark blue, #555577\nIndentation: 30 pixels')
            .onClick(evt => {
            colorSett.setValue(defaultSettings.dtcolor);
            weightSett.setValue(defaultSettings.dtbold);
            styleSett.setValue(defaultSettings.dtitalic);
            indentSett.setValue(defaultSettings.ddindentation);
        }));
        // The preview that shows how the settings work out
        containerEl.createEl('div', { cls: 'setting-item-name', text: 'Preview' });
        containerEl.createEl('div', { cls: 'example markdown-preview-view' })
            .innerHTML = `
			<dl>
			<dt>definition list</dt>
			<dd>a list of pairs <i>(term, definition)</i> where each
			term is on its own line and its definition is on the line(s) below.
			The definition is usually indented to set it apart from the term</dd>
			<dt>indentation</dt>
			<dd>when a line or paragraph starts at a distance from the left margin</dd>
			</dl>
		`;
    }
}

module.exports = DefinitionListPlugin;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsibm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsIm1haW4udHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cclxuXHJcblBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueVxyXG5wdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuXHJcblxyXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIXHJcblJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWVxyXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXHJcbklORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTVxyXG5MT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUlxyXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXHJcblBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlLCBTdXBwcmVzc2VkRXJyb3IsIFN5bWJvbCwgSXRlcmF0b3IgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcclxuICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXHJcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xyXG4gICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fYXNzaWduID0gZnVuY3Rpb24oKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH1cclxuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZXN0KHMsIGUpIHtcclxuICAgIHZhciB0ID0ge307XHJcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICB0W3BdID0gc1twXTtcclxuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmluZGV4T2YocFtpXSkgPCAwICYmIE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzLCBwW2ldKSlcclxuICAgICAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgICAgIH1cclxuICAgIHJldHVybiB0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcGFyYW0ocGFyYW1JbmRleCwgZGVjb3JhdG9yKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXNEZWNvcmF0ZShjdG9yLCBkZXNjcmlwdG9ySW4sIGRlY29yYXRvcnMsIGNvbnRleHRJbiwgaW5pdGlhbGl6ZXJzLCBleHRyYUluaXRpYWxpemVycykge1xyXG4gICAgZnVuY3Rpb24gYWNjZXB0KGYpIHsgaWYgKGYgIT09IHZvaWQgMCAmJiB0eXBlb2YgZiAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRnVuY3Rpb24gZXhwZWN0ZWRcIik7IHJldHVybiBmOyB9XHJcbiAgICB2YXIga2luZCA9IGNvbnRleHRJbi5raW5kLCBrZXkgPSBraW5kID09PSBcImdldHRlclwiID8gXCJnZXRcIiA6IGtpbmQgPT09IFwic2V0dGVyXCIgPyBcInNldFwiIDogXCJ2YWx1ZVwiO1xyXG4gICAgdmFyIHRhcmdldCA9ICFkZXNjcmlwdG9ySW4gJiYgY3RvciA/IGNvbnRleHRJbltcInN0YXRpY1wiXSA/IGN0b3IgOiBjdG9yLnByb3RvdHlwZSA6IG51bGw7XHJcbiAgICB2YXIgZGVzY3JpcHRvciA9IGRlc2NyaXB0b3JJbiB8fCAodGFyZ2V0ID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGNvbnRleHRJbi5uYW1lKSA6IHt9KTtcclxuICAgIHZhciBfLCBkb25lID0gZmFsc2U7XHJcbiAgICBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG4gICAgICAgIHZhciBjb250ZXh0ID0ge307XHJcbiAgICAgICAgZm9yICh2YXIgcCBpbiBjb250ZXh0SW4pIGNvbnRleHRbcF0gPSBwID09PSBcImFjY2Vzc1wiID8ge30gOiBjb250ZXh0SW5bcF07XHJcbiAgICAgICAgZm9yICh2YXIgcCBpbiBjb250ZXh0SW4uYWNjZXNzKSBjb250ZXh0LmFjY2Vzc1twXSA9IGNvbnRleHRJbi5hY2Nlc3NbcF07XHJcbiAgICAgICAgY29udGV4dC5hZGRJbml0aWFsaXplciA9IGZ1bmN0aW9uIChmKSB7IGlmIChkb25lKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGFkZCBpbml0aWFsaXplcnMgYWZ0ZXIgZGVjb3JhdGlvbiBoYXMgY29tcGxldGVkXCIpOyBleHRyYUluaXRpYWxpemVycy5wdXNoKGFjY2VwdChmIHx8IG51bGwpKTsgfTtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gKDAsIGRlY29yYXRvcnNbaV0pKGtpbmQgPT09IFwiYWNjZXNzb3JcIiA/IHsgZ2V0OiBkZXNjcmlwdG9yLmdldCwgc2V0OiBkZXNjcmlwdG9yLnNldCB9IDogZGVzY3JpcHRvcltrZXldLCBjb250ZXh0KTtcclxuICAgICAgICBpZiAoa2luZCA9PT0gXCJhY2Nlc3NvclwiKSB7XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IHZvaWQgMCkgY29udGludWU7XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IG51bGwgfHwgdHlwZW9mIHJlc3VsdCAhPT0gXCJvYmplY3RcIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIk9iamVjdCBleHBlY3RlZFwiKTtcclxuICAgICAgICAgICAgaWYgKF8gPSBhY2NlcHQocmVzdWx0LmdldCkpIGRlc2NyaXB0b3IuZ2V0ID0gXztcclxuICAgICAgICAgICAgaWYgKF8gPSBhY2NlcHQocmVzdWx0LnNldCkpIGRlc2NyaXB0b3Iuc2V0ID0gXztcclxuICAgICAgICAgICAgaWYgKF8gPSBhY2NlcHQocmVzdWx0LmluaXQpKSBpbml0aWFsaXplcnMudW5zaGlmdChfKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoXyA9IGFjY2VwdChyZXN1bHQpKSB7XHJcbiAgICAgICAgICAgIGlmIChraW5kID09PSBcImZpZWxkXCIpIGluaXRpYWxpemVycy51bnNoaWZ0KF8pO1xyXG4gICAgICAgICAgICBlbHNlIGRlc2NyaXB0b3Jba2V5XSA9IF87XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHRhcmdldCkgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgY29udGV4dEluLm5hbWUsIGRlc2NyaXB0b3IpO1xyXG4gICAgZG9uZSA9IHRydWU7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19ydW5Jbml0aWFsaXplcnModGhpc0FyZywgaW5pdGlhbGl6ZXJzLCB2YWx1ZSkge1xyXG4gICAgdmFyIHVzZVZhbHVlID0gYXJndW1lbnRzLmxlbmd0aCA+IDI7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGluaXRpYWxpemVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHZhbHVlID0gdXNlVmFsdWUgPyBpbml0aWFsaXplcnNbaV0uY2FsbCh0aGlzQXJnLCB2YWx1ZSkgOiBpbml0aWFsaXplcnNbaV0uY2FsbCh0aGlzQXJnKTtcclxuICAgIH1cclxuICAgIHJldHVybiB1c2VWYWx1ZSA/IHZhbHVlIDogdm9pZCAwO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcHJvcEtleSh4KSB7XHJcbiAgICByZXR1cm4gdHlwZW9mIHggPT09IFwic3ltYm9sXCIgPyB4IDogXCJcIi5jb25jYXQoeCk7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19zZXRGdW5jdGlvbk5hbWUoZiwgbmFtZSwgcHJlZml4KSB7XHJcbiAgICBpZiAodHlwZW9mIG5hbWUgPT09IFwic3ltYm9sXCIpIG5hbWUgPSBuYW1lLmRlc2NyaXB0aW9uID8gXCJbXCIuY29uY2F0KG5hbWUuZGVzY3JpcHRpb24sIFwiXVwiKSA6IFwiXCI7XHJcbiAgICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KGYsIFwibmFtZVwiLCB7IGNvbmZpZ3VyYWJsZTogdHJ1ZSwgdmFsdWU6IHByZWZpeCA/IFwiXCIuY29uY2F0KHByZWZpeCwgXCIgXCIsIG5hbWUpIDogbmFtZSB9KTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZ2VuZXJhdG9yKHRoaXNBcmcsIGJvZHkpIHtcclxuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGcgPSBPYmplY3QuY3JlYXRlKCh0eXBlb2YgSXRlcmF0b3IgPT09IFwiZnVuY3Rpb25cIiA/IEl0ZXJhdG9yIDogT2JqZWN0KS5wcm90b3R5cGUpO1xyXG4gICAgcmV0dXJuIGcubmV4dCA9IHZlcmIoMCksIGdbXCJ0aHJvd1wiXSA9IHZlcmIoMSksIGdbXCJyZXR1cm5cIl0gPSB2ZXJiKDIpLCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcclxuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XHJcbiAgICAgICAgd2hpbGUgKGcgJiYgKGcgPSAwLCBvcFswXSAmJiAoXyA9IDApKSwgXykgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xyXG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XHJcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxyXG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fY3JlYXRlQmluZGluZyA9IE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobSwgayk7XHJcbiAgICBpZiAoIWRlc2MgfHwgKFwiZ2V0XCIgaW4gZGVzYyA/ICFtLl9fZXNNb2R1bGUgOiBkZXNjLndyaXRhYmxlIHx8IGRlc2MuY29uZmlndXJhYmxlKSkge1xyXG4gICAgICAgIGRlc2MgPSB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH07XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIGRlc2MpO1xyXG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIG9bazJdID0gbVtrXTtcclxufSk7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHBvcnRTdGFyKG0sIG8pIHtcclxuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKHAgIT09IFwiZGVmYXVsdFwiICYmICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobywgcCkpIF9fY3JlYXRlQmluZGluZyhvLCBtLCBwKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fdmFsdWVzKG8pIHtcclxuICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7XHJcbiAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTtcclxuICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gXCJudW1iZXJcIikgcmV0dXJuIHtcclxuICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gXCJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLlwiIDogXCJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZWFkKG8sIG4pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcclxuICAgIGlmICghbSkgcmV0dXJuIG87XHJcbiAgICB2YXIgaSA9IG0uY2FsbChvKSwgciwgYXIgPSBbXSwgZTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHsgaWYgKGUpIHRocm93IGUuZXJyb3I7IH1cclxuICAgIH1cclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuLyoqIEBkZXByZWNhdGVkICovXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZCgpIHtcclxuICAgIGZvciAodmFyIGFyID0gW10sIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIGFyID0gYXIuY29uY2F0KF9fcmVhZChhcmd1bWVudHNbaV0pKTtcclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuLyoqIEBkZXByZWNhdGVkICovXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZEFycmF5cygpIHtcclxuICAgIGZvciAodmFyIHMgPSAwLCBpID0gMCwgaWwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgaWw7IGkrKykgcyArPSBhcmd1bWVudHNbaV0ubGVuZ3RoO1xyXG4gICAgZm9yICh2YXIgciA9IEFycmF5KHMpLCBrID0gMCwgaSA9IDA7IGkgPCBpbDsgaSsrKVxyXG4gICAgICAgIGZvciAodmFyIGEgPSBhcmd1bWVudHNbaV0sIGogPSAwLCBqbCA9IGEubGVuZ3RoOyBqIDwgamw7IGorKywgaysrKVxyXG4gICAgICAgICAgICByW2tdID0gYVtqXTtcclxuICAgIHJldHVybiByO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWRBcnJheSh0bywgZnJvbSwgcGFjaykge1xyXG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICBpZiAoYXIgfHwgIShpIGluIGZyb20pKSB7XHJcbiAgICAgICAgICAgIGlmICghYXIpIGFyID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSwgMCwgaSk7XHJcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXQodikge1xyXG4gICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBfX2F3YWl0ID8gKHRoaXMudiA9IHYsIHRoaXMpIDogbmV3IF9fYXdhaXQodik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jR2VuZXJhdG9yKHRoaXNBcmcsIF9hcmd1bWVudHMsIGdlbmVyYXRvcikge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBnID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pLCBpLCBxID0gW107XHJcbiAgICByZXR1cm4gaSA9IE9iamVjdC5jcmVhdGUoKHR5cGVvZiBBc3luY0l0ZXJhdG9yID09PSBcImZ1bmN0aW9uXCIgPyBBc3luY0l0ZXJhdG9yIDogT2JqZWN0KS5wcm90b3R5cGUpLCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIsIGF3YWl0UmV0dXJuKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gYXdhaXRSZXR1cm4oZikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh2KS50aGVuKGYsIHJlamVjdCk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpZiAoZ1tuXSkgeyBpW25dID0gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChhLCBiKSB7IHEucHVzaChbbiwgdiwgYSwgYl0pID4gMSB8fCByZXN1bWUobiwgdik7IH0pOyB9OyBpZiAoZikgaVtuXSA9IGYoaVtuXSk7IH0gfVxyXG4gICAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxyXG4gICAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyB9XHJcbiAgICBmdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7IHJlc3VtZShcIm5leHRcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jRGVsZWdhdG9yKG8pIHtcclxuICAgIHZhciBpLCBwO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiLCBmdW5jdGlvbiAoZSkgeyB0aHJvdyBlOyB9KSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpW25dID0gb1tuXSA/IGZ1bmN0aW9uICh2KSB7IHJldHVybiAocCA9ICFwKSA/IHsgdmFsdWU6IF9fYXdhaXQob1tuXSh2KSksIGRvbmU6IGZhbHNlIH0gOiBmID8gZih2KSA6IHY7IH0gOiBmOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jVmFsdWVzKG8pIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgbSA9IG9bU3ltYm9sLmFzeW5jSXRlcmF0b3JdLCBpO1xyXG4gICAgcmV0dXJuIG0gPyBtLmNhbGwobykgOiAobyA9IHR5cGVvZiBfX3ZhbHVlcyA9PT0gXCJmdW5jdGlvblwiID8gX192YWx1ZXMobykgOiBvW1N5bWJvbC5pdGVyYXRvcl0oKSwgaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGkpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlbbl0gPSBvW25dICYmIGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHYgPSBvW25dKHYpLCBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCB2LmRvbmUsIHYudmFsdWUpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgZCwgdikgeyBQcm9taXNlLnJlc29sdmUodikudGhlbihmdW5jdGlvbih2KSB7IHJlc29sdmUoeyB2YWx1ZTogdiwgZG9uZTogZCB9KTsgfSwgcmVqZWN0KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tYWtlVGVtcGxhdGVPYmplY3QoY29va2VkLCByYXcpIHtcclxuICAgIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvb2tlZCwgXCJyYXdcIiwgeyB2YWx1ZTogcmF3IH0pOyB9IGVsc2UgeyBjb29rZWQucmF3ID0gcmF3OyB9XHJcbiAgICByZXR1cm4gY29va2VkO1xyXG59O1xyXG5cclxudmFyIF9fc2V0TW9kdWxlRGVmYXVsdCA9IE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgdikge1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiZGVmYXVsdFwiLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2IH0pO1xyXG59KSA6IGZ1bmN0aW9uKG8sIHYpIHtcclxuICAgIG9bXCJkZWZhdWx0XCJdID0gdjtcclxufTtcclxuXHJcbnZhciBvd25LZXlzID0gZnVuY3Rpb24obykge1xyXG4gICAgb3duS2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzIHx8IGZ1bmN0aW9uIChvKSB7XHJcbiAgICAgICAgdmFyIGFyID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgayBpbiBvKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG8sIGspKSBhclthci5sZW5ndGhdID0gaztcclxuICAgICAgICByZXR1cm4gYXI7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIG93bktleXMobyk7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnRTdGFyKG1vZCkge1xyXG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcclxuICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayA9IG93bktleXMobW9kKSwgaSA9IDA7IGkgPCBrLmxlbmd0aDsgaSsrKSBpZiAoa1tpXSAhPT0gXCJkZWZhdWx0XCIpIF9fY3JlYXRlQmluZGluZyhyZXN1bHQsIG1vZCwga1tpXSk7XHJcbiAgICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0RGVmYXVsdChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgZGVmYXVsdDogbW9kIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHJlY2VpdmVyLCBzdGF0ZSwga2luZCwgZikge1xyXG4gICAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgZ2V0dGVyXCIpO1xyXG4gICAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgcmVhZCBwcml2YXRlIG1lbWJlciBmcm9tIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7XHJcbiAgICByZXR1cm4ga2luZCA9PT0gXCJtXCIgPyBmIDoga2luZCA9PT0gXCJhXCIgPyBmLmNhbGwocmVjZWl2ZXIpIDogZiA/IGYudmFsdWUgOiBzdGF0ZS5nZXQocmVjZWl2ZXIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZFNldChyZWNlaXZlciwgc3RhdGUsIHZhbHVlLCBraW5kLCBmKSB7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJtXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIG1ldGhvZCBpcyBub3Qgd3JpdGFibGVcIik7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJhXCIgJiYgIWYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBzZXR0ZXJcIik7XHJcbiAgICBpZiAodHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciAhPT0gc3RhdGUgfHwgIWYgOiAhc3RhdGUuaGFzKHJlY2VpdmVyKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCB3cml0ZSBwcml2YXRlIG1lbWJlciB0byBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO1xyXG4gICAgcmV0dXJuIChraW5kID09PSBcImFcIiA/IGYuY2FsbChyZWNlaXZlciwgdmFsdWUpIDogZiA/IGYudmFsdWUgPSB2YWx1ZSA6IHN0YXRlLnNldChyZWNlaXZlciwgdmFsdWUpKSwgdmFsdWU7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkSW4oc3RhdGUsIHJlY2VpdmVyKSB7XHJcbiAgICBpZiAocmVjZWl2ZXIgPT09IG51bGwgfHwgKHR5cGVvZiByZWNlaXZlciAhPT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgcmVjZWl2ZXIgIT09IFwiZnVuY3Rpb25cIikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgdXNlICdpbicgb3BlcmF0b3Igb24gbm9uLW9iamVjdFwiKTtcclxuICAgIHJldHVybiB0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyID09PSBzdGF0ZSA6IHN0YXRlLmhhcyhyZWNlaXZlcik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FkZERpc3Bvc2FibGVSZXNvdXJjZShlbnYsIHZhbHVlLCBhc3luYykge1xyXG4gICAgaWYgKHZhbHVlICE9PSBudWxsICYmIHZhbHVlICE9PSB2b2lkIDApIHtcclxuICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSBcIm9iamVjdFwiICYmIHR5cGVvZiB2YWx1ZSAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiT2JqZWN0IGV4cGVjdGVkLlwiKTtcclxuICAgICAgICB2YXIgZGlzcG9zZSwgaW5uZXI7XHJcbiAgICAgICAgaWYgKGFzeW5jKSB7XHJcbiAgICAgICAgICAgIGlmICghU3ltYm9sLmFzeW5jRGlzcG9zZSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0Rpc3Bvc2UgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgICAgICAgICBkaXNwb3NlID0gdmFsdWVbU3ltYm9sLmFzeW5jRGlzcG9zZV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChkaXNwb3NlID09PSB2b2lkIDApIHtcclxuICAgICAgICAgICAgaWYgKCFTeW1ib2wuZGlzcG9zZSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5kaXNwb3NlIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgICAgICAgICAgZGlzcG9zZSA9IHZhbHVlW1N5bWJvbC5kaXNwb3NlXTtcclxuICAgICAgICAgICAgaWYgKGFzeW5jKSBpbm5lciA9IGRpc3Bvc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlb2YgZGlzcG9zZSAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiT2JqZWN0IG5vdCBkaXNwb3NhYmxlLlwiKTtcclxuICAgICAgICBpZiAoaW5uZXIpIGRpc3Bvc2UgPSBmdW5jdGlvbigpIHsgdHJ5IHsgaW5uZXIuY2FsbCh0aGlzKTsgfSBjYXRjaCAoZSkgeyByZXR1cm4gUHJvbWlzZS5yZWplY3QoZSk7IH0gfTtcclxuICAgICAgICBlbnYuc3RhY2sucHVzaCh7IHZhbHVlOiB2YWx1ZSwgZGlzcG9zZTogZGlzcG9zZSwgYXN5bmM6IGFzeW5jIH0pO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoYXN5bmMpIHtcclxuICAgICAgICBlbnYuc3RhY2sucHVzaCh7IGFzeW5jOiB0cnVlIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHZhbHVlO1xyXG5cclxufVxyXG5cclxudmFyIF9TdXBwcmVzc2VkRXJyb3IgPSB0eXBlb2YgU3VwcHJlc3NlZEVycm9yID09PSBcImZ1bmN0aW9uXCIgPyBTdXBwcmVzc2VkRXJyb3IgOiBmdW5jdGlvbiAoZXJyb3IsIHN1cHByZXNzZWQsIG1lc3NhZ2UpIHtcclxuICAgIHZhciBlID0gbmV3IEVycm9yKG1lc3NhZ2UpO1xyXG4gICAgcmV0dXJuIGUubmFtZSA9IFwiU3VwcHJlc3NlZEVycm9yXCIsIGUuZXJyb3IgPSBlcnJvciwgZS5zdXBwcmVzc2VkID0gc3VwcHJlc3NlZCwgZTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2Rpc3Bvc2VSZXNvdXJjZXMoZW52KSB7XHJcbiAgICBmdW5jdGlvbiBmYWlsKGUpIHtcclxuICAgICAgICBlbnYuZXJyb3IgPSBlbnYuaGFzRXJyb3IgPyBuZXcgX1N1cHByZXNzZWRFcnJvcihlLCBlbnYuZXJyb3IsIFwiQW4gZXJyb3Igd2FzIHN1cHByZXNzZWQgZHVyaW5nIGRpc3Bvc2FsLlwiKSA6IGU7XHJcbiAgICAgICAgZW52Lmhhc0Vycm9yID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIHZhciByLCBzID0gMDtcclxuICAgIGZ1bmN0aW9uIG5leHQoKSB7XHJcbiAgICAgICAgd2hpbGUgKHIgPSBlbnYuc3RhY2sucG9wKCkpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGlmICghci5hc3luYyAmJiBzID09PSAxKSByZXR1cm4gcyA9IDAsIGVudi5zdGFjay5wdXNoKHIpLCBQcm9taXNlLnJlc29sdmUoKS50aGVuKG5leHQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHIuZGlzcG9zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSByLmRpc3Bvc2UuY2FsbChyLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoci5hc3luYykgcmV0dXJuIHMgfD0gMiwgUHJvbWlzZS5yZXNvbHZlKHJlc3VsdCkudGhlbihuZXh0LCBmdW5jdGlvbihlKSB7IGZhaWwoZSk7IHJldHVybiBuZXh0KCk7IH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBzIHw9IDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIGZhaWwoZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHMgPT09IDEpIHJldHVybiBlbnYuaGFzRXJyb3IgPyBQcm9taXNlLnJlamVjdChlbnYuZXJyb3IpIDogUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgaWYgKGVudi5oYXNFcnJvcikgdGhyb3cgZW52LmVycm9yO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5leHQoKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmV3cml0ZVJlbGF0aXZlSW1wb3J0RXh0ZW5zaW9uKHBhdGgsIHByZXNlcnZlSnN4KSB7XHJcbiAgICBpZiAodHlwZW9mIHBhdGggPT09IFwic3RyaW5nXCIgJiYgL15cXC5cXC4/XFwvLy50ZXN0KHBhdGgpKSB7XHJcbiAgICAgICAgcmV0dXJuIHBhdGgucmVwbGFjZSgvXFwuKHRzeCkkfCgoPzpcXC5kKT8pKCg/OlxcLlteLi9dKz8pPylcXC4oW2NtXT8pdHMkL2ksIGZ1bmN0aW9uIChtLCB0c3gsIGQsIGV4dCwgY20pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRzeCA/IHByZXNlcnZlSnN4ID8gXCIuanN4XCIgOiBcIi5qc1wiIDogZCAmJiAoIWV4dCB8fCAhY20pID8gbSA6IChkICsgZXh0ICsgXCIuXCIgKyBjbS50b0xvd2VyQ2FzZSgpICsgXCJqc1wiKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBwYXRoO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCB7XHJcbiAgICBfX2V4dGVuZHM6IF9fZXh0ZW5kcyxcclxuICAgIF9fYXNzaWduOiBfX2Fzc2lnbixcclxuICAgIF9fcmVzdDogX19yZXN0LFxyXG4gICAgX19kZWNvcmF0ZTogX19kZWNvcmF0ZSxcclxuICAgIF9fcGFyYW06IF9fcGFyYW0sXHJcbiAgICBfX2VzRGVjb3JhdGU6IF9fZXNEZWNvcmF0ZSxcclxuICAgIF9fcnVuSW5pdGlhbGl6ZXJzOiBfX3J1bkluaXRpYWxpemVycyxcclxuICAgIF9fcHJvcEtleTogX19wcm9wS2V5LFxyXG4gICAgX19zZXRGdW5jdGlvbk5hbWU6IF9fc2V0RnVuY3Rpb25OYW1lLFxyXG4gICAgX19tZXRhZGF0YTogX19tZXRhZGF0YSxcclxuICAgIF9fYXdhaXRlcjogX19hd2FpdGVyLFxyXG4gICAgX19nZW5lcmF0b3I6IF9fZ2VuZXJhdG9yLFxyXG4gICAgX19jcmVhdGVCaW5kaW5nOiBfX2NyZWF0ZUJpbmRpbmcsXHJcbiAgICBfX2V4cG9ydFN0YXI6IF9fZXhwb3J0U3RhcixcclxuICAgIF9fdmFsdWVzOiBfX3ZhbHVlcyxcclxuICAgIF9fcmVhZDogX19yZWFkLFxyXG4gICAgX19zcHJlYWQ6IF9fc3ByZWFkLFxyXG4gICAgX19zcHJlYWRBcnJheXM6IF9fc3ByZWFkQXJyYXlzLFxyXG4gICAgX19zcHJlYWRBcnJheTogX19zcHJlYWRBcnJheSxcclxuICAgIF9fYXdhaXQ6IF9fYXdhaXQsXHJcbiAgICBfX2FzeW5jR2VuZXJhdG9yOiBfX2FzeW5jR2VuZXJhdG9yLFxyXG4gICAgX19hc3luY0RlbGVnYXRvcjogX19hc3luY0RlbGVnYXRvcixcclxuICAgIF9fYXN5bmNWYWx1ZXM6IF9fYXN5bmNWYWx1ZXMsXHJcbiAgICBfX21ha2VUZW1wbGF0ZU9iamVjdDogX19tYWtlVGVtcGxhdGVPYmplY3QsXHJcbiAgICBfX2ltcG9ydFN0YXI6IF9faW1wb3J0U3RhcixcclxuICAgIF9faW1wb3J0RGVmYXVsdDogX19pbXBvcnREZWZhdWx0LFxyXG4gICAgX19jbGFzc1ByaXZhdGVGaWVsZEdldDogX19jbGFzc1ByaXZhdGVGaWVsZEdldCxcclxuICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQ6IF9fY2xhc3NQcml2YXRlRmllbGRTZXQsXHJcbiAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkSW46IF9fY2xhc3NQcml2YXRlRmllbGRJbixcclxuICAgIF9fYWRkRGlzcG9zYWJsZVJlc291cmNlOiBfX2FkZERpc3Bvc2FibGVSZXNvdXJjZSxcclxuICAgIF9fZGlzcG9zZVJlc291cmNlczogX19kaXNwb3NlUmVzb3VyY2VzLFxyXG4gICAgX19yZXdyaXRlUmVsYXRpdmVJbXBvcnRFeHRlbnNpb246IF9fcmV3cml0ZVJlbGF0aXZlSW1wb3J0RXh0ZW5zaW9uLFxyXG59O1xyXG4iLCJpbXBvcnQge1xyXG5cdEFwcCwgUGx1Z2luLCBNYXJrZG93blBvc3RQcm9jZXNzb3IsIE1hcmtkb3duU2VjdGlvbkluZm9ybWF0aW9uLFxyXG5cdFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsIE1hcmtkb3duVmlldywgQ29sb3JDb21wb25lbnQsIFNsaWRlckNvbXBvbmVudCxcclxuXHRQbHVnaW5NYW5pZmVzdCwgVG9nZ2xlQ29tcG9uZW50XHJcbn0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQge1ZpZXdQbHVnaW4sIFZpZXdVcGRhdGUsIEVkaXRvclZpZXcsIERlY29yYXRpb25TZXQsIERlY29yYXRpb259IGZyb20gJ0Bjb2RlbWlycm9yL3ZpZXcnO1xyXG5pbXBvcnQge0xpbmUsIFJhbmdlfSBmcm9tIFwiQGNvZGVtaXJyb3Ivc3RhdGVcIjtcclxuXHJcbi8qIERlZmluaXRpb24gTGlzdCBwbHVnaW4gZm9yIE9ic2lkaWFuXHJcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAqIFRoZSBwbHVnaW4gaGFzIGZvdXIgbWFpbiBjb21wb25lbnRzOlxyXG4gKiAgMS4gdGhlIGRlZmF1bHQgZXhwb3J0LCB0aGUgY2xhc3MgRGVmaW5pdGlvbkxpc3RQbHVnaW5cclxuICogICAgIHRoYXQgaXMgaW5zdGFudGlhdGVkIG9uY2UsIHdoZW4gdGhlIHBsdWdpbiBsb2Fkcy4gSXRcclxuICogICAgIHJlZ2lzdGVycyBpdGVtcyAyLCAzIGFuZCA0IHNvIE9ic2lkaWFuIGNhbiB1c2UgdGhlbS5cclxuICogIDIuIHRoZSBjb25zdGFudCBsaXZlVXBkYXRlRGVmaW5pdGlvbkxpc3RzLCBhbiBpbnN0YW5jZVxyXG4gKiAgICAgb2YgdGhlIFZpZXdQbHVnaW4gY2xhc3MuIEluc2lkZSBpdCwgYW4gYW5vbnltb3VzIGNsYXNzXHJcbiAqICAgICBpcyBlbWJlZGRlZCB0aGF0IGlzIGluc3RhbnRpYXRlZCB3aGVuIGEgZG9jdW1lbnQgaXNcclxuICogICAgIG9wZW5lZCAob3IgdGhlIGZpcnN0IHRpbWUgdGhlIHVzZXIgc3dpdGNoZXMgdG8gaXQpOiBldmVyeVxyXG4gKiAgICAgb3BlbiBkb2N1bWVudCBoYXMgaXRzIG93biBpbnN0YW5jZSBvZiB0aGF0IGVtYmVkZGVkIGNsYXNzLlxyXG4gKiAgICAgSXRzIC51cGRhdGUgbWV0aG9kIGlzIGNhbGxlZCBpbiBFZGl0IE1vZGUgd2hlbmV2ZXIgYW55dGhpbmdcclxuICogICAgIGhhcHBlbnMgLSBlZGl0cywgc2Nyb2xsaW5nLCBjdXJzb3IgbW92ZW1lbnQgLSB3aXRoIGNvbnRlbnRzXHJcbiAqICAgICBhbmQgZGV0YWlscyBvZiB0aGUgZG9jdW1lbnQgYW5kIGVkaXRvciB3aW5kb3cgcGFzc2VkIGluO1xyXG4gKiAgICAgaXQgdGVsbHMgdGhlIGVkaXRvciBDb2RlTWlycm9yIHRvIGFkZCAnZGVjb3JhdGlvbnMnIChjbGFzc2VzXHJcbiAqICAgICBhbmQgc3BhbnMpIHRvIHRoZSBjb250ZW50LCBzbyBpdCB0YWtlcyBvbiB0aGUgY29ycmVjdCBhcHBlYXJhbmNlXHJcbiAqICAzLiB0aGUgZnVuY3Rpb24gcG9zdFByb2Nlc3NEZWZpbml0aW9uTGlzdHMsIHdoaWNoIGFkaGVyZXMgdG8gdGhlXHJcbiAqICAgICBNYXJrZG93blBvc3RQcm9jZXNzb3IgaW50ZXJmYWNlLiBXaGVuIGEgZG9jdW1lbnQgZW50ZXJzXHJcbiAqICAgICBSZWFkaW5nIFZpZXcsIHRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIG9uIGV2ZXJ5IHBhcmFncmFwaFxyXG4gKiAgICAgY2hhbmdlZCBzaW5jZSB0aGUgbGFzdCB0aW1lIGluIFJlYWRpbmcgVmlldy4gSXQncyBjYWxsZWRcclxuICogICAgIG9uY2Ugd2hlbiB0aGUgZG9jdW1lbnQgaXMgc2F2ZWQgYXMgYSBQREYuXHJcbiAqICA0LiB0aGUgY2xhc3MgRGVmaW5pdGlvbkxpc3RTZXR0aW5nVGFiLCB0aGF0IGlzIGluc3RhbnRpYXRlZFxyXG4gKiAgICAgb25jZSwgd2hlbiB0aGUgcGx1Z2luIGxvYWRzLiBJdCBzZXRzIHVwIHRoZSBzZXR0aW5ncyBwYWdlXHJcbiAqICAgICBhbmQgc2F2ZXMgY2hhbmdlZCBzZXR0aW5ncy5cclxuICovXHJcblxyXG5pbnRlcmZhY2UgRGVmaW5pdGlvbkxpc3RQbHVnaW5TZXR0aW5ncyB7XHJcblx0ZHRjb2xvcjogc3RyaW5nO1xyXG5cdGR0Ym9sZDogYm9vbGVhbjtcclxuXHRkdGl0YWxpYzogYm9vbGVhbjtcclxuXHRkZGluZGVudGF0aW9uOiBudW1iZXI7XHJcbn1cclxuXHJcbmNvbnN0IGRlZmF1bHRTZXR0aW5nczogRGVmaW5pdGlvbkxpc3RQbHVnaW5TZXR0aW5ncyA9IHtcclxuXHRkdGNvbG9yOiAnIzU1NTU3NycsXHJcblx0ZHRib2xkOiB0cnVlLFxyXG5cdGR0aXRhbGljOiBmYWxzZSxcclxuXHRkZGluZGVudGF0aW9uOiAzMFxyXG59XHJcbmNvbnN0IGRlZmluaXRpb25NYXJrZXI6IFJlZ0V4cCA9IC8oPzpefFxcbik6IHszfS87XHJcbmNvbnN0IE1BUktFUjogc3RyaW5nID0gJzogICAnO1xyXG5cclxuLyogMS4gVGhlIG1haW4gY2xhc3MsIGluc3RhbnRpYXRlZCBieSBPYnNpZGlhbiB3aGVuIHRoZSBwbHVnaW4gbG9hZHMgKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGVmaW5pdGlvbkxpc3RQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xyXG5cdHB1YmxpYyBzZXR0aW5nczogRGVmaW5pdGlvbkxpc3RQbHVnaW5TZXR0aW5ncztcclxuXHRwdWJsaWMgcmVhZG9ubHkgY3NzRWxlbWVudDogSFRNTFN0eWxlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XHJcblxyXG5cdGFzeW5jIG9ubG9hZCgpIHtcclxuXHRcdGNvbnNvbGUubG9nKGBMb2FkaW5nIHBsdWdpbiAke3RoaXMubWFuaWZlc3QubmFtZX0gdiR7dGhpcy5tYW5pZmVzdC52ZXJzaW9ufWApO1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRTZXR0aW5ncywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcclxuXHRcdHRoaXMuY3NzRWxlbWVudC50ZXh0Q29udGVudCA9IGA6cm9vdCB7XHJcblx0XHRcdC0tZHRjb2xvcjogJHt0aGlzLnNldHRpbmdzLmR0Y29sb3J9O1xyXG5cdFx0XHQtLWR0d2VpZ2h0OiAke3RoaXMuc2V0dGluZ3MuZHRib2xkID8gJ2JvbGQnIDogJ2luaGVyaXQnfTtcclxuXHRcdFx0LS1kdHN0eWxlOiAke3RoaXMuc2V0dGluZ3MuZHRpdGFsaWMgPyAnaXRhbGljJyA6ICdpbmhlcml0J307XHJcblx0XHRcdC0tZGRpbmRlbnRhdGlvbjogJHt0aGlzLnNldHRpbmdzLmRkaW5kZW50YXRpb259cHg7XHRcclxuXHRcdH1gO1xyXG5cdFx0ZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZCh0aGlzLmNzc0VsZW1lbnQpO1xyXG5cdFx0dGhpcy5yZWdpc3RlckVkaXRvckV4dGVuc2lvbihsaXZlVXBkYXRlRGVmaW5pdGlvbkxpc3RzKTtcclxuXHRcdHRoaXMucmVnaXN0ZXJNYXJrZG93blBvc3RQcm9jZXNzb3IocG9zdFByb2Nlc3NEZWZpbml0aW9uTGlzdHMsIDk5KTtcclxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgRGVmaW5pdGlvbkxpc3RTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XHJcblx0fVxyXG5cclxuXHRvbnVubG9hZCgpIHtcclxuXHRcdGNvbnNvbGUubG9nKGBVbmxvYWRpbmcgcGx1Z2luICR7dGhpcy5tYW5pZmVzdC5uYW1lfWApO1xyXG5cdFx0aWYgKHRoaXMuY3NzRWxlbWVudCkgdGhpcy5jc3NFbGVtZW50LnJlbW92ZSgpO1xyXG5cdH1cclxufVxyXG5cclxuLyogMi4gVGhlIFZpZXdQbHVnaW4gdGhhdCB3b3JrcyBpbiBFZGl0IE1vZGUuICovXHJcbmNvbnN0IGxpdmVVcGRhdGVEZWZpbml0aW9uTGlzdHMgPSBWaWV3UGx1Z2luLmZyb21DbGFzcyhcclxuXHQvKiBUaGUgVmlld1BsdWdpbiBjbGFzcyBpcyBnZW5lcmljOiBpdCByZXF1aXJlcyBhbiB1bmRlcmx5aW5nIHR5cGUsIGEgc3ViY2xhc3Mgb2ZcclxuICAgICAqIHRoZSBQbHVnaW5WYWx1ZSBjbGFzcy4gVGhhdCBpcyB0byBiZSB0aGUgZmlyc3QgYXJndW1lbnQgcGFzc2VkIGludG8gdGhlIGNsYXNzXHJcbiAgICAgKiBtZXRob2QgLmZyb21DbGFzcygpIHdoaWNoIHJldHVybnMgYSBWaWV3UGx1Z2luIGluc3RhbmNlIHdpdGggdGhhdCB1bmRlcmx5aW5nXHJcbiAgICAgKiB0eXBlLiBUaGUgc2Vjb25kIGFyZ3VtZW50IG9mIHRoYXQgY2xhc3MgbWV0aG9kLCB0byBnaXZlIGFkZGl0aW9uYWwgZGV0YWlscyxcclxuICAgICAqIGlzIGEgUGx1Z2luU3BlYyBpbnN0YW5jZSB3aXRoIHRoZSBzYW1lIHVuZGVybHlpbmcgdHlwZS4gSXQgaGFzIHplcm8gb3IgbW9yZVxyXG4gICAgICogb2YgdGhlIHByb3BlcnRpZXMgZXZlbnRIYW5kbGVycywgZXZlbnRPYnNlcnZlcnMsIHByb3ZpZGUsIGFuZCBkZWNvcmF0aW9ucy5cclxuICAgICAqIFRoZSBsYXR0ZXIgaXMgYSBmdW5jdGlvbiB0aGF0LCB3aGVuIHBhc3NlZCBhbiBpbnN0YW5jZSBvZiB0aGUgdW5kZXJseWluZ1xyXG4gICAgICogY2xhc3MsIHJldHVybnMgYSBEZWNvcmF0aW9uU2V0IC0gaW4gdGhpcyBjYXNlIHRoZSBmdW5jdGlvbiBzaW1wbHkgcmV0dXJuc1xyXG4gICAgICogdGhlIC5kZWNvcmF0aW9ucyBpbnN0YW5jZSBwcm9wZXJ0eS4gKi9cclxuXHRjbGFzcyB7ICAvLyB0aGUgcGx1Z2luIGVtYmVkcyBhbiBhbm9ueW1vdXMgY2xhc3Mgd2UgZGVmaW5lIGhlcmVcclxuXHRcdGRlY29yYXRpb25zOiBEZWNvcmF0aW9uU2V0O1xyXG5cdFx0cHJpdmF0ZSByZWFkb25seSBURVJNX0NMQVNTOiBzdHJpbmcgPSAndmlldy1kdCc7XHJcblx0XHRwcml2YXRlIHJlYWRvbmx5IERFRl9DTEFTUzogc3RyaW5nID0gJ3ZpZXctZGQnO1xyXG5cdFx0cHJpdmF0ZSByZWFkb25seSBNQVJLRVJfQ0xBU1M6IHN0cmluZyA9ICd2aWV3LWRkLW1hcmtlcic7XHJcblx0XHRwcml2YXRlIHJlYWRvbmx5IFRFUk1fREVDOiBEZWNvcmF0aW9uID0gRGVjb3JhdGlvbi5saW5lKHtjbGFzczogdGhpcy5URVJNX0NMQVNTfSk7XHJcblx0XHRwcml2YXRlIHJlYWRvbmx5IERFRl9ERUM6IERlY29yYXRpb24gPSBEZWNvcmF0aW9uLmxpbmUoe2NsYXNzOiB0aGlzLkRFRl9DTEFTU30pO1xyXG5cdFx0cHJpdmF0ZSByZWFkb25seSBNQVJLRVJfREVDOiBEZWNvcmF0aW9uID0gRGVjb3JhdGlvbi5tYXJrKHtjbGFzczogdGhpcy5NQVJLRVJfQ0xBU1N9KTtcclxuXHRcdHByaXZhdGUgbmV2ZXJfdXBkYXRlZDogYm9vbGVhbiA9IHRydWU7XHJcblxyXG5cdFx0Y29uc3RydWN0b3IodmlldzogRWRpdG9yVmlldykge1xyXG5cdFx0XHR0aGlzLmRlY29yYXRpb25zID0gRGVjb3JhdGlvbi5ub25lO1xyXG5cdFx0XHRjb25zb2xlLmRlYnVnKGBsaXZlIHVwZGF0ZXIgZm9yICR7dmlldy5zdGF0ZS5kb2MubGluZSgxKS50ZXh0fSBzdGFydGVkYCk7XHJcblx0XHR9XHJcblxyXG5cdFx0LyogdGhpcy5kZWNvcmF0aW9ucyB0eXBlLCBEZWNvcmF0aW9uU2V0LCBpcyBhIFJhbmdlU2V0IG9mIGl0ZW1zIG9mIHRoZSB1bmRlcmx5aW5nXHJcblx0XHQgKiB0eXBlIERlY29yYXRpb24uIFN1Y2ggYSBSYW5nZVNldCBvYmplY3QgaGFzIHByb3BlcnRpZXMgYW5kIG1ldGhvZHNcclxuXHRcdCAqIC5zaXplIChudW1iZXIgb2YgZWxlbWVudHMpOyAuaXRlcigpIHdpdGggb3B0aW9uYWwgYXJnIGZyb20sIGFuIG9mZnNldCB0aGF0XHJcblx0XHQgKiBsaWVzIGluIG9yIGJlZm9yZSB0aGUgZmlyc3QgdG8gYmUgaXRlcmF0ZWQ7IC51cGRhdGUoUmFuZ2VTZXRVcGRhdGUpIHRvIGFkZFxyXG5cdFx0ICogb3IgcmVtb3ZlIHRoZW0gKHJldHVybnMgdGhlIG5ldyB2ZXJzaW9uKTsgLmJldHdlZW4oZnJvbSwgdG8sIGZ1bmMpIHJ1biBmdW5jXHJcblx0XHQgKiBvbiBldmVyeSBEZWNvcmF0aW9uIGJldHdlZW4gdGhlIG9mZnNldHMgZnJvbSBhbmQgdG87IC5tYXAoQ2hhbmdlRGVzYykuICovXHJcblxyXG5cdFx0LyogdGhlIGJvb2xlYW4gVmlldXdVcGRhdGUgcHJvcGVydGllcyB0aGF0IG1heSBiZSB1c2VmdWw6XHJcblx0XHQgKiAgLnZpZXdwb3J0Q2hhbmdlZDogdmlld3BvcnQgb3IgdmlzaWJsZSByYW5nZXMgaGF2ZSBjaGFuZ2VkXHJcblx0XHQgKiAgLmdlb21ldHJ5Q2hhbmdlZDogZWRpdG9yIHNpemUgb3IgdGhlIGRvY3VtZW50IGl0c2VsZiBjaGFuZ2VkXHJcblx0XHQgKiAgLmZvY3VzQ2hhbmdlZDogbWF5YmUgc29tZSBzd2l0Y2ggdG8gYW5vdGhlciBkb2N1bWVudCwgcGFuZWwgZXRjLjtcclxuXHRcdCAqICBjaGFuZ2UgaW4gVmlldyBiZXR3ZWVuIEVkaXRpbmcgYW5kIFJlbmRlcmluZyB2aWV3OyBidXRcclxuXHRcdCAqICB3aGVuIHRoZSBkb2N1bWVudC9FZGl0aW5nIGlzIGFjdGl2YXRlZCwgLmdlb21ldHJ5Q2hhbmdlZCBpcyBhbHNvIHRydWUuXHJcblx0XHQgKiBPbmUgY2hhbmdlIGZyb20gUmVhZGluZyB0byBFZGl0aW5nIHZpZXcgdHJpZ2dlcmVkIGF0IG9uZSB0aW1lOlxyXG5cdFx0ICogdmlld3BvcnRDaGFuZ2VkLCB2aWV3cG9ydE1vdmVkLCBoZWlnaHRDaGFuZ2VkLCBnZW9tZXRyeUNoYW5nZWQ7IHRoZW5cclxuXHRcdCAqIGhlaWdodENoYW5nZWQsIGdlb21ldHJ5Q2hhbmdlZDsgdGhlbiBmb2N1c0NoYW5nZWQ7IHRoZW4gaGVpZ2h0Q2hhbmdlZFxyXG5cdFx0ICogYW5kIGdlb21ldHJ5Q2hhbmdlZCB0d2ljZS4gRWl0aGVyIHdlIG9ubHkgdXNlIGZvY3VzIGFuZCB2aWV3cG9ydCBvclxyXG5cdFx0ICogd2UgZGVib3VuY2UgY2VydGFpbiBldmVudHMuXHJcblx0XHQgKiBMYXVuY2hpbmcgT2JzaWRpYW4gd2l0aCBhIGRvY3VtZW50IG9wZW46IGxvdHMgYW5kIGxvdHM7IHZpZXdwb3J0Q2hhbmdlZCBvbmNlLlxyXG5cdFx0ICogU3dpdGNoaW5nIHRvIGFuIG9wZW4gZG9jIGZvciB0aGUgZmlyc3QgdGltZSBhZnRlciByZXN0YXJ0OiBpbnN0YW50aWF0ZXNcclxuXHRcdCAqIHRoaXMgY2xhc3MgPT4gdXNlIHRoZSBjb25zdHJ1Y3RvciBmb3IgdGhpc1xyXG5cdFx0ICovXHJcblx0XHR1cGRhdGUodXBkYXRlOiBWaWV3VXBkYXRlKSB7XHJcblx0XHRcdGNvbnNvbGUuZGVidWcoRGF0ZSgpKTtcclxuXHRcdFx0Zm9yIChsZXQgaSBvZiBbJ3ZpZXdwb3J0Q2hhbmdlZCcsICd2aWV3cG9ydE1vdmVkJywgJ2hlaWdodENoYW5nZWQnLFxyXG5cdFx0XHRcdCdnZW9tZXRyeUNoYW5nZWQnLCAnZm9jdXNDaGFuZ2VkJywgJ2RvY0NoYW5nZWQnLCAnc2VsZWN0aW9uU2V0J10pIHtcclxuXHRcdFx0XHRpZiAoKHVwZGF0ZSBhcyBhbnkpW2ldKVxyXG5cdFx0XHRcdFx0Y29uc29sZS5kZWJ1ZyhpKTtcclxuXHRcdFx0fVxyXG5cdFx0XHR1cGRhdGUuY2hhbmdlcy5pdGVyQ2hhbmdlcyhjb25zb2xlLmRlYnVnLCB0cnVlKTtcclxuXHJcblx0XHRcdC8qIHZpZXdwb3J0Q2hhbmdlZCBtZWFucyB0aGUgd2hvbGUgRGVjb3JhdGlvblNldCBtdXN0IGJlIGNvbXBsZXRlbHlcclxuXHRcdFx0ICogcmUtZG9uZSBmcm9tIHNjcmF0Y2gsIHNvIGlmIHRoYXQgZXZlbnQgaXMgcGFydCBvZiB0aGUgdXBkYXRlLFxyXG5cdFx0XHQgKiBvbmx5IGRvIHRoYXQuIEFsc28sIHRoZSBmaXJzdCB0aW1lIEVkaXQgVmlldyBpcyBhY3RpdmUuICovXHJcblx0XHRcdGlmICh1cGRhdGUudmlld3BvcnRDaGFuZ2VkIHx8XHJcblx0XHRcdFx0KHRoaXMubmV2ZXJfdXBkYXRlZCAmJiB1cGRhdGUudmlldy5jb250ZW50RE9NLmlzU2hvd24oKSkpIHtcclxuXHRcdFx0XHRjb25zdCBkb2NUZXh0ID0gdXBkYXRlLnN0YXRlLmRvYztcclxuXHRcdFx0XHRjb25zdCBuZXdEZWNvcmF0aW9uczogUmFuZ2U8RGVjb3JhdGlvbj5bXSA9IFtdO1xyXG5cdFx0XHRcdGZvciAobGV0IHJhbmdlIG9mIHVwZGF0ZS52aWV3LnZpc2libGVSYW5nZXMpIHtcclxuXHRcdFx0XHRcdC8vIG11bHRpcGxlIHJhbmdlcyBhcmUgYWx3YXlzIGluIGRvY3VtZW50IG9yZGVyLCBidXQgdGhlIGJvcmRlclxyXG5cdFx0XHRcdFx0Ly8gYmV0d2VlbiB0aGVtIG1heSBmYWxsIHdpdGhpbiBhIGxpbmVcclxuXHRcdFx0XHRcdGNvbnNvbGUuZGVidWcocmFuZ2UpO1xyXG5cdFx0XHRcdFx0bGV0IHByZXZpb3VzTGluZTogTGluZSB8IG51bGwgPSBudWxsO1xyXG5cdFx0XHRcdFx0Zm9yIChsZXQgbG5yOiBudW1iZXIgPSBkb2NUZXh0LmxpbmVBdChyYW5nZS5mcm9tKS5udW1iZXI7XHJcblx0XHRcdFx0XHRcdCBsbnIgPD0gZG9jVGV4dC5saW5lQXQocmFuZ2UudG8pLm51bWJlcjtcclxuXHRcdFx0XHRcdFx0IGxucisrKSB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IGxpbmU6IExpbmUgPSBkb2NUZXh0LmxpbmUobG5yKTtcclxuXHRcdFx0XHRcdFx0Ly8gaWYgdGhlIGN1cnJlbnQgbGluZSBpcyBhIGRlZmluaXRpb25cclxuXHRcdFx0XHRcdFx0aWYgKGxpbmUudGV4dC5zdGFydHNXaXRoKE1BUktFUikpIHtcclxuXHRcdFx0XHRcdFx0XHQvLyBhIGxpbmUgbWF5IG9jY3VyIGluIG1vcmUgdGhhbiBvbmUgb2YgdGhlIHJhbmdlczsgYWRkIGl0IG9uY2VcclxuXHRcdFx0XHRcdFx0XHRpZiAobmV3RGVjb3JhdGlvbnMubGFzdCgpPy5mcm9tID09IGxpbmUuZnJvbSlcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHRcdFx0XHRcdGlmIChwcmV2aW91c0xpbmU/Lmxlbmd0aCAmJiAhcHJldmlvdXNMaW5lIS50ZXh0LnN0YXJ0c1dpdGgoTUFSS0VSKSlcclxuXHRcdFx0XHRcdFx0XHRcdG5ld0RlY29yYXRpb25zLnB1c2godGhpcy5URVJNX0RFQy5yYW5nZShwcmV2aW91c0xpbmUhLmZyb20pKTtcclxuXHRcdFx0XHRcdFx0XHQvLyBGSVhNRTogaWYgcHJldmlvdXMgbGluZSBpcyBlLmcuIGEgbGlzdCwgdGhpcyBmYWlsc1xyXG5cdFx0XHRcdFx0XHRcdG5ld0RlY29yYXRpb25zLnB1c2goXHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLkRFRl9ERUMucmFuZ2UobGluZS5mcm9tKSwgLy8gbGluZWRlYyBhbmNob3JlZCBvbiBzdGFydFxyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5NQVJLRVJfREVDLnJhbmdlKGxpbmUuZnJvbSwgbGluZS5mcm9tICsgNCksXHJcblx0XHRcdFx0XHRcdFx0KTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRwcmV2aW91c0xpbmUgPSBsaW5lO1x0Ly8gcHJlc2VydmUgdGhlIGxpbmUgZm9yIHRoZSBuZXh0IHJvdW5kXHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGNvbnNvbGUuZGVidWcobmV3RGVjb3JhdGlvbnMpO1xyXG5cdFx0XHRcdHRoaXMuZGVjb3JhdGlvbnMgPSBEZWNvcmF0aW9uLm5vbmUudXBkYXRlKHthZGQ6IG5ld0RlY29yYXRpb25zfSk7XHJcblx0XHRcdFx0dGhpcy5uZXZlcl91cGRhdGVkID0gZmFsc2U7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvKiBkb2NDaGFuZ2VkIGlzIHVzdWFsbHkgc2ltcGxlOiB0aGUgLm1hcCBtZXRob2QgdXBkYXRlcyBhbGwgb2Zmc2V0c1xyXG5cdFx0XHQgKiBiZXlvbmQgdGhlIGluc2VydGlvbiBvciBkZWxldGlvbi4gQnV0IGl0IGdldHMgY29tcGxpY2F0ZWQgd2hlbiB0aGVcclxuXHRcdFx0ICogZWRpdCBoYXBwZW5zIGluc2lkZSBhIG1hcmtlciwgb3Igd2hlbiB0aGUgbGluZSBzdWRkZW5seSBoYXMgb25lLiAqL1xyXG5cdFx0XHRpZiAodXBkYXRlLmRvY0NoYW5nZWQpIHtcclxuXHRcdFx0XHQvLyBNYXAgdGhlIGV4aXN0aW5nIGRlY29yYXRpb25zIHRocm91Z2ggdGhlIGNoYW5nZXNcclxuXHRcdFx0XHR0aGlzLmRlY29yYXRpb25zID0gdGhpcy5kZWNvcmF0aW9ucy5tYXAodXBkYXRlLmNoYW5nZXMpO1xyXG5cdFx0XHRcdC8vIFRPRE86IGNvZGUgZm9yIHdoZW4gYSBtYXJrZXIgaXMgYWRkZWQgb3IgZGVzdHJveWVkXHJcblx0XHRcdH1cclxuXHRcdFx0Y29uc29sZS5kZWJ1ZygnLS0tLS0tLS0tLS0tLS0tJyk7XHJcblxyXG5cdFx0XHRpZiAoZmFsc2UgJiYgdXBkYXRlLnNlbGVjdGlvblNldClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGNvbnN0IHN0YXRlID0gdXBkYXRlLnZpZXcuc3RhdGU7XHJcblx0XHRcdFx0Y29uc3QgY3Vyc29yUG9zID0gc3RhdGUuc2VsZWN0aW9uLm1haW4uaGVhZDtcclxuXHJcblx0XHRcdFx0Ly8gdGhlIExpbmUgb2JqZWN0IHRoYXQgcmVwcmVzZW50cyB0aGUgY3VycmVudCBsaW5lIG9mIHRoZSBkb2N1bWVudFxyXG5cdFx0XHRcdC8vIG5vdGUgdGhhdCBzdGF0ZS5kb2MgaXMgYW4gb2JqZWN0IG9mIGNsYXNzIFRleHRcclxuXHRcdFx0XHRjb25zdCBjdXJyZW50TGluZSA9IHN0YXRlLmRvYy5saW5lQXQoY3Vyc29yUG9zKTtcclxuXHRcdFx0XHQvLyB0aGUgdGV4dCBvZiB0aGUgZm9sbG93aW5nIGxpbmVcclxuXHRcdFx0XHRjb25zdCBuZXh0TGluZVRleHQ6IHN0cmluZyA9IChzdGF0ZS5kb2MubGluZXMgPT09IGN1cnJlbnRMaW5lLm51bWJlcikgPyAnJyA6XHJcblx0XHRcdFx0XHRzdGF0ZS5kb2MubGluZShjdXJyZW50TGluZS5udW1iZXIgKyAxKS50ZXh0O1xyXG5cdFx0XHRcdGlmICghY3VycmVudExpbmUudGV4dC5zdGFydHNXaXRoKE1BUktFUikgJiZcclxuXHRcdFx0XHRcdCFuZXh0TGluZVRleHQuc3RhcnRzV2l0aChNQVJLRVIpKVxyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cclxuXHRcdFx0XHQvLyBUT0RPOiB0d28gdGVybXMgYmVmb3JlIG9uZSBkZWZpbml0aW9uXHJcblx0XHRcdFx0Ly8gVE9ETzogcGFyc2UgYWxsIGRlZmluaXRpb24gbGlzdHMgd2hlbiBmaXJzdCBvcGVuaW5nIEVkaXQgVmlldywgb3IgYXRcclxuXHRcdFx0XHQvLyAgbGVhc3QgdGhvc2UgaW5zaWRlIHRoZSB2aWV3cG9ydFxyXG5cclxuXHRcdFx0XHQvLyBQZXJmb3JtIGEgZmV3IGNoZWNrcyBiZWZvcmUgYWRkaW5nIGFueSBkZWNvcmF0aW9uc1xyXG5cdFx0XHRcdGNvbnN0IGxpbmVDbGFzc2VzID0gIHVwZGF0ZS52aWV3XHJcblx0XHRcdFx0XHRcdC5kb21BdFBvcyhjdXJzb3JQb3MpLm5vZGUucGFyZW50RWxlbWVudC5jbG9zZXN0KCcuY20tbGluZScpPy5jbGFzc0xpc3RcclxuXHRcdFx0XHRcdHx8IHtjb250YWluczogKHM6IHN0cmluZykgPT4gZmFsc2V9O1xyXG5cdFx0XHRcdC8vIC0gTm8gZGVmaW5pdGlvbiBsaXN0cyBpbnNpZGUgYSBjb2RlIGJsb2NrXHJcblx0XHRcdFx0aWYgKGxpbmVDbGFzc2VzLmNvbnRhaW5zKCdIeXBlck1ELWNvZGVibG9jaycpKVxyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdC8vIC0gRG9uJ3QgYWRkIGEgY2xhc3Mgd2hlbiBpdCdzIGFscmVhZHkgYmVlbiBkb25lXHJcblx0XHRcdFx0aWYgKGxpbmVDbGFzc2VzLmNvbnRhaW5zKHRoaXMuREVGX0NMQVNTKSB8fFxyXG5cdFx0XHRcdFx0bGluZUNsYXNzZXMuY29udGFpbnModGhpcy5URVJNX0NMQVNTKSlcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHJcblx0XHRcdFx0Ly8gRmluYWxseSwgYXMgYWxsIGNyaXRlcmlhIGhhdmUgYmVlbiBtZXQsIHdlIGdldCB0byB3b3JrXHJcblx0XHRcdFx0LyogdGhlIGFyZ3VtZW50IGZvciAudXBkYXRlIGlzIG9mIGNsYXNzIFJhbmdlU2V0VXBkYXRlPERlY29yYXRpb24+LFxyXG4gICAgICAgICAgICAgICAgKiBhbmQgUmFuZ2VTZXRVcGRhdGUgaXMgYSB0eXBlZGVmIG9mIGFuIE9iamVjdCB3aXRoIG9wdGlvbmFsXHJcbiAgICAgICAgICAgICAgICAqIHByb3BlcnR5IC5hZGQgb2YgY2xhc3MgcmVhZG9ubHkgUmFuZ2U8RGVjb3JhdGlvbj47IHRoYXQgaW4gdHVybiBoYXNcclxuICAgICAgICAgICAgICAgICogaW5zdGFuY2UgcHJvcGVydGllcyBmcm9tLCB0bywgYW5kIHRoZSBEZWNvcmF0aW9uLlxyXG4gICAgICAgICAgICAgICAgKiBZb3UgY2FuIGNyZWF0ZSBhIFJhbmdlPERlY29yYXRpb24+IGJ5IGNyZWF0aW5nIGEgRGVjb3JhdGlvbiBhbmRcclxuICAgICAgICAgICAgICAgICogYXBwbHlpbmcgaXRzIC5yYW5nZSBtZXRob2QgKGluaGVyaXRlZCBmcm9tIGl0cyBzdXBlcmNsYXNzIFJhbmdlVmFsdWUpLlxyXG4gICAgICAgICAgICAgICAgKiBOb3RlIHRoYXQgLnVwZGF0ZSBkb2Vzbid0IG1vZGlmeSB0aGUgaW5zdGFuY2UgYnV0IHJldHVybnMgaXQuICovXHJcblx0XHRcdFx0Y29uc3QgbmV3RGVjb3JhdGlvbnMgPVxyXG5cdFx0XHRcdFx0Y3VycmVudExpbmUudGV4dC5zdGFydHNXaXRoKE1BUktFUilcclxuXHRcdFx0XHRcdFx0PyBbXHJcblx0XHRcdFx0XHRcdFx0dGhpcy5ERUZfREVDLnJhbmdlKGN1cnJlbnRMaW5lLmZyb20pLCAvLyBsaW5lZGVjIGFuY2hvcmVkIG9uIHN0YXJ0XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5NQVJLRVJfREVDLnJhbmdlKGN1cnJlbnRMaW5lLmZyb20sIGN1cnJlbnRMaW5lLmZyb20rNClcclxuXHRcdFx0XHRcdFx0XSA6IFtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLlRFUk1fREVDLnJhbmdlKGN1cnJlbnRMaW5lLmZyb20pXHJcblx0XHRcdFx0XHRcdF07XHJcblx0XHRcdFx0dGhpcy5kZWNvcmF0aW9ucyA9IHRoaXMuZGVjb3JhdGlvbnMudXBkYXRlKHthZGQ6IG5ld0RlY29yYXRpb25zfSk7XHJcblx0XHRcdFx0Y29uc29sZS5kZWJ1Zyh0aGlzLmRlY29yYXRpb25zLnNpemUsICdkZWNvcmF0aW9ucycpO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vIGVsc2UgaWYgKHVwZGF0ZS5nZW9tZXRyeUNoYW5nZWQpIGNvbnNvbGUubG9nKCdnZW9tZXRyeSBjaGFuZ2VkJyk7XHJcblx0XHR9XHJcblx0fSxcclxuXHR7XHJcblx0XHRkZWNvcmF0aW9uczogdiA9PiB2LmRlY29yYXRpb25zLFxyXG5cdH1cclxuKTtcclxuXHJcbi8qIDMuIFRoZSBNYXJrZG93blBvc3RQcm9jZXNzb3IgdGhhdCBwcmVwYXJlcyBSZWFkaW5nIFZpZXcgYW5kIFBERiBleHBvcnQuICovXHJcbmNvbnN0IHBvc3RQcm9jZXNzRGVmaW5pdGlvbkxpc3RzOiBNYXJrZG93blBvc3RQcm9jZXNzb3IgPSBmdW5jdGlvbihlbGVtZW50LCBjb250ZXh0KTogUHJvbWlzZTxudWxsPnx1bmRlZmluZWQge1xyXG5cdC8qIFRoaXMgcG9zdC1wcm9jZXNzb3IgaXMgY2FsbGVkXHJcbiAgICAgKiAgLSB3aGVuIHRoZSBkb2N1bWVudCBmaXJzdCBlbnRlcnMgUmVhZGluZyB2aWV3OiBvbiBldmVyeSBjaGlsZC1kaXYgb2YgcGFnZSBkaXZcclxuICAgICAqICAtIHdoZW4gc3dpdGNoaW5nIHRvIFJlYWRpbmcgdmlldzogb25jZSBwZXIgZGl2IHRoYXQgaGFzIGNoYW5nZWRcclxuICAgICAqICAtIHdoZW4gZXhwb3J0aW5nIHRvIFBERjogb24gdGhlIHdob2xlIHBhZ2UgZGl2ICovXHJcblxyXG5cdC8vIGNvbnNvbGUuZGVidWcoZWxlbWVudC5vdXRlckhUTUwpO1xyXG5cclxuXHQvKiBJbiBSZWFkaW5nIFZpZXcsIHRoZSBlbGVtZW50IHBhc3NlZCBpbiBJUyBhIHNpbmdsZSA8ZGl2PjtcclxuXHQgKiBpbiBQREYgb3V0cHV0LCBpdCBpcyB0aGUgUEFSRU5UIEVMRU1FTlQgb2YgYWxsIHRoZSA8ZGl2PnMuXHJcblx0ICogRmlyc3QgY2hlY2sgaWYgdGhlIGVsZW1lbnQgaGFzIGNsYXNzICdlbC1wJyAoUmVhZGluZy12aWV3IHBhcmFncmFwaClcclxuXHQgKiBvciAnbWFya2Rvd24tcmVuZGVyZWQnIChQREYtb3V0cHV0IHJvb3QgZWxlbWVudCkuXHJcbiAgICAgKiBJZiBuZWl0aGVyLCByZXR1cm4gaW1tZWRpYXRlbHkuICAqL1xyXG5cdGlmICghZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2VsLXAnKSAmJlxyXG5cdFx0IWVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlbC11bCcpICYmXHJcblx0XHQhZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2VsLW9sJykgJiZcclxuXHRcdCFlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnbWFya2Rvd24tcmVuZGVyZWQnKSlcclxuXHRcdHJldHVybjtcclxuXHJcblx0Ly8gaXQncyBvbmUgcGFyYWdyYXBoIChpbiBSZWFkaW5nIFZpZXcpLCBvciB0aGUgd2hvbGUgZG9jdW1lbnQgKFBERilcclxuXHRsZXQgcHJlQ2hlY2tlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG5cdGlmIChlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZWwtcCcpKSB7IC8vIFJlYWRpbmcgVmlldyBwYXJhZ3JhcGhcclxuXHRcdGlmICghZWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZC5pbm5lckhUTUwubWF0Y2goZGVmaW5pdGlvbk1hcmtlcikpXHJcblx0XHRcdHJldHVybjtcclxuXHRcdC8vIGNvbnNvbGUuZGVidWcoJ05vdyB3ZSB3aWxsIGNyZWF0ZSB0aGUgbW9kaWZpZWQgcGFyYWdyYXBoOicpO1xyXG5cdFx0Ly8gY29uc29sZS5kZWJ1ZyhlbGVtZW50LnRleHRDb250ZW50KTtcclxuXHRcdHByZUNoZWNrZWQgPSB0cnVlO1xyXG5cdH1cclxuXHRpZiAoZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2VsLXVsJykgfHwgZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2VsLW9sJykpIHsgLy8gbGlzdC4gSXMgdGhlcmUgYSA8ZGQ+IGF0IHRoZSBlbmQ/XHJcblx0XHRpZiAoIWVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQubGFzdEVsZW1lbnRDaGlsZC5pbm5lckhUTUwuY29udGFpbnMoJ1xcbicpKVxyXG5cdFx0XHRyZXR1cm47XHJcblx0XHRjb25zdCBvcmlnaW5hbEhUTUw6IHN0cmluZyA9IGVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQubGFzdEVsZW1lbnRDaGlsZFxyXG5cdFx0XHQuaW5uZXJIVE1MO1xyXG5cdFx0Y29uc3QgbmV3bGluZVBvczogbnVtYmVyID0gb3JpZ2luYWxIVE1MLmluZGV4T2YoJ1xcbicpO1xyXG5cdFx0ZWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZC5sYXN0RWxlbWVudENoaWxkLmlubmVySFRNTCA9XHJcblx0XHRcdG9yaWdpbmFsSFRNTC5zbGljZSgwLCBuZXdsaW5lUG9zKTtcclxuXHRcdGVsZW1lbnQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpKS5pbm5lckhUTUwgPVxyXG5cdFx0XHRvcmlnaW5hbEhUTUwuc2xpY2UobmV3bGluZVBvcysxKTtcclxuXHRcdHByZUNoZWNrZWQgPSB0cnVlO1xyXG5cdH1cclxuXHJcblx0LyogVGhpcyBQcm9taXNlIGdldHMgbm8gY29udGVudDsgdGhlIG9ubHkgdXNlIG9mIGl0cyBmdWxmaWxsbWVudFxyXG5cdCAqIGlzIHRvIHNpZ25hbCB0byB0aGUgcmVjZWl2aW5nIHByb2Nlc3MgdGhhdCB3ZSdyZSBkb25lXHJcblx0ICogZWRpdGluZyBpdHMgRE9NICovXHJcblx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXN1bHRDYWxsYmFjazogKHY6IGFueSkgPT4gdm9pZCkgPT4ge1xyXG5cdFx0bGV0IHBhcmFncmFwaHM6IEhUTUxQYXJhZ3JhcGhFbGVtZW50W107XHJcblx0XHRpZiAocHJlQ2hlY2tlZClcclxuXHRcdFx0cGFyYWdyYXBocyA9IFtlbGVtZW50Lmxhc3RFbGVtZW50Q2hpbGQgYXMgSFRNTFBhcmFncmFwaEVsZW1lbnRdO1xyXG5cdFx0ZWxzZVxyXG5cdFx0XHRwYXJhZ3JhcGhzID0gZWxlbWVudC5maW5kQWxsKCc6c2NvcGUgPiBkaXYgPiBwJykgYXMgSFRNTFBhcmFncmFwaEVsZW1lbnRbXTtcclxuXHJcblx0XHRwYXJhZ3JhcGhzLmZvckVhY2goKHBhcjogSFRNTFBhcmFncmFwaEVsZW1lbnQpID0+IHtcclxuXHRcdFx0aWYgKCFwcmVDaGVja2VkICYmICFwYXIuaW5uZXJIVE1MLm1hdGNoKGRlZmluaXRpb25NYXJrZXIpKSByZXR1cm47XHJcblxyXG5cdFx0XHQvLyBjcmVhdGUgdGhlIDxkbD4gZWxlbWVudCB0aGF0IGlzIHRvIHJlcGxhY2UgdGhlIHBhcmFncmFwaCBlbGVtZW50XHJcblx0XHRcdGNvbnN0IGRlZkxpc3Q6IEhUTUxETGlzdEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkbCcpO1xyXG5cdFx0XHRsZXQgc3RhcnRPZkxpbmU6IGJvb2xlYW4gPSB0cnVlO1xyXG5cdFx0XHRsZXQgaXRlbUVsZW1lbnQ6IEhUTUxFbGVtZW50O1xyXG5cclxuXHRcdFx0Ly8gZmlsbCB0aGUgbmV3IDxkbD4gd2l0aCBjbG9uZXMgb2YgdGhlIG5vZGVzIGluIHRoZSBvcmlnaW5hbCA8cD5cclxuXHRcdFx0cGFyLmNoaWxkTm9kZXMuZm9yRWFjaChub2RlID0+IHtcclxuXHRcdFx0XHRpZiAoJ3RhZ05hbWUnIGluIG5vZGUgJiYgbm9kZS50YWdOYW1lID09PSBcIkJSXCIpIHtcclxuXHRcdFx0XHRcdHN0YXJ0T2ZMaW5lID0gdHJ1ZTtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Y29uc3QgY2xvbmUgPSBub2RlLmNsb25lTm9kZSh0cnVlKTtcclxuXHRcdFx0XHRpZiAoc3RhcnRPZkxpbmUpIHtcclxuXHRcdFx0XHRcdGlmIChub2RlLnRleHRDb250ZW50Lm1hdGNoKGRlZmluaXRpb25NYXJrZXIpKSB7XHJcblx0XHRcdFx0XHRcdGl0ZW1FbGVtZW50ID0gZGVmTGlzdC5jcmVhdGVFbCgnZGQnKTtcclxuXHRcdFx0XHRcdFx0Y2xvbmUudGV4dENvbnRlbnQgPSBub2RlLnRleHRDb250ZW50LnNsaWNlKDQpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0ZWxzZSBpZiAobm9kZS50ZXh0Q29udGVudC5sZW5ndGggPD0gMTAwKSB7XHJcblx0XHRcdFx0XHRcdC8vIGEgdGVybSBjYW4ndCByZWFzb25hYmx5IGJlIGxvbmdlciB0aGFuIDEwMCBjaGFyc1xyXG5cdFx0XHRcdFx0XHRpdGVtRWxlbWVudCA9IGRlZkxpc3QuY3JlYXRlRWwoJ2R0Jyk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdFx0aXRlbUVsZW1lbnQgPSBkZWZMaXN0LmNyZWF0ZUVsKCdwJyk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRzdGFydE9mTGluZSA9IGZhbHNlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpdGVtRWxlbWVudC5hcHBlbmQoY2xvbmUpO1xyXG5cdFx0XHR9KVxyXG5cclxuXHRcdFx0Ly8gcHV0IHRoZSA8ZGw+IGluIHBsYWNlIG9mIHRoZSA8cD5cclxuXHRcdFx0cGFyLnJlcGxhY2VXaXRoKGRlZkxpc3QpO1xyXG5cdFx0fSlcclxuXHRcdHJlc3VsdENhbGxiYWNrKG51bGwpO1xyXG5cdH0pXHJcbn1cclxuXHJcbi8qIDQuIFRoZSBQbHVnaW5TZXR0aW5nVGFiIGZvciB0aGlzIHBsdWdpbidzIHNldHRpbmdzLiAqL1xyXG5jbGFzcyBEZWZpbml0aW9uTGlzdFNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcclxuXHRwcml2YXRlIHJlYWRvbmx5IG5hbWU6IHN0cmluZztcclxuXHRwcml2YXRlIHJlYWRvbmx5IHNldHRpbmdzOiBEZWZpbml0aW9uTGlzdFBsdWdpblNldHRpbmdzO1xyXG5cdHByaXZhdGUgcmVhZG9ubHkgY3NzRWxlbWVudDogSFRNTFN0eWxlRWxlbWVudDtcclxuXHRwcml2YXRlIHJlYWRvbmx5IHNhdmVDaGFuZ2VzOiAoZGF0YTogYW55KSA9PiBQcm9taXNlPHZvaWQ+O1xyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IERlZmluaXRpb25MaXN0UGx1Z2luKSB7XHJcblx0XHRzdXBlcihhcHAsIHBsdWdpbik7XHJcblx0XHR0aGlzLm5hbWUgPSBwbHVnaW4ubWFuaWZlc3QubmFtZTtcclxuXHRcdHRoaXMuc2V0dGluZ3MgPSBwbHVnaW4uc2V0dGluZ3M7XHJcblx0XHR0aGlzLmNzc0VsZW1lbnQgPSBwbHVnaW4uY3NzRWxlbWVudDtcclxuXHRcdHRoaXMuc2F2ZUNoYW5nZXMgPSBwbHVnaW4uc2F2ZURhdGEuYmluZChwbHVnaW4pO1xyXG5cdH1cclxuXHJcblx0ZGlzcGxheSgpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHtjb250YWluZXJFbH0gPSB0aGlzO1xyXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdzdHlsZScsIHt0ZXh0OiBgXHJcblx0XHRcdC5tb2QtdG9nZ2xlIHtcclxuXHRcdFx0XHRib3JkZXItdG9wOiBub25lO1xyXG5cdFx0XHR9XHJcblx0XHRcdC5leGFtcGxlIHtcclxuXHRcdFx0XHRtYXJnaW4tdG9wOiAxMHB4O1xyXG5cdFx0XHRcdGhlaWdodDogYXV0bztcclxuXHRcdFx0XHRwYWRkaW5nOiA0cHg7XHJcblx0XHRcdFx0YmFja2dyb3VuZC1jb2xvcjogcmdiYSgxNTAsIDE1MCwgMTUwLCAwLjEpO1xyXG5cdFx0XHR9XHJcblx0XHRcdC5leGFtcGxlID4gZGwge1xyXG5cdFx0XHRcdG1hcmdpbi1ibG9jazogMDtcclxuXHRcdFx0fVxyXG5cdFx0YH0pO1xyXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywge3RleHQ6IHRoaXMubmFtZX0pO1xyXG5cclxuXHRcdC8vIFRoZSBTZXR0aW5ncyBpdGVtc1xyXG5cdFx0bGV0IGNvbG9yU2V0dDogQ29sb3JDb21wb25lbnQ7XHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ1Rlcm1zJylcclxuXHRcdFx0LnNldERlc2MoJ0ZvbnQgY29sb3InKVxyXG5cdFx0XHQuYWRkQ29sb3JQaWNrZXIoY3AgPT4ge1xyXG5cdFx0XHRcdGNwLnNldFZhbHVlKHRoaXMuc2V0dGluZ3MuZHRjb2xvcilcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShuZXdDb2xvciA9PiB7XHJcblx0XHRcdFx0XHRcdGNvbnNvbGUuZGVidWcoJ2NvbG9yIHNldCB0bycsIG5ld0NvbG9yKTtcclxuXHRcdFx0XHRcdFx0dGhpcy5zZXR0aW5ncy5kdGNvbG9yID0gbmV3Q29sb3I7XHJcblx0XHRcdFx0XHRcdHRoaXMuY3NzRWxlbWVudC5zaGVldC5pbnNlcnRSdWxlKGA6cm9vdCB7XHJcblx0XHRcdFx0XHRcdFx0LS1kdGNvbG9yOiAke25ld0NvbG9yfTtcclxuXHRcdFx0XHRcdFx0fWAsIHRoaXMuY3NzRWxlbWVudC5zaGVldC5jc3NSdWxlcy5sZW5ndGgpO1xyXG5cdFx0XHRcdFx0XHR0aGlzLnNhdmVDaGFuZ2VzKHRoaXMuc2V0dGluZ3MpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0Y29sb3JTZXR0ID0gY3A7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHQpO1xyXG5cdFx0bGV0IHdlaWdodFNldHQ6IFRvZ2dsZUNvbXBvbmVudDtcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0RGVzYygnQm9sZCBmb250JylcclxuXHRcdFx0LmFkZFRvZ2dsZSh0b2cgPT4ge1xyXG5cdFx0XHRcdHRvZy5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzLmR0Ym9sZClcclxuXHRcdFx0XHQub25DaGFuZ2UobmV3V2VpZ2h0ID0+IHtcclxuXHRcdFx0XHRcdGNvbnNvbGUuZGVidWcoJ2JvbGQgc2V0IHRvJywgbmV3V2VpZ2h0KTtcclxuXHRcdFx0XHRcdHRoaXMuc2V0dGluZ3MuZHRib2xkID0gbmV3V2VpZ2h0O1xyXG5cdFx0XHRcdFx0dGhpcy5jc3NFbGVtZW50LnNoZWV0Lmluc2VydFJ1bGUoYDpyb290IHtcclxuXHRcdFx0XHRcdFx0LS1kdHdlaWdodDogJHtuZXdXZWlnaHQgPyAnYm9sZCcgOiAnaW5oZXJpdCdcclxuXHRcdFx0XHRcdH1gLCB0aGlzLmNzc0VsZW1lbnQuc2hlZXQuY3NzUnVsZXMubGVuZ3RoKTtcclxuXHRcdFx0XHRcdHRoaXMuc2F2ZUNoYW5nZXModGhpcy5zZXR0aW5ncyk7XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0XHR3ZWlnaHRTZXR0ID0gdG9nO1xyXG5cdFx0XHR9KTtcclxuXHRcdGxldCBzdHlsZVNldHQ6IFRvZ2dsZUNvbXBvbmVudDtcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0RGVzYygnSXRhbGljIGZvbnQnKVxyXG5cdFx0XHQuYWRkVG9nZ2xlKHRvZyA9PiB7XHJcblx0XHRcdFx0dG9nLnNldFZhbHVlKHRoaXMuc2V0dGluZ3MuZHRpdGFsaWMpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UobmV3U3R5bGUgPT4ge1xyXG5cdFx0XHRcdFx0XHRjb25zb2xlLmRlYnVnKCdpdGFsaWMgc2V0IHRvJywgbmV3U3R5bGUpO1xyXG5cdFx0XHRcdFx0XHR0aGlzLnNldHRpbmdzLmR0aXRhbGljID0gbmV3U3R5bGU7XHJcblx0XHRcdFx0XHRcdHRoaXMuY3NzRWxlbWVudC5zaGVldC5pbnNlcnRSdWxlKGA6cm9vdCB7XHJcblx0XHRcdFx0XHRcdC0tZHRzdHlsZTogJHtuZXdTdHlsZSA/ICdpdGFsaWMnIDogJ2luaGVyaXQnXHJcblx0XHRcdFx0XHRcdH1gLCB0aGlzLmNzc0VsZW1lbnQuc2hlZXQuY3NzUnVsZXMubGVuZ3RoKTtcclxuXHRcdFx0XHRcdFx0dGhpcy5zYXZlQ2hhbmdlcyh0aGlzLnNldHRpbmdzKTtcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0c3R5bGVTZXR0ID0gdG9nO1xyXG5cdFx0XHR9KTtcclxuXHRcdGxldCBpbmRlbnRTZXR0OiBTbGlkZXJDb21wb25lbnQ7XHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ0RlZmluaXRpb25zJylcclxuXHRcdFx0LnNldERlc2MoJ0luZGVudGF0aW9uIG9mIHRoZSBkZWZpbml0aW9ucycpXHJcblx0XHRcdC5hZGRTbGlkZXIoc2wgPT4ge1xyXG5cdFx0XHRcdHNsLnNldExpbWl0cygwLCA1MCwgMSlcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzLmRkaW5kZW50YXRpb24pXHJcblx0XHRcdFx0XHQuc2V0RHluYW1pY1Rvb2x0aXAoKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKHZhbHVlID0+IHtcclxuXHRcdFx0XHRcdFx0Y29uc29sZS5kZWJ1ZygnaW5kZW50YXRpb24gc2V0IHRvJywgdmFsdWUsICdweCcpO1xyXG5cdFx0XHRcdFx0XHR0aGlzLnNldHRpbmdzLmRkaW5kZW50YXRpb24gPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0dGhpcy5jc3NFbGVtZW50LnNoZWV0Lmluc2VydFJ1bGUoYDpyb290IHtcclxuXHRcdFx0XHRcdFx0XHQtLWRkaW5kZW50YXRpb246ICR7dmFsdWV9cHg7XHJcblx0XHRcdFx0XHRcdH1gLCB0aGlzLmNzc0VsZW1lbnQuc2hlZXQuY3NzUnVsZXMubGVuZ3RoKTtcclxuXHRcdFx0XHRcdFx0dGhpcy5zYXZlQ2hhbmdlcyh0aGlzLnNldHRpbmdzKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdGluZGVudFNldHQgPSBzbDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdCk7XHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LmFkZEJ1dHRvbihidCA9PiBidC5zZXRCdXR0b25UZXh0KCdSZXNldCB0byBkZWZhdWx0cycpXHJcblx0XHRcdFx0LnNldFRvb2x0aXAoJ0NvbG9yOiBkYXJrIGJsdWUsICM1NTU1NzdcXG5JbmRlbnRhdGlvbjogMzAgcGl4ZWxzJylcclxuXHRcdFx0XHQub25DbGljayhldnQgPT4ge1xyXG5cdFx0XHRcdFx0Y29sb3JTZXR0LnNldFZhbHVlKGRlZmF1bHRTZXR0aW5ncy5kdGNvbG9yKTtcclxuXHRcdFx0XHRcdHdlaWdodFNldHQuc2V0VmFsdWUoZGVmYXVsdFNldHRpbmdzLmR0Ym9sZCk7XHJcblx0XHRcdFx0XHRzdHlsZVNldHQuc2V0VmFsdWUoZGVmYXVsdFNldHRpbmdzLmR0aXRhbGljKTtcclxuXHRcdFx0XHRcdGluZGVudFNldHQuc2V0VmFsdWUoZGVmYXVsdFNldHRpbmdzLmRkaW5kZW50YXRpb24pO1xyXG5cdFx0XHRcdH0pXHJcblx0XHRcdCk7XHJcblxyXG5cdFx0Ly8gVGhlIHByZXZpZXcgdGhhdCBzaG93cyBob3cgdGhlIHNldHRpbmdzIHdvcmsgb3V0XHJcblx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgnZGl2Jywge2NsczogJ3NldHRpbmctaXRlbS1uYW1lJywgdGV4dDogJ1ByZXZpZXcnfSk7XHJcblx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgnZGl2Jywge2NsczogJ2V4YW1wbGUgbWFya2Rvd24tcHJldmlldy12aWV3J30pXHJcblx0XHQuaW5uZXJIVE1MID0gYFxyXG5cdFx0XHQ8ZGw+XHJcblx0XHRcdDxkdD5kZWZpbml0aW9uIGxpc3Q8L2R0PlxyXG5cdFx0XHQ8ZGQ+YSBsaXN0IG9mIHBhaXJzIDxpPih0ZXJtLCBkZWZpbml0aW9uKTwvaT4gd2hlcmUgZWFjaFxyXG5cdFx0XHR0ZXJtIGlzIG9uIGl0cyBvd24gbGluZSBhbmQgaXRzIGRlZmluaXRpb24gaXMgb24gdGhlIGxpbmUocykgYmVsb3cuXHJcblx0XHRcdFRoZSBkZWZpbml0aW9uIGlzIHVzdWFsbHkgaW5kZW50ZWQgdG8gc2V0IGl0IGFwYXJ0IGZyb20gdGhlIHRlcm08L2RkPlxyXG5cdFx0XHQ8ZHQ+aW5kZW50YXRpb248L2R0PlxyXG5cdFx0XHQ8ZGQ+d2hlbiBhIGxpbmUgb3IgcGFyYWdyYXBoIHN0YXJ0cyBhdCBhIGRpc3RhbmNlIGZyb20gdGhlIGxlZnQgbWFyZ2luPC9kZD5cclxuXHRcdFx0PC9kbD5cclxuXHRcdGA7XHJcblx0fVxyXG59XHJcbiJdLCJuYW1lcyI6WyJQbHVnaW4iLCJWaWV3UGx1Z2luIiwidmlldyIsIkRlY29yYXRpb24iLCJQ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
