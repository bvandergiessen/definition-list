'use strict';

var obsidian = require('obsidian');
var view = require('@codemirror/view');

/******************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/* global Reflect, Promise, SuppressedError, Symbol, Iterator */

var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
    return extendStatics(d, b);
};

function __extends(d, b) {
    if (typeof b !== "function" && b !== null)
        throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
    extendStatics(d, b);
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
}

function __awaiter(thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
}

function __generator(thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === "function" ? Iterator : Object).prototype);
    return g.next = verb(0), g["throw"] = verb(1), g["return"] = verb(2), typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (g && (g = 0, op[0] && (_ = 0)), _) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
}

typeof SuppressedError === "function" ? SuppressedError : function (error, suppressed, message) {
    var e = new Error(message);
    return e.name = "SuppressedError", e.error = error, e.suppressed = suppressed, e;
};

var defaultSettings = {
    dtcolor: '#555577',
    dtbold: true,
    dtitalic: false,
    ddindentation: 30
};
var definitionMarker = /(?:^|\n): {3}/;
var MARKER = ':   ';
/* 1. The main class, instantiated by Obsidian when the plugin loads */
var DefinitionListPlugin = /** @class */ (function (_super) {
    __extends(DefinitionListPlugin, _super);
    function DefinitionListPlugin() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.cssElement = document.createElement('style');
        return _this;
    }
    DefinitionListPlugin.prototype.onload = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _a, _b, _c, _d;
            return __generator(this, function (_e) {
                switch (_e.label) {
                    case 0:
                        console.log("Loading plugin ".concat(this.manifest.name, " v").concat(this.manifest.version));
                        _a = this;
                        _c = (_b = Object).assign;
                        _d = [{}, defaultSettings];
                        return [4 /*yield*/, this.loadData()];
                    case 1:
                        _a.settings = _c.apply(_b, _d.concat([_e.sent()]));
                        this.cssElement.textContent = ":root {\n\t\t\t--dtcolor: ".concat(this.settings.dtcolor, ";\n\t\t\t--dtweight: ").concat(this.settings.dtbold ? 'bold' : 'inherit', ";\n\t\t\t--dtstyle: ").concat(this.settings.dtitalic ? 'italic' : 'inherit', ";\n\t\t\t--ddindentation: ").concat(this.settings.ddindentation, "px;\t\n\t\t}");
                        document.head.appendChild(this.cssElement);
                        this.registerEditorExtension(liveUpdateDefinitionLists);
                        this.registerMarkdownPostProcessor(postProcessDefinitionLists, 99);
                        this.addSettingTab(new DefinitionListSettingTab(this.app, this));
                        return [2 /*return*/];
                }
            });
        });
    };
    DefinitionListPlugin.prototype.onunload = function () {
        console.log("Unloading plugin ".concat(this.manifest.name));
        if (this.cssElement)
            this.cssElement.remove();
    };
    return DefinitionListPlugin;
}(obsidian.Plugin));
/* 2. The ViewPlugin that works in Edit Mode. */
var liveUpdateDefinitionLists = view.ViewPlugin.fromClass(/** @class */ (function () {
    function class_1(view$1) {
        this.TERM_CLASS = 'view-dt';
        this.DEF_CLASS = 'view-dd';
        this.MARKER_CLASS = 'view-dd-marker';
        this.TERM_DEC = view.Decoration.line({ class: this.TERM_CLASS });
        this.DEF_DEC = view.Decoration.line({ class: this.DEF_CLASS });
        this.MARKER_DEC = view.Decoration.mark({ class: this.MARKER_CLASS });
        this.decorations = view.Decoration.none;
    }
    /* this.decorations should be a cumulative array of all the decorations (i.e.
    * class changes) we have chosen to add to line elements. So we always add to it
    * or modify an existing entry, rather than instantiating it anew.
    * Note that its type, DecorationSet, is a RangeSet of items of the underlying
    * type Decoration. Such a RangeSet object has properties and methods
    * .size (number of elements); .iter() with optional arg from, an offset that
    * lies in or before the first to be iterated; .update(RangeSetUpdate) to add
    * or remove them (returns the new version); .between(from, to, func) run func
    * on every Decoration between the offsets from and to; .map(ChangeDesc). */
    class_1.prototype.update = function (update) {
        var _a;
        if (update.docChanged || update.selectionSet) 
        /* other boolean properties that may be useful:
        *  .viewportChanged: viewport or visible ranges have changed
        *  .geometryChanged: editor size or the document itself changed
        *  .focusChanged: maybe some switch to another document, panel etc.;
        *  change in View between Editing and Rendering view; but
        *  when the document/Editing is activated, .geometryChanged is also true.
        */
        {
            var state = update.view.state;
            var cursorPos = state.selection.main.head;
            // the Line object that represents the current line of the document
            // note that state.doc is an object of class Text
            var currentLine = state.doc.lineAt(cursorPos);
            // the text of the following line
            var nextLineText = (state.doc.lines === currentLine.number) ? '' :
                state.doc.line(currentLine.number + 1).text;
            if (!currentLine.text.startsWith(MARKER) &&
                !nextLineText.startsWith(MARKER))
                return;
            // TODO: two terms before one definition
            // TODO: parse all definition lists when first opening Edit View, or at
            //  least those inside the viewport (+ update if update.viewportChanged)
            // TODO: implement removal of class when it's not a DL anymore after an edit
            // FIXME: empty <dt> keeps getting additional decorations
            // Perform a few checks before adding any decorations
            var lineClasses = ((_a = update.view
                .domAtPos(cursorPos).node.parentElement.closest('.cm-line')) === null || _a === void 0 ? void 0 : _a.classList)
                || { contains: function (s) { return false; } };
            // - No definition lists inside a code block
            if (lineClasses.contains('HyperMD-codeblock'))
                return;
            // - Don't add a class when it's already been done
            if (lineClasses.contains(this.DEF_CLASS) ||
                lineClasses.contains(this.TERM_CLASS))
                return;
            // Finally, as all criteria have been met, we get to work
            var newDecorations = currentLine.text.startsWith(MARKER)
                ? [
                    this.DEF_DEC.range(currentLine.from),
                    this.MARKER_DEC.range(currentLine.from, currentLine.from + 4)
                ] : [
                this.TERM_DEC.range(currentLine.from)
            ];
            this.decorations = this.decorations.update({ add: newDecorations });
            console.debug(this.decorations.size, 'decorations');
            /* the argument for .update is of class RangeSetUpdate<Decoration>,
            * and RangeSetUpdate is a typedef of an Object with optional
            * property .add of class readonly Range<Decoration>; that in turn has
            * instance properties from, to, and the Decoration.
            * You can create a Range<Decoration> by creating a Decoration and
            * applying its .range method (inherited from its superclass RangeValue).
            * Note that .update doesn't modify the instance but returns it. */
        }
        // else if (update.viewportChanged) console.log('viewport changed');
        // else if (update.geometryChanged) console.log('geometry changed');
    };
    return class_1;
}()), {
    decorations: function (v) { return v.decorations; },
});
/* 3. The MarkdownPostProcessor that prepares Reading View and PDF export. */
var postProcessDefinitionLists = function (element, context) {
    /* This post-processor is called
     *  - when the document first enters Reading view: on every child-div of page div
     *  - when switching to Reading view: once per div that has changed
     *  - when exporting to PDF: on the whole page div */
    console.debug(element.outerHTML);
    /* In Reading View, the element passed in IS a single <div>;
     * in PDF output, it is the PARENT ELEMENT of all the <div>s.
     * First check if the element has class 'el-p' (Reading-view paragraph)
     * or 'markdown-rendered' (PDF-output root element).
     * If neither, return immediately.  */
    if (!element.classList.contains('el-p') &&
        !element.classList.contains('el-ul') &&
        !element.classList.contains('markdown-rendered'))
        return;
    // it's one paragraph (in Reading View), or the whole document (PDF)
    var preChecked = false;
    if (element.classList.contains('el-p')) { // Reading View paragraph
        if (!element.firstElementChild.innerHTML.match(definitionMarker))
            return;
        // console.debug('Now we will create the modified paragraph:');
        // console.debug(element.textContent);
        preChecked = true;
    }
    if (element.classList.contains('el-ul')) { // list. Is there a <dd> at the end?
        if (!element.firstElementChild.lastElementChild.innerHTML.contains('\n'))
            return;
        var originalHTML = element.firstElementChild.lastElementChild
            .innerHTML;
        var newlinePos = originalHTML.indexOf('\n');
        element.firstElementChild.lastElementChild.innerHTML =
            originalHTML.slice(0, newlinePos);
        element.appendChild(document.createElement('p')).innerHTML =
            originalHTML.slice(newlinePos + 1);
        preChecked = true;
    }
    /* This Promise gets no content; the only use of its fulfillment
     * is to signal to the receiving process that we're done
     * editing its DOM */
    return new Promise(function (resultCallback) {
        var paragraphs;
        if (preChecked)
            paragraphs = [element.lastElementChild];
        else
            paragraphs = element.findAll(':scope > div > p');
        paragraphs.forEach(function (par) {
            if (!preChecked && !par.innerHTML.match(definitionMarker))
                return;
            // create the <dl> element that is to replace the paragraph element
            var defList = document.createElement('dl');
            var startOfLine = true;
            var itemElement;
            // fill the new <dl> with clones of the nodes in the original <p>
            par.childNodes.forEach(function (node) {
                if ('tagName' in node && node.tagName === "BR") {
                    startOfLine = true;
                    return;
                }
                var clone = node.cloneNode(true);
                if (startOfLine) {
                    if (node.textContent.match(definitionMarker)) {
                        itemElement = defList.createEl('dd');
                        clone.textContent = node.textContent.slice(4);
                    }
                    else if (node.textContent.length <= 100) {
                        // a term can't reasonably be longer than 100 chars
                        itemElement = defList.createEl('dt');
                    }
                    else {
                        itemElement = defList.createEl('p');
                    }
                    startOfLine = false;
                }
                itemElement.append(clone);
            });
            // put the <dl> in place of the <p>
            par.replaceWith(defList);
        });
        resultCallback(null);
    });
};
/* 4. The PluginSettingTab for this plugin's settings. */
var DefinitionListSettingTab = /** @class */ (function (_super) {
    __extends(DefinitionListSettingTab, _super);
    function DefinitionListSettingTab(app, plugin) {
        var _this = _super.call(this, app, plugin) || this;
        _this.name = plugin.manifest.name;
        _this.settings = plugin.settings;
        _this.cssElement = plugin.cssElement;
        _this.saveChanges = plugin.saveData.bind(plugin);
        return _this;
    }
    DefinitionListSettingTab.prototype.display = function () {
        var _this = this;
        var containerEl = this.containerEl;
        containerEl.empty();
        containerEl.createEl('style', { text: "\n\t\t\t.mod-toggle {\n\t\t\t\tborder-top: none;\n\t\t\t}\n\t\t\t.example {\n\t\t\t\tmargin-top: 10px;\n\t\t\t\theight: auto;\n\t\t\t\tpadding: 4px;\n\t\t\t\tbackground-color: rgba(150, 150, 150, 0.1);\n\t\t\t}\n\t\t\t.example > dl {\n\t\t\t\tmargin-block: 0;\n\t\t\t}\n\t\t" });
        containerEl.createEl('h2', { text: this.name });
        // The Settings items
        var colorSett;
        new obsidian.Setting(containerEl)
            .setName('Terms')
            .setDesc('Font color')
            .addColorPicker(function (cp) {
            cp.setValue(_this.settings.dtcolor)
                .onChange(function (newColor) {
                console.debug('color set to', newColor);
                _this.settings.dtcolor = newColor;
                _this.cssElement.sheet.insertRule(":root {\n\t\t\t\t\t\t\t--dtcolor: ".concat(newColor, ";\n\t\t\t\t\t\t}"), _this.cssElement.sheet.cssRules.length);
                _this.saveChanges(_this.settings);
            });
            colorSett = cp;
        });
        var weightSett;
        new obsidian.Setting(containerEl)
            .setDesc('Bold font')
            .addToggle(function (tog) {
            tog.setValue(_this.settings.dtbold)
                .onChange(function (newWeight) {
                console.debug('bold set to', newWeight);
                _this.settings.dtbold = newWeight;
                _this.cssElement.sheet.insertRule(":root {\n\t\t\t\t\t\t--dtweight: ".concat(newWeight ? 'bold' : 'inherit'), _this.cssElement.sheet.cssRules.length);
                _this.saveChanges(_this.settings);
            });
            weightSett = tog;
        });
        var styleSett;
        new obsidian.Setting(containerEl)
            .setDesc('Italic font')
            .addToggle(function (tog) {
            tog.setValue(_this.settings.dtitalic)
                .onChange(function (newStyle) {
                console.debug('italic set to', newStyle);
                _this.settings.dtitalic = newStyle;
                _this.cssElement.sheet.insertRule(":root {\n\t\t\t\t\t\t--dtstyle: ".concat(newStyle ? 'italic' : 'inherit'), _this.cssElement.sheet.cssRules.length);
                _this.saveChanges(_this.settings);
            });
            styleSett = tog;
        });
        var indentSett;
        new obsidian.Setting(containerEl)
            .setName('Definitions')
            .setDesc('Indentation of the definitions')
            .addSlider(function (sl) {
            sl.setLimits(0, 50, 1)
                .setValue(_this.settings.ddindentation)
                .setDynamicTooltip()
                .onChange(function (value) {
                console.debug('indentation set to', value, 'px');
                _this.settings.ddindentation = value;
                _this.cssElement.sheet.insertRule(":root {\n\t\t\t\t\t\t\t--ddindentation: ".concat(value, "px;\n\t\t\t\t\t\t}"), _this.cssElement.sheet.cssRules.length);
                _this.saveChanges(_this.settings);
            });
            indentSett = sl;
        });
        new obsidian.Setting(containerEl)
            .addButton(function (bt) { return bt.setButtonText('Reset to defaults')
            .setTooltip('Color: dark blue, #555577\nIndentation: 30 pixels')
            .onClick(function (evt) {
            colorSett.setValue(defaultSettings.dtcolor);
            weightSett.setValue(defaultSettings.dtbold);
            styleSett.setValue(defaultSettings.dtitalic);
            indentSett.setValue(defaultSettings.ddindentation);
        }); });
        // The preview that shows how the settings work out
        containerEl.createEl('div', { cls: 'setting-item-name', text: 'Preview' });
        containerEl.createEl('div', { cls: 'example markdown-preview-view' })
            .innerHTML = "\n\t\t\t<dl>\n\t\t\t<dt>definition list</dt>\n\t\t\t<dd>a list of pairs <i>(term, definition)</i> where each\n\t\t\tterm is on its own line and its definition is on the line(s) below.\n\t\t\tThe definition is usually indented to set it apart from the term</dd>\n\t\t\t<dt>indentation</dt>\n\t\t\t<dd>when a line or paragraph starts at a distance from the left margin</dd>\n\t\t\t</dl>\n\t\t";
    };
    return DefinitionListSettingTab;
}(obsidian.PluginSettingTab));

module.exports = DefinitionListPlugin;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsibm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsIm1haW4udHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cclxuXHJcblBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueVxyXG5wdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuXHJcblxyXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIXHJcblJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWVxyXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXHJcbklORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTVxyXG5MT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUlxyXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXHJcblBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlLCBTdXBwcmVzc2VkRXJyb3IsIFN5bWJvbCwgSXRlcmF0b3IgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcclxuICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXHJcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xyXG4gICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fYXNzaWduID0gZnVuY3Rpb24oKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH1cclxuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZXN0KHMsIGUpIHtcclxuICAgIHZhciB0ID0ge307XHJcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICB0W3BdID0gc1twXTtcclxuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmluZGV4T2YocFtpXSkgPCAwICYmIE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzLCBwW2ldKSlcclxuICAgICAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgICAgIH1cclxuICAgIHJldHVybiB0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcGFyYW0ocGFyYW1JbmRleCwgZGVjb3JhdG9yKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXNEZWNvcmF0ZShjdG9yLCBkZXNjcmlwdG9ySW4sIGRlY29yYXRvcnMsIGNvbnRleHRJbiwgaW5pdGlhbGl6ZXJzLCBleHRyYUluaXRpYWxpemVycykge1xyXG4gICAgZnVuY3Rpb24gYWNjZXB0KGYpIHsgaWYgKGYgIT09IHZvaWQgMCAmJiB0eXBlb2YgZiAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRnVuY3Rpb24gZXhwZWN0ZWRcIik7IHJldHVybiBmOyB9XHJcbiAgICB2YXIga2luZCA9IGNvbnRleHRJbi5raW5kLCBrZXkgPSBraW5kID09PSBcImdldHRlclwiID8gXCJnZXRcIiA6IGtpbmQgPT09IFwic2V0dGVyXCIgPyBcInNldFwiIDogXCJ2YWx1ZVwiO1xyXG4gICAgdmFyIHRhcmdldCA9ICFkZXNjcmlwdG9ySW4gJiYgY3RvciA/IGNvbnRleHRJbltcInN0YXRpY1wiXSA/IGN0b3IgOiBjdG9yLnByb3RvdHlwZSA6IG51bGw7XHJcbiAgICB2YXIgZGVzY3JpcHRvciA9IGRlc2NyaXB0b3JJbiB8fCAodGFyZ2V0ID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGNvbnRleHRJbi5uYW1lKSA6IHt9KTtcclxuICAgIHZhciBfLCBkb25lID0gZmFsc2U7XHJcbiAgICBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG4gICAgICAgIHZhciBjb250ZXh0ID0ge307XHJcbiAgICAgICAgZm9yICh2YXIgcCBpbiBjb250ZXh0SW4pIGNvbnRleHRbcF0gPSBwID09PSBcImFjY2Vzc1wiID8ge30gOiBjb250ZXh0SW5bcF07XHJcbiAgICAgICAgZm9yICh2YXIgcCBpbiBjb250ZXh0SW4uYWNjZXNzKSBjb250ZXh0LmFjY2Vzc1twXSA9IGNvbnRleHRJbi5hY2Nlc3NbcF07XHJcbiAgICAgICAgY29udGV4dC5hZGRJbml0aWFsaXplciA9IGZ1bmN0aW9uIChmKSB7IGlmIChkb25lKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGFkZCBpbml0aWFsaXplcnMgYWZ0ZXIgZGVjb3JhdGlvbiBoYXMgY29tcGxldGVkXCIpOyBleHRyYUluaXRpYWxpemVycy5wdXNoKGFjY2VwdChmIHx8IG51bGwpKTsgfTtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gKDAsIGRlY29yYXRvcnNbaV0pKGtpbmQgPT09IFwiYWNjZXNzb3JcIiA/IHsgZ2V0OiBkZXNjcmlwdG9yLmdldCwgc2V0OiBkZXNjcmlwdG9yLnNldCB9IDogZGVzY3JpcHRvcltrZXldLCBjb250ZXh0KTtcclxuICAgICAgICBpZiAoa2luZCA9PT0gXCJhY2Nlc3NvclwiKSB7XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IHZvaWQgMCkgY29udGludWU7XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IG51bGwgfHwgdHlwZW9mIHJlc3VsdCAhPT0gXCJvYmplY3RcIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIk9iamVjdCBleHBlY3RlZFwiKTtcclxuICAgICAgICAgICAgaWYgKF8gPSBhY2NlcHQocmVzdWx0LmdldCkpIGRlc2NyaXB0b3IuZ2V0ID0gXztcclxuICAgICAgICAgICAgaWYgKF8gPSBhY2NlcHQocmVzdWx0LnNldCkpIGRlc2NyaXB0b3Iuc2V0ID0gXztcclxuICAgICAgICAgICAgaWYgKF8gPSBhY2NlcHQocmVzdWx0LmluaXQpKSBpbml0aWFsaXplcnMudW5zaGlmdChfKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoXyA9IGFjY2VwdChyZXN1bHQpKSB7XHJcbiAgICAgICAgICAgIGlmIChraW5kID09PSBcImZpZWxkXCIpIGluaXRpYWxpemVycy51bnNoaWZ0KF8pO1xyXG4gICAgICAgICAgICBlbHNlIGRlc2NyaXB0b3Jba2V5XSA9IF87XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHRhcmdldCkgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgY29udGV4dEluLm5hbWUsIGRlc2NyaXB0b3IpO1xyXG4gICAgZG9uZSA9IHRydWU7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19ydW5Jbml0aWFsaXplcnModGhpc0FyZywgaW5pdGlhbGl6ZXJzLCB2YWx1ZSkge1xyXG4gICAgdmFyIHVzZVZhbHVlID0gYXJndW1lbnRzLmxlbmd0aCA+IDI7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGluaXRpYWxpemVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHZhbHVlID0gdXNlVmFsdWUgPyBpbml0aWFsaXplcnNbaV0uY2FsbCh0aGlzQXJnLCB2YWx1ZSkgOiBpbml0aWFsaXplcnNbaV0uY2FsbCh0aGlzQXJnKTtcclxuICAgIH1cclxuICAgIHJldHVybiB1c2VWYWx1ZSA/IHZhbHVlIDogdm9pZCAwO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcHJvcEtleSh4KSB7XHJcbiAgICByZXR1cm4gdHlwZW9mIHggPT09IFwic3ltYm9sXCIgPyB4IDogXCJcIi5jb25jYXQoeCk7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19zZXRGdW5jdGlvbk5hbWUoZiwgbmFtZSwgcHJlZml4KSB7XHJcbiAgICBpZiAodHlwZW9mIG5hbWUgPT09IFwic3ltYm9sXCIpIG5hbWUgPSBuYW1lLmRlc2NyaXB0aW9uID8gXCJbXCIuY29uY2F0KG5hbWUuZGVzY3JpcHRpb24sIFwiXVwiKSA6IFwiXCI7XHJcbiAgICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KGYsIFwibmFtZVwiLCB7IGNvbmZpZ3VyYWJsZTogdHJ1ZSwgdmFsdWU6IHByZWZpeCA/IFwiXCIuY29uY2F0KHByZWZpeCwgXCIgXCIsIG5hbWUpIDogbmFtZSB9KTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZ2VuZXJhdG9yKHRoaXNBcmcsIGJvZHkpIHtcclxuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGcgPSBPYmplY3QuY3JlYXRlKCh0eXBlb2YgSXRlcmF0b3IgPT09IFwiZnVuY3Rpb25cIiA/IEl0ZXJhdG9yIDogT2JqZWN0KS5wcm90b3R5cGUpO1xyXG4gICAgcmV0dXJuIGcubmV4dCA9IHZlcmIoMCksIGdbXCJ0aHJvd1wiXSA9IHZlcmIoMSksIGdbXCJyZXR1cm5cIl0gPSB2ZXJiKDIpLCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcclxuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XHJcbiAgICAgICAgd2hpbGUgKGcgJiYgKGcgPSAwLCBvcFswXSAmJiAoXyA9IDApKSwgXykgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xyXG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XHJcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxyXG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fY3JlYXRlQmluZGluZyA9IE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobSwgayk7XHJcbiAgICBpZiAoIWRlc2MgfHwgKFwiZ2V0XCIgaW4gZGVzYyA/ICFtLl9fZXNNb2R1bGUgOiBkZXNjLndyaXRhYmxlIHx8IGRlc2MuY29uZmlndXJhYmxlKSkge1xyXG4gICAgICAgIGRlc2MgPSB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH07XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIGRlc2MpO1xyXG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIG9bazJdID0gbVtrXTtcclxufSk7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHBvcnRTdGFyKG0sIG8pIHtcclxuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKHAgIT09IFwiZGVmYXVsdFwiICYmICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobywgcCkpIF9fY3JlYXRlQmluZGluZyhvLCBtLCBwKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fdmFsdWVzKG8pIHtcclxuICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7XHJcbiAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTtcclxuICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gXCJudW1iZXJcIikgcmV0dXJuIHtcclxuICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gXCJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLlwiIDogXCJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZWFkKG8sIG4pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcclxuICAgIGlmICghbSkgcmV0dXJuIG87XHJcbiAgICB2YXIgaSA9IG0uY2FsbChvKSwgciwgYXIgPSBbXSwgZTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHsgaWYgKGUpIHRocm93IGUuZXJyb3I7IH1cclxuICAgIH1cclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuLyoqIEBkZXByZWNhdGVkICovXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZCgpIHtcclxuICAgIGZvciAodmFyIGFyID0gW10sIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIGFyID0gYXIuY29uY2F0KF9fcmVhZChhcmd1bWVudHNbaV0pKTtcclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuLyoqIEBkZXByZWNhdGVkICovXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZEFycmF5cygpIHtcclxuICAgIGZvciAodmFyIHMgPSAwLCBpID0gMCwgaWwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgaWw7IGkrKykgcyArPSBhcmd1bWVudHNbaV0ubGVuZ3RoO1xyXG4gICAgZm9yICh2YXIgciA9IEFycmF5KHMpLCBrID0gMCwgaSA9IDA7IGkgPCBpbDsgaSsrKVxyXG4gICAgICAgIGZvciAodmFyIGEgPSBhcmd1bWVudHNbaV0sIGogPSAwLCBqbCA9IGEubGVuZ3RoOyBqIDwgamw7IGorKywgaysrKVxyXG4gICAgICAgICAgICByW2tdID0gYVtqXTtcclxuICAgIHJldHVybiByO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWRBcnJheSh0bywgZnJvbSwgcGFjaykge1xyXG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICBpZiAoYXIgfHwgIShpIGluIGZyb20pKSB7XHJcbiAgICAgICAgICAgIGlmICghYXIpIGFyID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSwgMCwgaSk7XHJcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXQodikge1xyXG4gICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBfX2F3YWl0ID8gKHRoaXMudiA9IHYsIHRoaXMpIDogbmV3IF9fYXdhaXQodik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jR2VuZXJhdG9yKHRoaXNBcmcsIF9hcmd1bWVudHMsIGdlbmVyYXRvcikge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBnID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pLCBpLCBxID0gW107XHJcbiAgICByZXR1cm4gaSA9IE9iamVjdC5jcmVhdGUoKHR5cGVvZiBBc3luY0l0ZXJhdG9yID09PSBcImZ1bmN0aW9uXCIgPyBBc3luY0l0ZXJhdG9yIDogT2JqZWN0KS5wcm90b3R5cGUpLCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIsIGF3YWl0UmV0dXJuKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gYXdhaXRSZXR1cm4oZikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh2KS50aGVuKGYsIHJlamVjdCk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpZiAoZ1tuXSkgeyBpW25dID0gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChhLCBiKSB7IHEucHVzaChbbiwgdiwgYSwgYl0pID4gMSB8fCByZXN1bWUobiwgdik7IH0pOyB9OyBpZiAoZikgaVtuXSA9IGYoaVtuXSk7IH0gfVxyXG4gICAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxyXG4gICAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyB9XHJcbiAgICBmdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7IHJlc3VtZShcIm5leHRcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jRGVsZWdhdG9yKG8pIHtcclxuICAgIHZhciBpLCBwO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiLCBmdW5jdGlvbiAoZSkgeyB0aHJvdyBlOyB9KSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpW25dID0gb1tuXSA/IGZ1bmN0aW9uICh2KSB7IHJldHVybiAocCA9ICFwKSA/IHsgdmFsdWU6IF9fYXdhaXQob1tuXSh2KSksIGRvbmU6IGZhbHNlIH0gOiBmID8gZih2KSA6IHY7IH0gOiBmOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jVmFsdWVzKG8pIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgbSA9IG9bU3ltYm9sLmFzeW5jSXRlcmF0b3JdLCBpO1xyXG4gICAgcmV0dXJuIG0gPyBtLmNhbGwobykgOiAobyA9IHR5cGVvZiBfX3ZhbHVlcyA9PT0gXCJmdW5jdGlvblwiID8gX192YWx1ZXMobykgOiBvW1N5bWJvbC5pdGVyYXRvcl0oKSwgaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGkpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlbbl0gPSBvW25dICYmIGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHYgPSBvW25dKHYpLCBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCB2LmRvbmUsIHYudmFsdWUpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgZCwgdikgeyBQcm9taXNlLnJlc29sdmUodikudGhlbihmdW5jdGlvbih2KSB7IHJlc29sdmUoeyB2YWx1ZTogdiwgZG9uZTogZCB9KTsgfSwgcmVqZWN0KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tYWtlVGVtcGxhdGVPYmplY3QoY29va2VkLCByYXcpIHtcclxuICAgIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvb2tlZCwgXCJyYXdcIiwgeyB2YWx1ZTogcmF3IH0pOyB9IGVsc2UgeyBjb29rZWQucmF3ID0gcmF3OyB9XHJcbiAgICByZXR1cm4gY29va2VkO1xyXG59O1xyXG5cclxudmFyIF9fc2V0TW9kdWxlRGVmYXVsdCA9IE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgdikge1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiZGVmYXVsdFwiLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2IH0pO1xyXG59KSA6IGZ1bmN0aW9uKG8sIHYpIHtcclxuICAgIG9bXCJkZWZhdWx0XCJdID0gdjtcclxufTtcclxuXHJcbnZhciBvd25LZXlzID0gZnVuY3Rpb24obykge1xyXG4gICAgb3duS2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzIHx8IGZ1bmN0aW9uIChvKSB7XHJcbiAgICAgICAgdmFyIGFyID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgayBpbiBvKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG8sIGspKSBhclthci5sZW5ndGhdID0gaztcclxuICAgICAgICByZXR1cm4gYXI7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIG93bktleXMobyk7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnRTdGFyKG1vZCkge1xyXG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcclxuICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayA9IG93bktleXMobW9kKSwgaSA9IDA7IGkgPCBrLmxlbmd0aDsgaSsrKSBpZiAoa1tpXSAhPT0gXCJkZWZhdWx0XCIpIF9fY3JlYXRlQmluZGluZyhyZXN1bHQsIG1vZCwga1tpXSk7XHJcbiAgICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0RGVmYXVsdChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgZGVmYXVsdDogbW9kIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHJlY2VpdmVyLCBzdGF0ZSwga2luZCwgZikge1xyXG4gICAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgZ2V0dGVyXCIpO1xyXG4gICAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgcmVhZCBwcml2YXRlIG1lbWJlciBmcm9tIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7XHJcbiAgICByZXR1cm4ga2luZCA9PT0gXCJtXCIgPyBmIDoga2luZCA9PT0gXCJhXCIgPyBmLmNhbGwocmVjZWl2ZXIpIDogZiA/IGYudmFsdWUgOiBzdGF0ZS5nZXQocmVjZWl2ZXIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZFNldChyZWNlaXZlciwgc3RhdGUsIHZhbHVlLCBraW5kLCBmKSB7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJtXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIG1ldGhvZCBpcyBub3Qgd3JpdGFibGVcIik7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJhXCIgJiYgIWYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBzZXR0ZXJcIik7XHJcbiAgICBpZiAodHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciAhPT0gc3RhdGUgfHwgIWYgOiAhc3RhdGUuaGFzKHJlY2VpdmVyKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCB3cml0ZSBwcml2YXRlIG1lbWJlciB0byBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO1xyXG4gICAgcmV0dXJuIChraW5kID09PSBcImFcIiA/IGYuY2FsbChyZWNlaXZlciwgdmFsdWUpIDogZiA/IGYudmFsdWUgPSB2YWx1ZSA6IHN0YXRlLnNldChyZWNlaXZlciwgdmFsdWUpKSwgdmFsdWU7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkSW4oc3RhdGUsIHJlY2VpdmVyKSB7XHJcbiAgICBpZiAocmVjZWl2ZXIgPT09IG51bGwgfHwgKHR5cGVvZiByZWNlaXZlciAhPT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgcmVjZWl2ZXIgIT09IFwiZnVuY3Rpb25cIikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgdXNlICdpbicgb3BlcmF0b3Igb24gbm9uLW9iamVjdFwiKTtcclxuICAgIHJldHVybiB0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyID09PSBzdGF0ZSA6IHN0YXRlLmhhcyhyZWNlaXZlcik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FkZERpc3Bvc2FibGVSZXNvdXJjZShlbnYsIHZhbHVlLCBhc3luYykge1xyXG4gICAgaWYgKHZhbHVlICE9PSBudWxsICYmIHZhbHVlICE9PSB2b2lkIDApIHtcclxuICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSBcIm9iamVjdFwiICYmIHR5cGVvZiB2YWx1ZSAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiT2JqZWN0IGV4cGVjdGVkLlwiKTtcclxuICAgICAgICB2YXIgZGlzcG9zZSwgaW5uZXI7XHJcbiAgICAgICAgaWYgKGFzeW5jKSB7XHJcbiAgICAgICAgICAgIGlmICghU3ltYm9sLmFzeW5jRGlzcG9zZSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0Rpc3Bvc2UgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgICAgICAgICBkaXNwb3NlID0gdmFsdWVbU3ltYm9sLmFzeW5jRGlzcG9zZV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChkaXNwb3NlID09PSB2b2lkIDApIHtcclxuICAgICAgICAgICAgaWYgKCFTeW1ib2wuZGlzcG9zZSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5kaXNwb3NlIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgICAgICAgICAgZGlzcG9zZSA9IHZhbHVlW1N5bWJvbC5kaXNwb3NlXTtcclxuICAgICAgICAgICAgaWYgKGFzeW5jKSBpbm5lciA9IGRpc3Bvc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlb2YgZGlzcG9zZSAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiT2JqZWN0IG5vdCBkaXNwb3NhYmxlLlwiKTtcclxuICAgICAgICBpZiAoaW5uZXIpIGRpc3Bvc2UgPSBmdW5jdGlvbigpIHsgdHJ5IHsgaW5uZXIuY2FsbCh0aGlzKTsgfSBjYXRjaCAoZSkgeyByZXR1cm4gUHJvbWlzZS5yZWplY3QoZSk7IH0gfTtcclxuICAgICAgICBlbnYuc3RhY2sucHVzaCh7IHZhbHVlOiB2YWx1ZSwgZGlzcG9zZTogZGlzcG9zZSwgYXN5bmM6IGFzeW5jIH0pO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoYXN5bmMpIHtcclxuICAgICAgICBlbnYuc3RhY2sucHVzaCh7IGFzeW5jOiB0cnVlIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHZhbHVlO1xyXG5cclxufVxyXG5cclxudmFyIF9TdXBwcmVzc2VkRXJyb3IgPSB0eXBlb2YgU3VwcHJlc3NlZEVycm9yID09PSBcImZ1bmN0aW9uXCIgPyBTdXBwcmVzc2VkRXJyb3IgOiBmdW5jdGlvbiAoZXJyb3IsIHN1cHByZXNzZWQsIG1lc3NhZ2UpIHtcclxuICAgIHZhciBlID0gbmV3IEVycm9yKG1lc3NhZ2UpO1xyXG4gICAgcmV0dXJuIGUubmFtZSA9IFwiU3VwcHJlc3NlZEVycm9yXCIsIGUuZXJyb3IgPSBlcnJvciwgZS5zdXBwcmVzc2VkID0gc3VwcHJlc3NlZCwgZTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2Rpc3Bvc2VSZXNvdXJjZXMoZW52KSB7XHJcbiAgICBmdW5jdGlvbiBmYWlsKGUpIHtcclxuICAgICAgICBlbnYuZXJyb3IgPSBlbnYuaGFzRXJyb3IgPyBuZXcgX1N1cHByZXNzZWRFcnJvcihlLCBlbnYuZXJyb3IsIFwiQW4gZXJyb3Igd2FzIHN1cHByZXNzZWQgZHVyaW5nIGRpc3Bvc2FsLlwiKSA6IGU7XHJcbiAgICAgICAgZW52Lmhhc0Vycm9yID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIHZhciByLCBzID0gMDtcclxuICAgIGZ1bmN0aW9uIG5leHQoKSB7XHJcbiAgICAgICAgd2hpbGUgKHIgPSBlbnYuc3RhY2sucG9wKCkpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGlmICghci5hc3luYyAmJiBzID09PSAxKSByZXR1cm4gcyA9IDAsIGVudi5zdGFjay5wdXNoKHIpLCBQcm9taXNlLnJlc29sdmUoKS50aGVuKG5leHQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHIuZGlzcG9zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSByLmRpc3Bvc2UuY2FsbChyLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoci5hc3luYykgcmV0dXJuIHMgfD0gMiwgUHJvbWlzZS5yZXNvbHZlKHJlc3VsdCkudGhlbihuZXh0LCBmdW5jdGlvbihlKSB7IGZhaWwoZSk7IHJldHVybiBuZXh0KCk7IH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBzIHw9IDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIGZhaWwoZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHMgPT09IDEpIHJldHVybiBlbnYuaGFzRXJyb3IgPyBQcm9taXNlLnJlamVjdChlbnYuZXJyb3IpIDogUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgaWYgKGVudi5oYXNFcnJvcikgdGhyb3cgZW52LmVycm9yO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5leHQoKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmV3cml0ZVJlbGF0aXZlSW1wb3J0RXh0ZW5zaW9uKHBhdGgsIHByZXNlcnZlSnN4KSB7XHJcbiAgICBpZiAodHlwZW9mIHBhdGggPT09IFwic3RyaW5nXCIgJiYgL15cXC5cXC4/XFwvLy50ZXN0KHBhdGgpKSB7XHJcbiAgICAgICAgcmV0dXJuIHBhdGgucmVwbGFjZSgvXFwuKHRzeCkkfCgoPzpcXC5kKT8pKCg/OlxcLlteLi9dKz8pPylcXC4oW2NtXT8pdHMkL2ksIGZ1bmN0aW9uIChtLCB0c3gsIGQsIGV4dCwgY20pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRzeCA/IHByZXNlcnZlSnN4ID8gXCIuanN4XCIgOiBcIi5qc1wiIDogZCAmJiAoIWV4dCB8fCAhY20pID8gbSA6IChkICsgZXh0ICsgXCIuXCIgKyBjbS50b0xvd2VyQ2FzZSgpICsgXCJqc1wiKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBwYXRoO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCB7XHJcbiAgICBfX2V4dGVuZHM6IF9fZXh0ZW5kcyxcclxuICAgIF9fYXNzaWduOiBfX2Fzc2lnbixcclxuICAgIF9fcmVzdDogX19yZXN0LFxyXG4gICAgX19kZWNvcmF0ZTogX19kZWNvcmF0ZSxcclxuICAgIF9fcGFyYW06IF9fcGFyYW0sXHJcbiAgICBfX2VzRGVjb3JhdGU6IF9fZXNEZWNvcmF0ZSxcclxuICAgIF9fcnVuSW5pdGlhbGl6ZXJzOiBfX3J1bkluaXRpYWxpemVycyxcclxuICAgIF9fcHJvcEtleTogX19wcm9wS2V5LFxyXG4gICAgX19zZXRGdW5jdGlvbk5hbWU6IF9fc2V0RnVuY3Rpb25OYW1lLFxyXG4gICAgX19tZXRhZGF0YTogX19tZXRhZGF0YSxcclxuICAgIF9fYXdhaXRlcjogX19hd2FpdGVyLFxyXG4gICAgX19nZW5lcmF0b3I6IF9fZ2VuZXJhdG9yLFxyXG4gICAgX19jcmVhdGVCaW5kaW5nOiBfX2NyZWF0ZUJpbmRpbmcsXHJcbiAgICBfX2V4cG9ydFN0YXI6IF9fZXhwb3J0U3RhcixcclxuICAgIF9fdmFsdWVzOiBfX3ZhbHVlcyxcclxuICAgIF9fcmVhZDogX19yZWFkLFxyXG4gICAgX19zcHJlYWQ6IF9fc3ByZWFkLFxyXG4gICAgX19zcHJlYWRBcnJheXM6IF9fc3ByZWFkQXJyYXlzLFxyXG4gICAgX19zcHJlYWRBcnJheTogX19zcHJlYWRBcnJheSxcclxuICAgIF9fYXdhaXQ6IF9fYXdhaXQsXHJcbiAgICBfX2FzeW5jR2VuZXJhdG9yOiBfX2FzeW5jR2VuZXJhdG9yLFxyXG4gICAgX19hc3luY0RlbGVnYXRvcjogX19hc3luY0RlbGVnYXRvcixcclxuICAgIF9fYXN5bmNWYWx1ZXM6IF9fYXN5bmNWYWx1ZXMsXHJcbiAgICBfX21ha2VUZW1wbGF0ZU9iamVjdDogX19tYWtlVGVtcGxhdGVPYmplY3QsXHJcbiAgICBfX2ltcG9ydFN0YXI6IF9faW1wb3J0U3RhcixcclxuICAgIF9faW1wb3J0RGVmYXVsdDogX19pbXBvcnREZWZhdWx0LFxyXG4gICAgX19jbGFzc1ByaXZhdGVGaWVsZEdldDogX19jbGFzc1ByaXZhdGVGaWVsZEdldCxcclxuICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQ6IF9fY2xhc3NQcml2YXRlRmllbGRTZXQsXHJcbiAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkSW46IF9fY2xhc3NQcml2YXRlRmllbGRJbixcclxuICAgIF9fYWRkRGlzcG9zYWJsZVJlc291cmNlOiBfX2FkZERpc3Bvc2FibGVSZXNvdXJjZSxcclxuICAgIF9fZGlzcG9zZVJlc291cmNlczogX19kaXNwb3NlUmVzb3VyY2VzLFxyXG4gICAgX19yZXdyaXRlUmVsYXRpdmVJbXBvcnRFeHRlbnNpb246IF9fcmV3cml0ZVJlbGF0aXZlSW1wb3J0RXh0ZW5zaW9uLFxyXG59O1xyXG4iLCJpbXBvcnQge1xyXG5cdEFwcCwgUGx1Z2luLCBNYXJrZG93blBvc3RQcm9jZXNzb3IsIE1hcmtkb3duU2VjdGlvbkluZm9ybWF0aW9uLFxyXG5cdFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsIE1hcmtkb3duVmlldywgQ29sb3JDb21wb25lbnQsIFNsaWRlckNvbXBvbmVudCxcclxuXHRQbHVnaW5NYW5pZmVzdCwgVG9nZ2xlQ29tcG9uZW50XHJcbn0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQge1ZpZXdQbHVnaW4sIFZpZXdVcGRhdGUsIEVkaXRvclZpZXcsIERlY29yYXRpb25TZXQsIERlY29yYXRpb259IGZyb20gJ0Bjb2RlbWlycm9yL3ZpZXcnO1xyXG5cclxuLyogRGVmaW5pdGlvbiBMaXN0IHBsdWdpbiBmb3IgT2JzaWRpYW5cclxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICogVGhlIHBsdWdpbiBoYXMgZm91ciBtYWluIGNvbXBvbmVudHM6XHJcbiAqICAxLiB0aGUgZGVmYXVsdCBleHBvcnQsIHRoZSBjbGFzcyBEZWZpbml0aW9uTGlzdFBsdWdpblxyXG4gKiAgICAgdGhhdCBpcyBpbnN0YW50aWF0ZWQgb25jZSwgd2hlbiB0aGUgcGx1Z2luIGxvYWRzLiBJdFxyXG4gKiAgICAgcmVnaXN0ZXJzIGl0ZW1zIDIsIDMgYW5kIDQgc28gT2JzaWRpYW4gY2FuIHVzZSB0aGVtLlxyXG4gKiAgMi4gdGhlIGNvbnN0YW50IGxpdmVVcGRhdGVEZWZpbml0aW9uTGlzdHMsIGFuIGluc3RhbmNlXHJcbiAqICAgICBvZiB0aGUgVmlld1BsdWdpbiBjbGFzcy4gSW5zaWRlIGl0LCBhbiBhbm9ueW1vdXMgY2xhc3NcclxuICogICAgIGlzIGVtYmVkZGVkIHRoYXQgaXMgaW5zdGFudGlhdGVkIHdoZW4gYSBkb2N1bWVudCBpc1xyXG4gKiAgICAgb3BlbmVkIChvciB0aGUgZmlyc3QgdGltZSB0aGUgdXNlciBzd2l0Y2hlcyB0byBpdCk6IGV2ZXJ5XHJcbiAqICAgICBvcGVuIGRvY3VtZW50IGhhcyBpdHMgb3duIGluc3RhbmNlIG9mIHRoYXQgZW1iZWRkZWQgY2xhc3MuXHJcbiAqICAgICBJdHMgLnVwZGF0ZSBtZXRob2QgaXMgY2FsbGVkIGluIEVkaXQgTW9kZSB3aGVuZXZlciBhbnl0aGluZ1xyXG4gKiAgICAgaGFwcGVucyAtIGVkaXRzLCBzY3JvbGxpbmcsIGN1cnNvciBtb3ZlbWVudCAtIHdpdGggY29udGVudHNcclxuICogICAgIGFuZCBkZXRhaWxzIG9mIHRoZSBkb2N1bWVudCBhbmQgZWRpdG9yIHdpbmRvdyBwYXNzZWQgaW47XHJcbiAqICAgICBpdCB0ZWxscyB0aGUgZWRpdG9yIENvZGVNaXJyb3IgdG8gYWRkICdkZWNvcmF0aW9ucycgKGNsYXNzZXNcclxuICogICAgIGFuZCBzcGFucykgdG8gdGhlIGNvbnRlbnQsIHNvIGl0IHRha2VzIG9uIHRoZSBjb3JyZWN0IGFwcGVhcmFuY2VcclxuICogIDMuIHRoZSBmdW5jdGlvbiBwb3N0UHJvY2Vzc0RlZmluaXRpb25MaXN0cywgd2hpY2ggYWRoZXJlcyB0byB0aGVcclxuICogICAgIE1hcmtkb3duUG9zdFByb2Nlc3NvciBpbnRlcmZhY2UuIFdoZW4gYSBkb2N1bWVudCBlbnRlcnNcclxuICogICAgIFJlYWRpbmcgVmlldywgdGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgb24gZXZlcnkgcGFyYWdyYXBoXHJcbiAqICAgICBjaGFuZ2VkIHNpbmNlIHRoZSBsYXN0IHRpbWUgaW4gUmVhZGluZyBWaWV3LiBJdCdzIGNhbGxlZFxyXG4gKiAgICAgb25jZSB3aGVuIHRoZSBkb2N1bWVudCBpcyBzYXZlZCBhcyBhIFBERi5cclxuICogIDQuIHRoZSBjbGFzcyBEZWZpbml0aW9uTGlzdFNldHRpbmdUYWIsIHRoYXQgaXMgaW5zdGFudGlhdGVkXHJcbiAqICAgICBvbmNlLCB3aGVuIHRoZSBwbHVnaW4gbG9hZHMuIEl0IHNldHMgdXAgdGhlIHNldHRpbmdzIHBhZ2VcclxuICogICAgIGFuZCBzYXZlcyBjaGFuZ2VkIHNldHRpbmdzLlxyXG4gKi9cclxuXHJcbmludGVyZmFjZSBEZWZpbml0aW9uTGlzdFBsdWdpblNldHRpbmdzIHtcclxuXHRkdGNvbG9yOiBzdHJpbmc7XHJcblx0ZHRib2xkOiBib29sZWFuO1xyXG5cdGR0aXRhbGljOiBib29sZWFuO1xyXG5cdGRkaW5kZW50YXRpb246IG51bWJlcjtcclxufVxyXG5jb25zdCBkZWZhdWx0U2V0dGluZ3M6IERlZmluaXRpb25MaXN0UGx1Z2luU2V0dGluZ3MgPSB7XHJcblx0ZHRjb2xvcjogJyM1NTU1NzcnLFxyXG5cdGR0Ym9sZDogdHJ1ZSxcclxuXHRkdGl0YWxpYzogZmFsc2UsXHJcblx0ZGRpbmRlbnRhdGlvbjogMzBcclxufVxyXG5jb25zdCBkZWZpbml0aW9uTWFya2VyOiBSZWdFeHAgPSAvKD86XnxcXG4pOiB7M30vO1xyXG5jb25zdCBNQVJLRVI6IHN0cmluZyA9ICc6ICAgJztcclxuXHJcbi8qIDEuIFRoZSBtYWluIGNsYXNzLCBpbnN0YW50aWF0ZWQgYnkgT2JzaWRpYW4gd2hlbiB0aGUgcGx1Z2luIGxvYWRzICovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERlZmluaXRpb25MaXN0UGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcclxuXHRwdWJsaWMgc2V0dGluZ3M6IERlZmluaXRpb25MaXN0UGx1Z2luU2V0dGluZ3M7XHJcblx0cHVibGljIHJlYWRvbmx5IGNzc0VsZW1lbnQ6IEhUTUxTdHlsZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xyXG5cclxuXHRhc3luYyBvbmxvYWQoKSB7XHJcblx0XHRjb25zb2xlLmxvZyhgTG9hZGluZyBwbHVnaW4gJHt0aGlzLm1hbmlmZXN0Lm5hbWV9IHYke3RoaXMubWFuaWZlc3QudmVyc2lvbn1gKTtcclxuXHRcdHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0U2V0dGluZ3MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XHJcblx0XHR0aGlzLmNzc0VsZW1lbnQudGV4dENvbnRlbnQgPSBgOnJvb3Qge1xyXG5cdFx0XHQtLWR0Y29sb3I6ICR7dGhpcy5zZXR0aW5ncy5kdGNvbG9yfTtcclxuXHRcdFx0LS1kdHdlaWdodDogJHt0aGlzLnNldHRpbmdzLmR0Ym9sZCA/ICdib2xkJyA6ICdpbmhlcml0J307XHJcblx0XHRcdC0tZHRzdHlsZTogJHt0aGlzLnNldHRpbmdzLmR0aXRhbGljID8gJ2l0YWxpYycgOiAnaW5oZXJpdCd9O1xyXG5cdFx0XHQtLWRkaW5kZW50YXRpb246ICR7dGhpcy5zZXR0aW5ncy5kZGluZGVudGF0aW9ufXB4O1x0XHJcblx0XHR9YDtcclxuXHRcdGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQodGhpcy5jc3NFbGVtZW50KTtcclxuXHRcdHRoaXMucmVnaXN0ZXJFZGl0b3JFeHRlbnNpb24obGl2ZVVwZGF0ZURlZmluaXRpb25MaXN0cyk7XHJcblx0XHR0aGlzLnJlZ2lzdGVyTWFya2Rvd25Qb3N0UHJvY2Vzc29yKHBvc3RQcm9jZXNzRGVmaW5pdGlvbkxpc3RzLCA5OSk7XHJcblx0XHR0aGlzLmFkZFNldHRpbmdUYWIobmV3IERlZmluaXRpb25MaXN0U2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xyXG5cdH1cclxuXHJcblx0b251bmxvYWQoKSB7XHJcblx0XHRjb25zb2xlLmxvZyhgVW5sb2FkaW5nIHBsdWdpbiAke3RoaXMubWFuaWZlc3QubmFtZX1gKTtcclxuXHRcdGlmICh0aGlzLmNzc0VsZW1lbnQpIHRoaXMuY3NzRWxlbWVudC5yZW1vdmUoKTtcclxuXHR9XHJcbn1cclxuXHJcbi8qIDIuIFRoZSBWaWV3UGx1Z2luIHRoYXQgd29ya3MgaW4gRWRpdCBNb2RlLiAqL1xyXG5jb25zdCBsaXZlVXBkYXRlRGVmaW5pdGlvbkxpc3RzID0gVmlld1BsdWdpbi5mcm9tQ2xhc3MoXHJcblx0LyogVGhlIFZpZXdQbHVnaW4gY2xhc3MgaXMgZ2VuZXJpYzogaXQgcmVxdWlyZXMgYW4gdW5kZXJseWluZyB0eXBlLCBhIHN1YmNsYXNzIG9mXHJcbiAgICAgKiB0aGUgUGx1Z2luVmFsdWUgY2xhc3MuIFRoYXQgaXMgdG8gYmUgdGhlIGZpcnN0IGFyZ3VtZW50IHBhc3NlZCBpbnRvIHRoZSBjbGFzc1xyXG4gICAgICogbWV0aG9kIC5mcm9tQ2xhc3MoKSB3aGljaCByZXR1cm5zIGEgVmlld1BsdWdpbiBpbnN0YW5jZSB3aXRoIHRoYXQgdW5kZXJseWluZ1xyXG4gICAgICogdHlwZS4gVGhlIHNlY29uZCBhcmd1bWVudCBvZiB0aGF0IGNsYXNzIG1ldGhvZCwgdG8gZ2l2ZSBhZGRpdGlvbmFsIGRldGFpbHMsXHJcbiAgICAgKiBpcyBhIFBsdWdpblNwZWMgaW5zdGFuY2Ugd2l0aCB0aGUgc2FtZSB1bmRlcmx5aW5nIHR5cGUuIEl0IGhhcyB6ZXJvIG9yIG1vcmVcclxuICAgICAqIG9mIHRoZSBwcm9wZXJ0aWVzIGV2ZW50SGFuZGxlcnMsIGV2ZW50T2JzZXJ2ZXJzLCBwcm92aWRlLCBhbmQgZGVjb3JhdGlvbnMuXHJcbiAgICAgKiBUaGUgbGF0dGVyIGlzIGEgZnVuY3Rpb24gdGhhdCwgd2hlbiBwYXNzZWQgYW4gaW5zdGFuY2Ugb2YgdGhlIHVuZGVybHlpbmdcclxuICAgICAqIGNsYXNzLCByZXR1cm5zIGEgRGVjb3JhdGlvblNldCAtIGluIHRoaXMgY2FzZSB0aGUgZnVuY3Rpb24gc2ltcGx5IHJldHVybnNcclxuICAgICAqIHRoZSAuZGVjb3JhdGlvbnMgaW5zdGFuY2UgcHJvcGVydHkuICovXHJcblx0Y2xhc3MgeyAgLy8gdGhlIHBsdWdpbiBlbWJlZHMgYW4gYW5vbnltb3VzIGNsYXNzIHdlIGRlZmluZSBoZXJlXHJcblx0XHRkZWNvcmF0aW9uczogRGVjb3JhdGlvblNldDtcclxuXHRcdHByaXZhdGUgcmVhZG9ubHkgVEVSTV9DTEFTUzogc3RyaW5nID0gJ3ZpZXctZHQnO1xyXG5cdFx0cHJpdmF0ZSByZWFkb25seSBERUZfQ0xBU1M6IHN0cmluZyA9ICd2aWV3LWRkJztcclxuXHRcdHByaXZhdGUgcmVhZG9ubHkgTUFSS0VSX0NMQVNTOiBzdHJpbmcgPSAndmlldy1kZC1tYXJrZXInO1xyXG5cdFx0cHJpdmF0ZSByZWFkb25seSBURVJNX0RFQzogRGVjb3JhdGlvbiA9IERlY29yYXRpb24ubGluZSh7Y2xhc3M6IHRoaXMuVEVSTV9DTEFTU30pO1xyXG5cdFx0cHJpdmF0ZSByZWFkb25seSBERUZfREVDOiBEZWNvcmF0aW9uID0gRGVjb3JhdGlvbi5saW5lKHtjbGFzczogdGhpcy5ERUZfQ0xBU1N9KTtcclxuXHRcdHByaXZhdGUgcmVhZG9ubHkgTUFSS0VSX0RFQzogRGVjb3JhdGlvbiA9IERlY29yYXRpb24ubWFyayh7Y2xhc3M6IHRoaXMuTUFSS0VSX0NMQVNTfSk7XHJcblx0XHRjb25zdHJ1Y3Rvcih2aWV3OiBFZGl0b3JWaWV3KSB7XHJcblx0XHRcdHRoaXMuZGVjb3JhdGlvbnMgPSBEZWNvcmF0aW9uLm5vbmU7XHJcblx0XHR9XHJcblx0XHQvKiB0aGlzLmRlY29yYXRpb25zIHNob3VsZCBiZSBhIGN1bXVsYXRpdmUgYXJyYXkgb2YgYWxsIHRoZSBkZWNvcmF0aW9ucyAoaS5lLlxyXG5cdFx0KiBjbGFzcyBjaGFuZ2VzKSB3ZSBoYXZlIGNob3NlbiB0byBhZGQgdG8gbGluZSBlbGVtZW50cy4gU28gd2UgYWx3YXlzIGFkZCB0byBpdFxyXG5cdFx0KiBvciBtb2RpZnkgYW4gZXhpc3RpbmcgZW50cnksIHJhdGhlciB0aGFuIGluc3RhbnRpYXRpbmcgaXQgYW5ldy5cclxuXHRcdCogTm90ZSB0aGF0IGl0cyB0eXBlLCBEZWNvcmF0aW9uU2V0LCBpcyBhIFJhbmdlU2V0IG9mIGl0ZW1zIG9mIHRoZSB1bmRlcmx5aW5nXHJcblx0XHQqIHR5cGUgRGVjb3JhdGlvbi4gU3VjaCBhIFJhbmdlU2V0IG9iamVjdCBoYXMgcHJvcGVydGllcyBhbmQgbWV0aG9kc1xyXG5cdFx0KiAuc2l6ZSAobnVtYmVyIG9mIGVsZW1lbnRzKTsgLml0ZXIoKSB3aXRoIG9wdGlvbmFsIGFyZyBmcm9tLCBhbiBvZmZzZXQgdGhhdFxyXG5cdFx0KiBsaWVzIGluIG9yIGJlZm9yZSB0aGUgZmlyc3QgdG8gYmUgaXRlcmF0ZWQ7IC51cGRhdGUoUmFuZ2VTZXRVcGRhdGUpIHRvIGFkZFxyXG5cdFx0KiBvciByZW1vdmUgdGhlbSAocmV0dXJucyB0aGUgbmV3IHZlcnNpb24pOyAuYmV0d2Vlbihmcm9tLCB0bywgZnVuYykgcnVuIGZ1bmNcclxuXHRcdCogb24gZXZlcnkgRGVjb3JhdGlvbiBiZXR3ZWVuIHRoZSBvZmZzZXRzIGZyb20gYW5kIHRvOyAubWFwKENoYW5nZURlc2MpLiAqL1xyXG5cclxuXHRcdHVwZGF0ZSh1cGRhdGU6IFZpZXdVcGRhdGUpIHtcclxuXHRcdFx0aWYgKHVwZGF0ZS5kb2NDaGFuZ2VkIHx8IHVwZGF0ZS5zZWxlY3Rpb25TZXQpXHJcblx0XHRcdFx0Lyogb3RoZXIgYm9vbGVhbiBwcm9wZXJ0aWVzIHRoYXQgbWF5IGJlIHVzZWZ1bDpcclxuICAgICAgICAgICAgICAgICogIC52aWV3cG9ydENoYW5nZWQ6IHZpZXdwb3J0IG9yIHZpc2libGUgcmFuZ2VzIGhhdmUgY2hhbmdlZFxyXG4gICAgICAgICAgICAgICAgKiAgLmdlb21ldHJ5Q2hhbmdlZDogZWRpdG9yIHNpemUgb3IgdGhlIGRvY3VtZW50IGl0c2VsZiBjaGFuZ2VkXHJcbiAgICAgICAgICAgICAgICAqICAuZm9jdXNDaGFuZ2VkOiBtYXliZSBzb21lIHN3aXRjaCB0byBhbm90aGVyIGRvY3VtZW50LCBwYW5lbCBldGMuO1xyXG4gICAgICAgICAgICAgICAgKiAgY2hhbmdlIGluIFZpZXcgYmV0d2VlbiBFZGl0aW5nIGFuZCBSZW5kZXJpbmcgdmlldzsgYnV0XHJcbiAgICAgICAgICAgICAgICAqICB3aGVuIHRoZSBkb2N1bWVudC9FZGl0aW5nIGlzIGFjdGl2YXRlZCwgLmdlb21ldHJ5Q2hhbmdlZCBpcyBhbHNvIHRydWUuXHJcbiAgICAgICAgICAgICAgICAqL1xyXG5cdFx0XHR7XHJcblx0XHRcdFx0Y29uc3Qgc3RhdGUgPSB1cGRhdGUudmlldy5zdGF0ZTtcclxuXHRcdFx0XHRjb25zdCBjdXJzb3JQb3MgPSBzdGF0ZS5zZWxlY3Rpb24ubWFpbi5oZWFkO1xyXG5cclxuXHRcdFx0XHQvLyB0aGUgTGluZSBvYmplY3QgdGhhdCByZXByZXNlbnRzIHRoZSBjdXJyZW50IGxpbmUgb2YgdGhlIGRvY3VtZW50XHJcblx0XHRcdFx0Ly8gbm90ZSB0aGF0IHN0YXRlLmRvYyBpcyBhbiBvYmplY3Qgb2YgY2xhc3MgVGV4dFxyXG5cdFx0XHRcdGNvbnN0IGN1cnJlbnRMaW5lID0gc3RhdGUuZG9jLmxpbmVBdChjdXJzb3JQb3MpO1xyXG5cdFx0XHRcdC8vIHRoZSB0ZXh0IG9mIHRoZSBmb2xsb3dpbmcgbGluZVxyXG5cdFx0XHRcdGNvbnN0IG5leHRMaW5lVGV4dDogc3RyaW5nID0gKHN0YXRlLmRvYy5saW5lcyA9PT0gY3VycmVudExpbmUubnVtYmVyKSA/ICcnIDpcclxuXHRcdFx0XHRcdHN0YXRlLmRvYy5saW5lKGN1cnJlbnRMaW5lLm51bWJlciArIDEpLnRleHQ7XHJcblx0XHRcdFx0aWYgKCFjdXJyZW50TGluZS50ZXh0LnN0YXJ0c1dpdGgoTUFSS0VSKSAmJlxyXG5cdFx0XHRcdFx0IW5leHRMaW5lVGV4dC5zdGFydHNXaXRoKE1BUktFUikpXHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblxyXG5cdFx0XHRcdC8vIFRPRE86IHR3byB0ZXJtcyBiZWZvcmUgb25lIGRlZmluaXRpb25cclxuXHRcdFx0XHQvLyBUT0RPOiBwYXJzZSBhbGwgZGVmaW5pdGlvbiBsaXN0cyB3aGVuIGZpcnN0IG9wZW5pbmcgRWRpdCBWaWV3LCBvciBhdFxyXG5cdFx0XHRcdC8vICBsZWFzdCB0aG9zZSBpbnNpZGUgdGhlIHZpZXdwb3J0ICgrIHVwZGF0ZSBpZiB1cGRhdGUudmlld3BvcnRDaGFuZ2VkKVxyXG5cdFx0XHRcdC8vIFRPRE86IGltcGxlbWVudCByZW1vdmFsIG9mIGNsYXNzIHdoZW4gaXQncyBub3QgYSBETCBhbnltb3JlIGFmdGVyIGFuIGVkaXRcclxuXHRcdFx0XHQvLyBGSVhNRTogZW1wdHkgPGR0PiBrZWVwcyBnZXR0aW5nIGFkZGl0aW9uYWwgZGVjb3JhdGlvbnNcclxuXHJcblx0XHRcdFx0Ly8gUGVyZm9ybSBhIGZldyBjaGVja3MgYmVmb3JlIGFkZGluZyBhbnkgZGVjb3JhdGlvbnNcclxuXHRcdFx0XHRjb25zdCBsaW5lQ2xhc3NlcyA9ICB1cGRhdGUudmlld1xyXG5cdFx0XHRcdFx0XHQuZG9tQXRQb3MoY3Vyc29yUG9zKS5ub2RlLnBhcmVudEVsZW1lbnQuY2xvc2VzdCgnLmNtLWxpbmUnKT8uY2xhc3NMaXN0XHJcblx0XHRcdFx0XHR8fCB7Y29udGFpbnM6IChzOiBzdHJpbmcpID0+IGZhbHNlfTtcclxuXHRcdFx0XHQvLyAtIE5vIGRlZmluaXRpb24gbGlzdHMgaW5zaWRlIGEgY29kZSBibG9ja1xyXG5cdFx0XHRcdGlmIChsaW5lQ2xhc3Nlcy5jb250YWlucygnSHlwZXJNRC1jb2RlYmxvY2snKSlcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHQvLyAtIERvbid0IGFkZCBhIGNsYXNzIHdoZW4gaXQncyBhbHJlYWR5IGJlZW4gZG9uZVxyXG5cdFx0XHRcdGlmIChsaW5lQ2xhc3Nlcy5jb250YWlucyh0aGlzLkRFRl9DTEFTUykgfHxcclxuXHRcdFx0XHRcdGxpbmVDbGFzc2VzLmNvbnRhaW5zKHRoaXMuVEVSTV9DTEFTUykpXHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblxyXG5cdFx0XHRcdC8vIEZpbmFsbHksIGFzIGFsbCBjcml0ZXJpYSBoYXZlIGJlZW4gbWV0LCB3ZSBnZXQgdG8gd29ya1xyXG5cdFx0XHRcdGNvbnN0IG5ld0RlY29yYXRpb25zID1cclxuXHRcdFx0XHRcdGN1cnJlbnRMaW5lLnRleHQuc3RhcnRzV2l0aChNQVJLRVIpXHJcblx0XHRcdFx0XHRcdD8gW1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMuREVGX0RFQy5yYW5nZShjdXJyZW50TGluZS5mcm9tKSwgLy8gbGluZWRlYyBhbmNob3JlZCBvbiBzdGFydFxyXG5cdFx0XHRcdFx0XHRcdHRoaXMuTUFSS0VSX0RFQy5yYW5nZShjdXJyZW50TGluZS5mcm9tLCBjdXJyZW50TGluZS5mcm9tKzQpXHJcblx0XHRcdFx0XHRcdF0gOiBbXHJcblx0XHRcdFx0XHRcdFx0dGhpcy5URVJNX0RFQy5yYW5nZShjdXJyZW50TGluZS5mcm9tKVxyXG5cdFx0XHRcdFx0XHRdO1xyXG5cdFx0XHRcdHRoaXMuZGVjb3JhdGlvbnMgPSB0aGlzLmRlY29yYXRpb25zLnVwZGF0ZSh7YWRkOiBuZXdEZWNvcmF0aW9uc30pO1xyXG5cdFx0XHRcdGNvbnNvbGUuZGVidWcodGhpcy5kZWNvcmF0aW9ucy5zaXplLCAnZGVjb3JhdGlvbnMnKTtcclxuXHRcdFx0XHQvKiB0aGUgYXJndW1lbnQgZm9yIC51cGRhdGUgaXMgb2YgY2xhc3MgUmFuZ2VTZXRVcGRhdGU8RGVjb3JhdGlvbj4sXHJcblx0XHRcdFx0KiBhbmQgUmFuZ2VTZXRVcGRhdGUgaXMgYSB0eXBlZGVmIG9mIGFuIE9iamVjdCB3aXRoIG9wdGlvbmFsXHJcblx0XHRcdFx0KiBwcm9wZXJ0eSAuYWRkIG9mIGNsYXNzIHJlYWRvbmx5IFJhbmdlPERlY29yYXRpb24+OyB0aGF0IGluIHR1cm4gaGFzXHJcblx0XHRcdFx0KiBpbnN0YW5jZSBwcm9wZXJ0aWVzIGZyb20sIHRvLCBhbmQgdGhlIERlY29yYXRpb24uXHJcblx0XHRcdFx0KiBZb3UgY2FuIGNyZWF0ZSBhIFJhbmdlPERlY29yYXRpb24+IGJ5IGNyZWF0aW5nIGEgRGVjb3JhdGlvbiBhbmRcclxuXHRcdFx0XHQqIGFwcGx5aW5nIGl0cyAucmFuZ2UgbWV0aG9kIChpbmhlcml0ZWQgZnJvbSBpdHMgc3VwZXJjbGFzcyBSYW5nZVZhbHVlKS5cclxuXHRcdFx0XHQqIE5vdGUgdGhhdCAudXBkYXRlIGRvZXNuJ3QgbW9kaWZ5IHRoZSBpbnN0YW5jZSBidXQgcmV0dXJucyBpdC4gKi9cclxuXHRcdFx0fVxyXG5cdFx0XHQvLyBlbHNlIGlmICh1cGRhdGUudmlld3BvcnRDaGFuZ2VkKSBjb25zb2xlLmxvZygndmlld3BvcnQgY2hhbmdlZCcpO1xyXG5cdFx0XHQvLyBlbHNlIGlmICh1cGRhdGUuZ2VvbWV0cnlDaGFuZ2VkKSBjb25zb2xlLmxvZygnZ2VvbWV0cnkgY2hhbmdlZCcpO1xyXG5cdFx0fVxyXG5cdH0sXHJcblx0e1xyXG5cdFx0ZGVjb3JhdGlvbnM6IHYgPT4gdi5kZWNvcmF0aW9ucyxcclxuXHR9XHJcbik7XHJcblxyXG4vKiAzLiBUaGUgTWFya2Rvd25Qb3N0UHJvY2Vzc29yIHRoYXQgcHJlcGFyZXMgUmVhZGluZyBWaWV3IGFuZCBQREYgZXhwb3J0LiAqL1xyXG5jb25zdCBwb3N0UHJvY2Vzc0RlZmluaXRpb25MaXN0czogTWFya2Rvd25Qb3N0UHJvY2Vzc29yID0gZnVuY3Rpb24oZWxlbWVudCwgY29udGV4dCk6IFByb21pc2U8bnVsbD58dW5kZWZpbmVkIHtcclxuXHQvKiBUaGlzIHBvc3QtcHJvY2Vzc29yIGlzIGNhbGxlZFxyXG4gICAgICogIC0gd2hlbiB0aGUgZG9jdW1lbnQgZmlyc3QgZW50ZXJzIFJlYWRpbmcgdmlldzogb24gZXZlcnkgY2hpbGQtZGl2IG9mIHBhZ2UgZGl2XHJcbiAgICAgKiAgLSB3aGVuIHN3aXRjaGluZyB0byBSZWFkaW5nIHZpZXc6IG9uY2UgcGVyIGRpdiB0aGF0IGhhcyBjaGFuZ2VkXHJcbiAgICAgKiAgLSB3aGVuIGV4cG9ydGluZyB0byBQREY6IG9uIHRoZSB3aG9sZSBwYWdlIGRpdiAqL1xyXG5cclxuXHRjb25zb2xlLmRlYnVnKGVsZW1lbnQub3V0ZXJIVE1MKTtcclxuXHJcblx0LyogSW4gUmVhZGluZyBWaWV3LCB0aGUgZWxlbWVudCBwYXNzZWQgaW4gSVMgYSBzaW5nbGUgPGRpdj47XHJcblx0ICogaW4gUERGIG91dHB1dCwgaXQgaXMgdGhlIFBBUkVOVCBFTEVNRU5UIG9mIGFsbCB0aGUgPGRpdj5zLlxyXG5cdCAqIEZpcnN0IGNoZWNrIGlmIHRoZSBlbGVtZW50IGhhcyBjbGFzcyAnZWwtcCcgKFJlYWRpbmctdmlldyBwYXJhZ3JhcGgpXHJcblx0ICogb3IgJ21hcmtkb3duLXJlbmRlcmVkJyAoUERGLW91dHB1dCByb290IGVsZW1lbnQpLlxyXG4gICAgICogSWYgbmVpdGhlciwgcmV0dXJuIGltbWVkaWF0ZWx5LiAgKi9cclxuXHRpZiAoIWVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlbC1wJykgJiZcclxuXHRcdCFlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZWwtdWwnKSAmJlxyXG5cdFx0IWVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtYXJrZG93bi1yZW5kZXJlZCcpKVxyXG5cdFx0cmV0dXJuO1xyXG5cclxuXHQvLyBpdCdzIG9uZSBwYXJhZ3JhcGggKGluIFJlYWRpbmcgVmlldyksIG9yIHRoZSB3aG9sZSBkb2N1bWVudCAoUERGKVxyXG5cdGxldCBwcmVDaGVja2VkOiBib29sZWFuID0gZmFsc2U7XHJcblx0aWYgKGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlbC1wJykpIHsgLy8gUmVhZGluZyBWaWV3IHBhcmFncmFwaFxyXG5cdFx0aWYgKCFlbGVtZW50LmZpcnN0RWxlbWVudENoaWxkLmlubmVySFRNTC5tYXRjaChkZWZpbml0aW9uTWFya2VyKSlcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0Ly8gY29uc29sZS5kZWJ1ZygnTm93IHdlIHdpbGwgY3JlYXRlIHRoZSBtb2RpZmllZCBwYXJhZ3JhcGg6Jyk7XHJcblx0XHQvLyBjb25zb2xlLmRlYnVnKGVsZW1lbnQudGV4dENvbnRlbnQpO1xyXG5cdFx0cHJlQ2hlY2tlZCA9IHRydWU7XHJcblx0fVxyXG5cdGlmIChlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZWwtdWwnKSkgeyAvLyBsaXN0LiBJcyB0aGVyZSBhIDxkZD4gYXQgdGhlIGVuZD9cclxuXHRcdGlmICghZWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZC5sYXN0RWxlbWVudENoaWxkLmlubmVySFRNTC5jb250YWlucygnXFxuJykpXHJcblx0XHRcdHJldHVybjtcclxuXHRcdGNvbnN0IG9yaWdpbmFsSFRNTDogc3RyaW5nID0gZWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZC5sYXN0RWxlbWVudENoaWxkXHJcblx0XHRcdC5pbm5lckhUTUw7XHJcblx0XHRjb25zdCBuZXdsaW5lUG9zOiBudW1iZXIgPSBvcmlnaW5hbEhUTUwuaW5kZXhPZignXFxuJyk7XHJcblx0XHRlbGVtZW50LmZpcnN0RWxlbWVudENoaWxkLmxhc3RFbGVtZW50Q2hpbGQuaW5uZXJIVE1MID1cclxuXHRcdFx0b3JpZ2luYWxIVE1MLnNsaWNlKDAsIG5ld2xpbmVQb3MpO1xyXG5cdFx0ZWxlbWVudC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJykpLmlubmVySFRNTCA9XHJcblx0XHRcdG9yaWdpbmFsSFRNTC5zbGljZShuZXdsaW5lUG9zKzEpO1xyXG5cdFx0cHJlQ2hlY2tlZCA9IHRydWU7XHJcblx0fVxyXG5cclxuXHQvKiBUaGlzIFByb21pc2UgZ2V0cyBubyBjb250ZW50OyB0aGUgb25seSB1c2Ugb2YgaXRzIGZ1bGZpbGxtZW50XHJcblx0ICogaXMgdG8gc2lnbmFsIHRvIHRoZSByZWNlaXZpbmcgcHJvY2VzcyB0aGF0IHdlJ3JlIGRvbmVcclxuXHQgKiBlZGl0aW5nIGl0cyBET00gKi9cclxuXHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc3VsdENhbGxiYWNrOiAodjogYW55KSA9PiB2b2lkKSA9PiB7XHJcblx0XHRsZXQgcGFyYWdyYXBoczogSFRNTFBhcmFncmFwaEVsZW1lbnRbXTtcclxuXHRcdGlmIChwcmVDaGVja2VkKVxyXG5cdFx0XHRwYXJhZ3JhcGhzID0gW2VsZW1lbnQubGFzdEVsZW1lbnRDaGlsZCBhcyBIVE1MUGFyYWdyYXBoRWxlbWVudF07XHJcblx0XHRlbHNlXHJcblx0XHRcdHBhcmFncmFwaHMgPSBlbGVtZW50LmZpbmRBbGwoJzpzY29wZSA+IGRpdiA+IHAnKSBhcyBIVE1MUGFyYWdyYXBoRWxlbWVudFtdO1xyXG5cclxuXHRcdHBhcmFncmFwaHMuZm9yRWFjaCgocGFyOiBIVE1MUGFyYWdyYXBoRWxlbWVudCkgPT4ge1xyXG5cdFx0XHRpZiAoIXByZUNoZWNrZWQgJiYgIXBhci5pbm5lckhUTUwubWF0Y2goZGVmaW5pdGlvbk1hcmtlcikpIHJldHVybjtcclxuXHJcblx0XHRcdC8vIGNyZWF0ZSB0aGUgPGRsPiBlbGVtZW50IHRoYXQgaXMgdG8gcmVwbGFjZSB0aGUgcGFyYWdyYXBoIGVsZW1lbnRcclxuXHRcdFx0Y29uc3QgZGVmTGlzdDogSFRNTERMaXN0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RsJyk7XHJcblx0XHRcdGxldCBzdGFydE9mTGluZTogYm9vbGVhbiA9IHRydWU7XHJcblx0XHRcdGxldCBpdGVtRWxlbWVudDogSFRNTEVsZW1lbnQ7XHJcblxyXG5cdFx0XHQvLyBmaWxsIHRoZSBuZXcgPGRsPiB3aXRoIGNsb25lcyBvZiB0aGUgbm9kZXMgaW4gdGhlIG9yaWdpbmFsIDxwPlxyXG5cdFx0XHRwYXIuY2hpbGROb2Rlcy5mb3JFYWNoKG5vZGUgPT4ge1xyXG5cdFx0XHRcdGlmICgndGFnTmFtZScgaW4gbm9kZSAmJiBub2RlLnRhZ05hbWUgPT09IFwiQlJcIikge1xyXG5cdFx0XHRcdFx0c3RhcnRPZkxpbmUgPSB0cnVlO1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRjb25zdCBjbG9uZSA9IG5vZGUuY2xvbmVOb2RlKHRydWUpO1xyXG5cdFx0XHRcdGlmIChzdGFydE9mTGluZSkge1xyXG5cdFx0XHRcdFx0aWYgKG5vZGUudGV4dENvbnRlbnQubWF0Y2goZGVmaW5pdGlvbk1hcmtlcikpIHtcclxuXHRcdFx0XHRcdFx0aXRlbUVsZW1lbnQgPSBkZWZMaXN0LmNyZWF0ZUVsKCdkZCcpO1xyXG5cdFx0XHRcdFx0XHRjbG9uZS50ZXh0Q29udGVudCA9IG5vZGUudGV4dENvbnRlbnQuc2xpY2UoNCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRlbHNlIGlmIChub2RlLnRleHRDb250ZW50Lmxlbmd0aCA8PSAxMDApIHtcclxuXHRcdFx0XHRcdFx0Ly8gYSB0ZXJtIGNhbid0IHJlYXNvbmFibHkgYmUgbG9uZ2VyIHRoYW4gMTAwIGNoYXJzXHJcblx0XHRcdFx0XHRcdGl0ZW1FbGVtZW50ID0gZGVmTGlzdC5jcmVhdGVFbCgnZHQnKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRpdGVtRWxlbWVudCA9IGRlZkxpc3QuY3JlYXRlRWwoJ3AnKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHN0YXJ0T2ZMaW5lID0gZmFsc2U7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGl0ZW1FbGVtZW50LmFwcGVuZChjbG9uZSk7XHJcblx0XHRcdH0pXHJcblxyXG5cdFx0XHQvLyBwdXQgdGhlIDxkbD4gaW4gcGxhY2Ugb2YgdGhlIDxwPlxyXG5cdFx0XHRwYXIucmVwbGFjZVdpdGgoZGVmTGlzdCk7XHJcblx0XHR9KVxyXG5cdFx0cmVzdWx0Q2FsbGJhY2sobnVsbCk7XHJcblx0fSlcclxufVxyXG5cclxuLyogNC4gVGhlIFBsdWdpblNldHRpbmdUYWIgZm9yIHRoaXMgcGx1Z2luJ3Mgc2V0dGluZ3MuICovXHJcbmNsYXNzIERlZmluaXRpb25MaXN0U2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xyXG5cdHByaXZhdGUgcmVhZG9ubHkgbmFtZTogc3RyaW5nO1xyXG5cdHByaXZhdGUgcmVhZG9ubHkgc2V0dGluZ3M6IERlZmluaXRpb25MaXN0UGx1Z2luU2V0dGluZ3M7XHJcblx0cHJpdmF0ZSByZWFkb25seSBjc3NFbGVtZW50OiBIVE1MU3R5bGVFbGVtZW50O1xyXG5cdHByaXZhdGUgcmVhZG9ubHkgc2F2ZUNoYW5nZXM6IChkYXRhOiBhbnkpID0+IFByb21pc2U8dm9pZD47XHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogRGVmaW5pdGlvbkxpc3RQbHVnaW4pIHtcclxuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcclxuXHRcdHRoaXMubmFtZSA9IHBsdWdpbi5tYW5pZmVzdC5uYW1lO1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IHBsdWdpbi5zZXR0aW5ncztcclxuXHRcdHRoaXMuY3NzRWxlbWVudCA9IHBsdWdpbi5jc3NFbGVtZW50O1xyXG5cdFx0dGhpcy5zYXZlQ2hhbmdlcyA9IHBsdWdpbi5zYXZlRGF0YS5iaW5kKHBsdWdpbik7XHJcblx0fVxyXG5cclxuXHRkaXNwbGF5KCk6IHZvaWQge1xyXG5cdFx0Y29uc3Qge2NvbnRhaW5lckVsfSA9IHRoaXM7XHJcblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xyXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoJ3N0eWxlJywge3RleHQ6IGBcclxuXHRcdFx0Lm1vZC10b2dnbGUge1xyXG5cdFx0XHRcdGJvcmRlci10b3A6IG5vbmU7XHJcblx0XHRcdH1cclxuXHRcdFx0LmV4YW1wbGUge1xyXG5cdFx0XHRcdG1hcmdpbi10b3A6IDEwcHg7XHJcblx0XHRcdFx0aGVpZ2h0OiBhdXRvO1xyXG5cdFx0XHRcdHBhZGRpbmc6IDRweDtcclxuXHRcdFx0XHRiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDE1MCwgMTUwLCAxNTAsIDAuMSk7XHJcblx0XHRcdH1cclxuXHRcdFx0LmV4YW1wbGUgPiBkbCB7XHJcblx0XHRcdFx0bWFyZ2luLWJsb2NrOiAwO1xyXG5cdFx0XHR9XHJcblx0XHRgfSk7XHJcblx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7dGV4dDogdGhpcy5uYW1lfSk7XHJcblxyXG5cdFx0Ly8gVGhlIFNldHRpbmdzIGl0ZW1zXHJcblx0XHRsZXQgY29sb3JTZXR0OiBDb2xvckNvbXBvbmVudDtcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnVGVybXMnKVxyXG5cdFx0XHQuc2V0RGVzYygnRm9udCBjb2xvcicpXHJcblx0XHRcdC5hZGRDb2xvclBpY2tlcihjcCA9PiB7XHJcblx0XHRcdFx0Y3Auc2V0VmFsdWUodGhpcy5zZXR0aW5ncy5kdGNvbG9yKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKG5ld0NvbG9yID0+IHtcclxuXHRcdFx0XHRcdFx0Y29uc29sZS5kZWJ1ZygnY29sb3Igc2V0IHRvJywgbmV3Q29sb3IpO1xyXG5cdFx0XHRcdFx0XHR0aGlzLnNldHRpbmdzLmR0Y29sb3IgPSBuZXdDb2xvcjtcclxuXHRcdFx0XHRcdFx0dGhpcy5jc3NFbGVtZW50LnNoZWV0Lmluc2VydFJ1bGUoYDpyb290IHtcclxuXHRcdFx0XHRcdFx0XHQtLWR0Y29sb3I6ICR7bmV3Q29sb3J9O1xyXG5cdFx0XHRcdFx0XHR9YCwgdGhpcy5jc3NFbGVtZW50LnNoZWV0LmNzc1J1bGVzLmxlbmd0aCk7XHJcblx0XHRcdFx0XHRcdHRoaXMuc2F2ZUNoYW5nZXModGhpcy5zZXR0aW5ncyk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRjb2xvclNldHQgPSBjcDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdCk7XHJcblx0XHRsZXQgd2VpZ2h0U2V0dDogVG9nZ2xlQ29tcG9uZW50O1xyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXREZXNjKCdCb2xkIGZvbnQnKVxyXG5cdFx0XHQuYWRkVG9nZ2xlKHRvZyA9PiB7XHJcblx0XHRcdFx0dG9nLnNldFZhbHVlKHRoaXMuc2V0dGluZ3MuZHRib2xkKVxyXG5cdFx0XHRcdC5vbkNoYW5nZShuZXdXZWlnaHQgPT4ge1xyXG5cdFx0XHRcdFx0Y29uc29sZS5kZWJ1ZygnYm9sZCBzZXQgdG8nLCBuZXdXZWlnaHQpO1xyXG5cdFx0XHRcdFx0dGhpcy5zZXR0aW5ncy5kdGJvbGQgPSBuZXdXZWlnaHQ7XHJcblx0XHRcdFx0XHR0aGlzLmNzc0VsZW1lbnQuc2hlZXQuaW5zZXJ0UnVsZShgOnJvb3Qge1xyXG5cdFx0XHRcdFx0XHQtLWR0d2VpZ2h0OiAke25ld1dlaWdodCA/ICdib2xkJyA6ICdpbmhlcml0J1xyXG5cdFx0XHRcdFx0fWAsIHRoaXMuY3NzRWxlbWVudC5zaGVldC5jc3NSdWxlcy5sZW5ndGgpO1xyXG5cdFx0XHRcdFx0dGhpcy5zYXZlQ2hhbmdlcyh0aGlzLnNldHRpbmdzKTtcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHRcdHdlaWdodFNldHQgPSB0b2c7XHJcblx0XHRcdH0pO1xyXG5cdFx0bGV0IHN0eWxlU2V0dDogVG9nZ2xlQ29tcG9uZW50O1xyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXREZXNjKCdJdGFsaWMgZm9udCcpXHJcblx0XHRcdC5hZGRUb2dnbGUodG9nID0+IHtcclxuXHRcdFx0XHR0b2cuc2V0VmFsdWUodGhpcy5zZXR0aW5ncy5kdGl0YWxpYylcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShuZXdTdHlsZSA9PiB7XHJcblx0XHRcdFx0XHRcdGNvbnNvbGUuZGVidWcoJ2l0YWxpYyBzZXQgdG8nLCBuZXdTdHlsZSk7XHJcblx0XHRcdFx0XHRcdHRoaXMuc2V0dGluZ3MuZHRpdGFsaWMgPSBuZXdTdHlsZTtcclxuXHRcdFx0XHRcdFx0dGhpcy5jc3NFbGVtZW50LnNoZWV0Lmluc2VydFJ1bGUoYDpyb290IHtcclxuXHRcdFx0XHRcdFx0LS1kdHN0eWxlOiAke25ld1N0eWxlID8gJ2l0YWxpYycgOiAnaW5oZXJpdCdcclxuXHRcdFx0XHRcdFx0fWAsIHRoaXMuY3NzRWxlbWVudC5zaGVldC5jc3NSdWxlcy5sZW5ndGgpO1xyXG5cdFx0XHRcdFx0XHR0aGlzLnNhdmVDaGFuZ2VzKHRoaXMuc2V0dGluZ3MpO1xyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0XHRzdHlsZVNldHQgPSB0b2c7XHJcblx0XHRcdH0pO1xyXG5cdFx0bGV0IGluZGVudFNldHQ6IFNsaWRlckNvbXBvbmVudDtcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnRGVmaW5pdGlvbnMnKVxyXG5cdFx0XHQuc2V0RGVzYygnSW5kZW50YXRpb24gb2YgdGhlIGRlZmluaXRpb25zJylcclxuXHRcdFx0LmFkZFNsaWRlcihzbCA9PiB7XHJcblx0XHRcdFx0c2wuc2V0TGltaXRzKDAsIDUwLCAxKVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMuc2V0dGluZ3MuZGRpbmRlbnRhdGlvbilcclxuXHRcdFx0XHRcdC5zZXREeW5hbWljVG9vbHRpcCgpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UodmFsdWUgPT4ge1xyXG5cdFx0XHRcdFx0XHRjb25zb2xlLmRlYnVnKCdpbmRlbnRhdGlvbiBzZXQgdG8nLCB2YWx1ZSwgJ3B4Jyk7XHJcblx0XHRcdFx0XHRcdHRoaXMuc2V0dGluZ3MuZGRpbmRlbnRhdGlvbiA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHR0aGlzLmNzc0VsZW1lbnQuc2hlZXQuaW5zZXJ0UnVsZShgOnJvb3Qge1xyXG5cdFx0XHRcdFx0XHRcdC0tZGRpbmRlbnRhdGlvbjogJHt2YWx1ZX1weDtcclxuXHRcdFx0XHRcdFx0fWAsIHRoaXMuY3NzRWxlbWVudC5zaGVldC5jc3NSdWxlcy5sZW5ndGgpO1xyXG5cdFx0XHRcdFx0XHR0aGlzLnNhdmVDaGFuZ2VzKHRoaXMuc2V0dGluZ3MpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0aW5kZW50U2V0dCA9IHNsO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0KTtcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuYWRkQnV0dG9uKGJ0ID0+IGJ0LnNldEJ1dHRvblRleHQoJ1Jlc2V0IHRvIGRlZmF1bHRzJylcclxuXHRcdFx0XHQuc2V0VG9vbHRpcCgnQ29sb3I6IGRhcmsgYmx1ZSwgIzU1NTU3N1xcbkluZGVudGF0aW9uOiAzMCBwaXhlbHMnKVxyXG5cdFx0XHRcdC5vbkNsaWNrKGV2dCA9PiB7XHJcblx0XHRcdFx0XHRjb2xvclNldHQuc2V0VmFsdWUoZGVmYXVsdFNldHRpbmdzLmR0Y29sb3IpO1xyXG5cdFx0XHRcdFx0d2VpZ2h0U2V0dC5zZXRWYWx1ZShkZWZhdWx0U2V0dGluZ3MuZHRib2xkKTtcclxuXHRcdFx0XHRcdHN0eWxlU2V0dC5zZXRWYWx1ZShkZWZhdWx0U2V0dGluZ3MuZHRpdGFsaWMpO1xyXG5cdFx0XHRcdFx0aW5kZW50U2V0dC5zZXRWYWx1ZShkZWZhdWx0U2V0dGluZ3MuZGRpbmRlbnRhdGlvbik7XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0KTtcclxuXHJcblx0XHQvLyBUaGUgcHJldmlldyB0aGF0IHNob3dzIGhvdyB0aGUgc2V0dGluZ3Mgd29yayBvdXRcclxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkaXYnLCB7Y2xzOiAnc2V0dGluZy1pdGVtLW5hbWUnLCB0ZXh0OiAnUHJldmlldyd9KTtcclxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkaXYnLCB7Y2xzOiAnZXhhbXBsZSBtYXJrZG93bi1wcmV2aWV3LXZpZXcnfSlcclxuXHRcdC5pbm5lckhUTUwgPSBgXHJcblx0XHRcdDxkbD5cclxuXHRcdFx0PGR0PmRlZmluaXRpb24gbGlzdDwvZHQ+XHJcblx0XHRcdDxkZD5hIGxpc3Qgb2YgcGFpcnMgPGk+KHRlcm0sIGRlZmluaXRpb24pPC9pPiB3aGVyZSBlYWNoXHJcblx0XHRcdHRlcm0gaXMgb24gaXRzIG93biBsaW5lIGFuZCBpdHMgZGVmaW5pdGlvbiBpcyBvbiB0aGUgbGluZShzKSBiZWxvdy5cclxuXHRcdFx0VGhlIGRlZmluaXRpb24gaXMgdXN1YWxseSBpbmRlbnRlZCB0byBzZXQgaXQgYXBhcnQgZnJvbSB0aGUgdGVybTwvZGQ+XHJcblx0XHRcdDxkdD5pbmRlbnRhdGlvbjwvZHQ+XHJcblx0XHRcdDxkZD53aGVuIGEgbGluZSBvciBwYXJhZ3JhcGggc3RhcnRzIGF0IGEgZGlzdGFuY2UgZnJvbSB0aGUgbGVmdCBtYXJnaW48L2RkPlxyXG5cdFx0XHQ8L2RsPlxyXG5cdFx0YDtcclxuXHR9XHJcbn1cclxuIl0sIm5hbWVzIjpbIlBsdWdpbiIsIlZpZXdQbHVnaW4iLCJ2aWV3IiwiRGVjb3JhdGlvbiIsIlNldHRpbmciLCJQbHVnaW5TZXR0aW5nVGFiIl0sIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxhQUFhLEdBQUcsU0FBUyxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQ25DLElBQUksYUFBYSxHQUFHLE1BQU0sQ0FBQyxjQUFjO0FBQ3pDLFNBQVMsRUFBRSxTQUFTLEVBQUUsRUFBRSxFQUFFLFlBQVksS0FBSyxJQUFJLFVBQVUsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxTQUFTLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQztBQUNwRixRQUFRLFVBQVUsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLEtBQUssSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLElBQUksTUFBTSxDQUFDLFNBQVMsQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztBQUMxRyxJQUFJLE9BQU8sYUFBYSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUMvQixDQUFDLENBQUM7QUFDRjtBQUNPLFNBQVMsU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFDaEMsSUFBSSxJQUFJLE9BQU8sQ0FBQyxLQUFLLFVBQVUsSUFBSSxDQUFDLEtBQUssSUFBSTtBQUM3QyxRQUFRLE1BQU0sSUFBSSxTQUFTLENBQUMsc0JBQXNCLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLCtCQUErQixDQUFDLENBQUM7QUFDbEcsSUFBSSxhQUFhLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQ3hCLElBQUksU0FBUyxFQUFFLEdBQUcsRUFBRSxJQUFJLENBQUMsV0FBVyxHQUFHLENBQUMsQ0FBQyxFQUFFO0FBQzNDLElBQUksQ0FBQyxDQUFDLFNBQVMsR0FBRyxDQUFDLEtBQUssSUFBSSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUMsU0FBUyxFQUFFLElBQUksRUFBRSxFQUFFLENBQUMsQ0FBQztBQUN6RixDQUFDO0FBb0ZEO0FBQ08sU0FBUyxTQUFTLENBQUMsT0FBTyxFQUFFLFVBQVUsRUFBRSxDQUFDLEVBQUUsU0FBUyxFQUFFO0FBQzdELElBQUksU0FBUyxLQUFLLENBQUMsS0FBSyxFQUFFLEVBQUUsT0FBTyxLQUFLLFlBQVksQ0FBQyxHQUFHLEtBQUssR0FBRyxJQUFJLENBQUMsQ0FBQyxVQUFVLE9BQU8sRUFBRSxFQUFFLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFO0FBQ2hILElBQUksT0FBTyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsT0FBTyxDQUFDLEVBQUUsVUFBVSxPQUFPLEVBQUUsTUFBTSxFQUFFO0FBQy9ELFFBQVEsU0FBUyxTQUFTLENBQUMsS0FBSyxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRTtBQUNuRyxRQUFRLFNBQVMsUUFBUSxDQUFDLEtBQUssRUFBRSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRTtBQUN0RyxRQUFRLFNBQVMsSUFBSSxDQUFDLE1BQU0sRUFBRSxFQUFFLE1BQU0sQ0FBQyxJQUFJLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsUUFBUSxDQUFDLENBQUMsRUFBRTtBQUN0SCxRQUFRLElBQUksQ0FBQyxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRSxVQUFVLElBQUksRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztBQUM5RSxLQUFLLENBQUMsQ0FBQztBQUNQLENBQUM7QUFDRDtBQUNPLFNBQVMsV0FBVyxDQUFDLE9BQU8sRUFBRSxJQUFJLEVBQUU7QUFDM0MsSUFBSSxJQUFJLENBQUMsR0FBRyxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxPQUFPLFFBQVEsS0FBSyxVQUFVLEdBQUcsUUFBUSxHQUFHLE1BQU0sRUFBRSxTQUFTLENBQUMsQ0FBQztBQUNyTSxJQUFJLE9BQU8sQ0FBQyxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsUUFBUSxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLE9BQU8sTUFBTSxLQUFLLFVBQVUsS0FBSyxDQUFDLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxHQUFHLFdBQVcsRUFBRSxPQUFPLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDaEssSUFBSSxTQUFTLElBQUksQ0FBQyxDQUFDLEVBQUUsRUFBRSxPQUFPLFVBQVUsQ0FBQyxFQUFFLEVBQUUsT0FBTyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUN0RSxJQUFJLFNBQVMsSUFBSSxDQUFDLEVBQUUsRUFBRTtBQUN0QixRQUFRLElBQUksQ0FBQyxFQUFFLE1BQU0sSUFBSSxTQUFTLENBQUMsaUNBQWlDLENBQUMsQ0FBQztBQUN0RSxRQUFRLE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJO0FBQ3RELFlBQVksSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsUUFBUSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLEVBQUUsT0FBTyxDQUFDLENBQUM7QUFDekssWUFBWSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ3BELFlBQVksUUFBUSxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQ3pCLGdCQUFnQixLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxNQUFNO0FBQzlDLGdCQUFnQixLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxPQUFPLEVBQUUsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLENBQUM7QUFDeEUsZ0JBQWdCLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVM7QUFDakUsZ0JBQWdCLEtBQUssQ0FBQyxFQUFFLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUs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
